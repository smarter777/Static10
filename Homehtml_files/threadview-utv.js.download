(window.webpackJsonp=window.webpackJsonp||[]).push([["threadview-utv"],{"+a0K":function(e,t){function n(e,t){return e===t||e!=e&&t!=t}e.exports=n},"/Dz0":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));n.d(t,"b",(function(){return i}));var s=n("Ut5p"),r=n("KrP/");const a=Object(s.b)(r.h);function i(){return e=>{e(a())}}},"/TWJ":function(e,t){function n(e,t){return null==e?void 0:e[t]}e.exports=n},"/rM/":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var s=n("/OK6"),r=n("Cblj");const a=e=>Object(r.isTypingMessage)(e)&&Object(s.isFromVisitor)(e)},"0IL2":function(e,t,n){"use strict";var s=n("QgEn"),r=n("VfuR"),a=n.n(r),i=n("Ktcs"),o=n("9f1P"),c=n.n(o),d=n("4cgu"),l=n("QGYt"),u=n("sl/w"),p=n("+KD7"),h=n("HtM0"),b=n("gFbD"),m=n("fzij"),g=n("Jr27");const j="BOT243",f=c.a.div.withConfig({displayName:"ConsentPrompt__Container",componentId:"sc-1tzee4a-0"})(["border-top:2px solid ",";display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;padding:12px 24px;position:relative;"],p.f),O=c()(m.a).withConfig({displayName:"ConsentPrompt__SmallNoParagraphPadding",componentId:"sc-1tzee4a-1"})(["display:block;word-break:break-word;word-wrap:break-word;-ms-word-break:break-all;p{margin-bottom:0;}"]),x=c()(l.a).withConfig({displayName:"ConsentPrompt__FullWidthButton",componentId:"sc-1tzee4a-2"})(["flex:0 1 100%;"]),y=c.a.div.withConfig({displayName:"ConsentPrompt__FlexWrapper",componentId:"sc-1tzee4a-3"})(["display:flex;flex-direction:row;width:100%;margin:12px 0 8px 0;"]),v=({message:e,onClick:t,onClose:n,showButton:r,queryParamsTestStr:a,isPortal53:o})=>{const[c,l]=Object(i.useState)(!1),p=()=>{t();l(!0)};return Object(s.jsxs)(f,{"data-test-id":"gdpr-consent-prompt",dir:"auto",children:[Object(s.jsx)(O,{use:"help","data-test-id":"gdpr-consent-text",dangerouslySetInnerHTML:{__html:Object(h.a)(e)}}),!r&&o&&a===j&&Object(s.jsx)(g.a,{size:"sm",onClick:n}),r&&Object(s.jsx)(y,{children:Object(s.jsx)(d.a,{currentState:c?"submitting":"ready",Button:x,"data-test-id":"gdpr-consent-agree-button",onClick:p,children:Object(s.jsx)(b.a,{children:e=>Object(s.jsx)(u.a,{message:"conversations-visitor-experience-components.buttons.agree",options:{locale:e}})})})})]})};v.propTypes={isPortal53:a.a.bool.isRequired,message:a.a.string.isRequired,onClick:a.a.func.isRequired,onClose:a.a.func,queryParamsTestStr:a.a.string.isRequired,showButton:a.a.bool.isRequired};v.displayName="ConsentPrompt";t.a=v},"0wen":function(e,t,n){"use strict";n.r(t);n.d(t,"PRIMARY",(function(){return s}));n.d(t,"SECONDARY",(function(){return r}));n.d(t,"TRANSPARENT_ON_PRIMARY",(function(){return a}));const s="primary",r="secondary",a="transparent-on-primary"},"1HZx":function(e,t,n){"use strict";var s=n("QgEn"),r=n("Ktcs"),a=n("OwpT"),i=n.n(a),o=n("ughT"),c=n("l6Ux"),d=n("mKxs"),l=n("nEWr"),u=n("npjq"),p=n("QYOI"),h=n("VfuR"),b=n.n(h),m=n("9f1P"),g=n.n(m),j=n("mEYk"),f=n.n(j);const O=g.a.div.withConfig({displayName:"MessageComposer__FullWidth",componentId:"mkfm8j-0"})(["width:100%;"]),x=g.a.div.withConfig({displayName:"MessageComposer__InputWrapper",componentId:"mkfm8j-1"})(["display:flex;width:100%;align-items:center;justify-content:space-between;flex-wrap:nowrap;"]);class y extends r.Component{render(){const e="input-container m-bottom-2"+(this.props.showingHsBranding?"":" no-branding");return Object(s.jsxs)("div",{className:e,children:[this.props.FileUploads&&Object(s.jsx)(O,{children:this.props.FileUploads}),Object(s.jsxs)(x,{children:[this.props.inputToRender,this.props.children&&Object(s.jsx)("div",{className:"display-flex flex-row m-left-1 no-shrink",children:this.props.children})]})]})}}y.propTypes={FileUploads:b.a.node,children:b.a.node,inputToRender:b.a.node.isRequired,showingHsBranding:b.a.bool};y.defaultProps={FileUploads:null,showingHsBranding:!1};y.displayName="MessageComposer";var v=y,C=n("iu1j");const I=Object(r.createContext)(void 0),T=I.Consumer;I.Provider;var w=n("xA3K");const S=e=>{Object(r.useEffect)(()=>{const t=t=>{if(e(t)){t.stopPropagation();t.preventDefault()}};document.addEventListener("touchmove",t,{passive:!1});return()=>{document.removeEventListener("touchmove",t)}},[e])},k=()=>{},R=e=>{const t=Object(r.forwardRef)((t,n)=>{const{onBlur:a,onFocus:i}=t,o=Object(w.a)(t,["onBlur","onFocus"]),c=Object(r.useRef)(),d=n||c,[l,u]=Object(r.useState)(null);S(e=>{if(l&&e.target!==l){d.current&&d.current.blur();u(null);return!1}return Boolean(l)});const p=e=>{u(null);a(e)},h=e=>{e.target&&u(e.target);i(e)};return Object(s.jsx)(e,Object.assign({},o,{ref:d,onFocus:h,onBlur:p}))});t.propTypes={onBlur:b.a.func,onFocus:b.a.func};t.defaultProps={onBlur:k,onFocus:k};t.displayName="Component";return t};R.propTypes={onBlur:b.a.func.isRequired,onFocus:b.a.func.isRequired};var A=R,E=n("CR0J"),P=n("fzij");const M={error:!1,required:!1},N=g.a.div.withConfig({displayName:"VizExFormControl__FormControlWrapper",componentId:"sc-1epyfv2-0"})(["width:100%;flex-basis:100%;"]);class _ extends r.Component{constructor(...e){super(...e);this.getChildProps=({ariaLabel:e,newError:t,newRequired:n,validationMessage:s,fallbackId:r,ref:a})=>{const i={"aria-label":e,required:n,"aria-invalid":t,"aria-required":n,ref:a};r&&(i.id=r);t&&(i.error=s);return i}}render(){const e=this.props,{"aria-label":t,error:n,validationMessage:r,required:a,theme:i,children:o}=e,c=Object(w.a)(e,["aria-label","error","validationMessage","required","theme","children"]),d=o(Object.assign({},this.getChildProps({ariaLabel:t,newError:n,newRequired:a,validationMessage:r})));return Object(s.jsxs)(N,Object.assign({},c,{children:[d,r?Object(s.jsx)(P.a,{use:n?"error":"default",theme:i,children:r}):null]}))}}_.displayName="VizExFormControl";_.propTypes={"aria-label":b.a.string,children:b.a.func.isRequired,error:b.a.bool,required:b.a.bool,theme:E.a,validationMessage:b.a.node};_.defaultProps=M;_.defaultProps=M;var F=_,q=n("8Q5G"),L=n("57op");const D=L.f,B=L.e,U=L.c,z=L.a,H=L.b,V=L.g,Q="unstyled",W="default",J=e=>(new DOMParser).parseFromString(e,"text/html").body.textContent||"",Y=window.navigator?navigator.userAgent.toLowerCase():"",G=()=>Y.includes("trident/"),K=e=>""===e.trim()||"<br />"===e.trim()||"<br>"===e.trim()||"<br/>"===e.trim(),X=()=>Object(m.css)(["outline:none;"]),Z=({use:e,theme:t})=>{switch(e){case Q:return Object(m.css)(["border:none;background-color:transparent;"]);case W:default:return Object(m.css)(["border:2px solid;border-color:",";background-color:",";"],D(t),B(t))}},$=({theme:e})=>Object(m.css)(["cursor:not-allowed;background-color:",";color:",";&[contenteditable][placeholder]:empty::after{color:",";cursor:not-allowed;}"],z(e),H(e),H(e)),ee=({theme:e})=>Object(m.css)(["border:2px solid;border-color:",";"],U(e)),te=g.a.div.withConfig({displayName:"VizExExpandingInput__StyledInput",componentId:"ptga6q-0"})(["border-radius:3px;font-size:16px;line-height:22px;min-height:40px;max-height:",";overflow-x:hidden;overflow-y:auto;padding:8px;position:relative;width:100%;flex-basis:100%;word-break:break-word;cursor:text;",";",";@supports (-webkit-touch-callout:none){cursor:pointer;}&[contenteditable][placeholder]:empty{overflow-y:hidden;}&[contenteditable][placeholder]:empty::after{display:block;content:attr(placeholder);position:relative;color:",";background-color:transparent;cursor:text;user-select:none;font-size:16px;line-height:22px;height:22px;}@media all and (-ms-high-contrast:none){&[contenteditable][placeholder]:empty::after{position:absolute;top:50%;transform:translateY(-50%);}}:focus{",";}",";",";"],({maxHeight:e})=>"number"==typeof e?e+"px":e||"150px",({focus:e})=>e&&X(),Z,({theme:e})=>V(e),X,e=>e.disabled&&$(e),e=>e.error&&ee(e)),ne=Object(r.forwardRef)((e,t)=>{const n="function"!=typeof t&&t||Object(r.useRef)(null),{onInput:a,placeholder:i,onChange:o,value:c,maxHeight:d,disabled:l,shouldAutofocus:u,onPaste:p}=e,h=Object(w.a)(e,["onInput","placeholder","onChange","value","maxHeight","disabled","shouldAutofocus","onPaste"]),b=(e,...t)=>{e.persist();if(n.current&&n.current.innerHTML&&K(n.current.innerHTML)){n.current.innerHTML="";e.target.innerText=""}e.target.value=e.target.innerText;Object(q.a)(o,e,...t);Object(q.a)(a,e,...t)},m=e=>{e.preventDefault();Object(q.a)(p,e);if(!e.clipboardData.files||!e.clipboardData.files[0]){let t;try{t=e.clipboardData.getData("text/plain")}catch(n){t=J(e.clipboardData.getData("text"))}document.queryCommandSupported("insertText")?document.execCommand("insertText",!1,t):document.execCommand("paste",!1,t)}};Object(r.useLayoutEffect)(()=>{null!=c&&n.current&&c!==n.current.innerText&&(n.current.innerText=c||"")},[n,c]);Object(r.useEffect)(()=>{u&&n&&n.current&&n.current.focus()},[]);const g=G()?{onKeyUp:b}:{onInput:b};return Object(s.jsx)(te,Object.assign({},h,{ref:n,placeholder:i},g,{onPaste:m,contentEditable:!l,maxHeight:d,disabled:l,"aria-disabled":l,"data-testid":"VizExExpandingInput"}))});ne.displayName="VizExExpandingInput";ne.propTypes={disabled:b.a.bool,error:b.a.bool,maxHeight:b.a.number,onChange:b.a.func,onInput:b.a.func,onPaste:b.a.func,placeholder:b.a.string,shouldAutofocus:b.a.bool,theme:E.a,use:b.a.oneOf([Q,W]),value:b.a.string};const se=()=>!!/iPad|iPhone|iPod|Android|Mobi/.test(navigator.userAgent),re=A(ne),ae=Object(r.forwardRef)(({disableInitialInputFocus:e,disabled:t,error:n,messageText:r,onChange:a,onInputBlur:i,onInputFocus:o,onKeyDown:c,validationMessage:d,showQuickReplyPlaceholder:l,onPaste:p},h)=>Object(s.jsx)(T,{children:b=>Object(s.jsx)(F,{"aria-label":u.a.text(l?"conversations-visitor-ui.chatTextArea.forceQuickReplyPlaceholder":"conversations-visitor-ui.chatTextArea.placeholder",{locale:b}),validationMessage:d,error:n,required:!0,children:d=>Object(s.jsx)(re,Object.assign({},d,{use:"unstyled",error:n,className:"widget-textarea message-box","data-test-id":"widget-textarea",tabIndex:"0",ref:h,maxHeight:100,placeholder:u.a.text(l?"conversations-visitor-ui.chatTextArea.forceQuickReplyPlaceholder":"conversations-visitor-ui.chatTextArea.placeholder",{locale:b}),disabled:t,onChange:a,onKeyDown:c,value:r,onFocus:o,onBlur:i,onPaste:p,shouldAutofocus:!(e||se())}))})}));ae.propTypes={disableInitialInputFocus:b.a.bool.isRequired,disabled:b.a.bool.isRequired,error:b.a.bool.isRequired,messageText:b.a.string.isRequired,onChange:b.a.func.isRequired,onInputBlur:b.a.func,onInputFocus:b.a.func,onKeyDown:b.a.func.isRequired,onPaste:b.a.func,showQuickReplyPlaceholder:b.a.bool.isRequired,validationMessage:b.a.string.isRequired};ae.displayName="TextInput";var ie=ae,oe=n("sl/w"),ce=n("r1tY"),de=n.n(ce),le=n("/mXs");const ue=["left","right"],pe=["top","bottom"],he=ue.concat(pe).concat(["left top","left bottom","right top","right bottom","top left","top right","bottom left","bottom right","top center","bottom center","left middle","right middle"]);function be(e){return e.split(" ")[0]}function me(e){return ue.includes(e)}function ge(e){const t=e.split(" ")[1];return t||(me(be(e))?"middle":"center")}const je=16,fe=8,Oe=({placement:e})=>{switch(be(e)){case"top":return Object(m.css)(["transform:rotate(45deg);top:-","px;"],je+5);case"right":return Object(m.css)(["transform:rotate(135deg);right:-","px;"],je+5);case"bottom":return Object(m.css)(["transform:rotate(-135deg);bottom:-","px;"],je+5);case"left":return Object(m.css)(["transform:rotate(-45deg);left:-","px;"],je+5);default:return""}},xe=({placement:e})=>{switch(ge(e)){case"top":return Object(m.css)(["top:","px;"],fe);case"middle":return Object(m.css)(["top:calc(50% - ","px);"],je/2);case"bottom":return Object(m.css)(["bottom:","px;"],fe);case"left":return Object(m.css)(["left:","px;"],fe);case"center":return Object(m.css)(["left:calc(50% - ","px);"],je/2);case"right":return Object(m.css)(["right:","px;"],fe);default:return""}},ye=({placement:e})=>Object(m.css)(["",";",";"],Oe({placement:e}),xe({placement:e}));var ve=n("iKGd");const Ce="#425b76",Ie=()=>Ce,Te=()=>ve.o;var we=g.a.div.withConfig({displayName:"VizExTooltipArrow",componentId:"sc-1p8jlv1-0"})(["position:absolute;pointer-events:none;border:none;clip-path:polygon(100% 100%,0 100%,100% 0);border-top-left-radius:100%;border-radius:3px;border-top-color:transparent !important;border-left-color:transparent !important;border-bottom-right-radius:3px;width:16px;height:16px;background-color:",";",""],({theme:e})=>Ie(e),ye);const Se=16,ke=({placement:e})=>{switch(ge(e)){case"top":return Object(m.css)(["top:0;"]);case"bottom":return Object(m.css)(["bottom:0;"]);case"left":return Object(m.css)(["left:0;"]);case"right":return Object(m.css)(["right:0;"]);default:return""}},Re=({placement:e})=>{switch(be(e)){case"top":return Object(m.css)(["transform:translateY(-100%);top:-","px;"],Se-5);case"right":return Object(m.css)(["transform:translateX(100%);right:-","px;"],Se-5);case"bottom":return Object(m.css)(["transform:translateY(100%);bottom:-","px;"],Se-5);case"left":return Object(m.css)(["transform:translateX(-100%);left:-","px;"],Se-5);default:return""}},Ae=({placement:e})=>{switch(e){case"top center":case"top middle":return Object(m.css)(["transform:translate(-50%,-100%);left:50%;"]);case"bottom middle":case"bottom center":return Object(m.css)(["transform:translate(-50%,100%);left:50%;"]);case"left center":case"left middle":return Object(m.css)(["transform:translate(-100%,-50%);top:50%;"]);case"right center":case"right middle":return Object(m.css)(["transform:translate(100%,-50%);top:50%;"]);default:return""}},Ee=({placement:e})=>Object(m.css)(["",";",";",""],Re({placement:e}),ke({placement:e}),Ae({placement:e}));var Pe=g.a.div.withConfig({displayName:"VizExTooltipBody",componentId:"vtnqvp-0"})(["border-radius:3px;font-size:13px;width:max-content;max-width:232px;display:block;position:absolute;visibility:visible;box-shadow:0 3px 8px rgba(0,0,0,0.1);line-height:1.5;padding:10px 16px;text-decoration:none;word-wrap:break-word;",";background-color:",";color:",";pointer-events:",";"],Ee,({theme:e})=>Ie(e),({theme:e})=>Te(e),({open:e})=>e?"all":"none"),Me=n("0ePj");function Ne(e){let[t,n]=Object(Me.a)(e.isOpen,e.defaultOpen||!1,e.onOpenChange);return{isOpen:t,setOpen:n,open(){n(!0)},close(){n(!1)},toggle(){n(!t)}}}const _e=1500,Fe=500;let qe={},Le=0,De=!1,Be=null,Ue=null;function ze(e={}){let{delay:t=_e}=e,{isOpen:n,open:s,close:a}=Ne(e),i=Object(r.useMemo)(()=>""+ ++Le,[]),o=Object(r.useRef)(),c=()=>{qe[i]=u},d=()=>{for(let e in qe)if(e!==i){qe[e](!0);delete qe[e]}},l=()=>{clearTimeout(o.current);o.current=null;d();c();De=!0;s();if(Be){clearTimeout(Be);Be=null}if(Ue){clearTimeout(Ue);Ue=null}},u=e=>{if(e){clearTimeout(o.current);o.current=null;a()}else o.current||(o.current=setTimeout(()=>{o.current=null;a()},Fe));if(Be){clearTimeout(Be);Be=null}if(De){Ue&&clearTimeout(Ue);Ue=setTimeout(()=>{delete qe[i];Ue=null;De=!1},Fe)}},p=()=>{d();c();n||Be||De?n||l():Be=setTimeout(()=>{Be=null;De=!0;l()},t)};Object(r.useEffect)(()=>()=>{clearTimeout(o.current);qe[i]&&delete qe[i]},[i]);return{isOpen:n,open:e=>{!e&&t>0&&!o.current?p():l()},close:u}}var He=n("dByS"),Ve=n("xr6y"),Qe=n("Zulv");const We=g.a.div.withConfig({displayName:"VizExTooltip__Popover",componentId:"sc-26bbp1-0"})(["transition-property:",";transition-duration:","ms;opacity:",";transform:",";position:absolute;pointer-events:none;width:100%;height:100%;"],({transitioning:e})=>e?"opacity ease-out, transform ease-out":"none",({duration:e})=>e,({open:e})=>e?"1":"0",({open:e,transitioning:t})=>e&&!t?"none":e?"scale(1)":"scale(.75)"),Je=g.a.div.withConfig({displayName:"VizExTooltip__PopoverWrapper",componentId:"sc-26bbp1-1"})(["display:inline-block;position:relative;"]),Ye=e=>{const{content:t,backgroundColor:n,textColor:a,placement:i,children:o,theme:c,onOpenChange:d,open:l,delay:u=0}=e,p=Object(w.a)(e,["content","backgroundColor","textColor","placement","children","theme","onOpenChange","open","delay"]),h="boolean"==typeof l,b=Object.assign({delay:u},h&&{isOpen:l}),m=Object(r.useRef)(),g=ze(b),{triggerProps:j,tooltipProps:f}=Object(He.a)(b,g,m),{keyboardProps:O}=Object(Ve.h)({onKeyUp:j.onKeyUp,onKeyDown:j.onKeyDown});if(!t)return o;const x=()=>{if(!h){Object(q.a)(d,!0);g.open(!0)}},y=()=>{if(!h){Object(q.a)(d,!1);g.close(!0)}};return Object(s.jsxs)(Je,Object.assign({},p,{onMouseEnter:x,onMouseLeave:y,children:[Object(s.jsxs)(We,{open:g.isOpen,duration:250,transitioning:!0,children:[Object(s.jsx)(Pe,Object.assign({textColor:a,backgroundColor:n,placement:i,open:g.isOpen,theme:c,"data-test-open":g.isOpen},f,{"aria-hidden":!0,children:t})),Object(s.jsx)(we,{backgroundColor:n,placement:i,theme:c})]}),Object(r.cloneElement)(r.Children.only(o),Object.assign({},Object(Qe.i)(j,O),{onClick:o.props.onClick,ref:m}))]}))};Ye.propTypes={backgroundColor:b.a.string,children:b.a.node,content:b.a.node,delay:b.a.number,onOpenChange:b.a.func,open:b.a.bool,placement:b.a.oneOf(he),textColor:b.a.string,theme:E.a};Ye.displayName="VizExTooltip";Ye.defaultProps={placement:"top right"};var Ge=Ye,Ke=n("P7jJ"),Xe=n("tOFb");const Ze=g.a.input.withConfig({displayName:"AttachmentPickerButton__HiddenInput",componentId:"sc-1q5rf25-0"})(["display:none;"]);class $e extends r.PureComponent{constructor(e){super(e);this.inputRefCallback=e=>{this.inputRef=e};this.findInputNode=()=>{if(!this.inputRef)return null;return de.a.findDOMNode(this.inputRef)};this.clearInputNode=()=>{const e=this.findInputNode();e&&(e.value="")};this.handlePickerClick=e=>{const t=this.findInputNode();t&&t.click();this.props.onClick(e)};this.onInputChange=({target:{files:e}})=>{this.props.onSelectFiles({files:e});this.clearInputNode()};this.renderMaxFileSizeTooltip=()=>{if(!this.props.mobile)return Object(s.jsx)(oe.a,{message:"conversations-visitor-ui.fileSizeLimit",options:{size:u.a.formatSize(this.props.maxAttachmentFileSize)}})};this.inputRef=null}render(){const{disabled:e}=this.props;return Object(s.jsxs)(r.Fragment,{children:[Object(s.jsx)(Ge,{content:this.renderMaxFileSizeTooltip(),placement:"top right",children:Object(s.jsx)(le.a,{disabled:e,onClick:this.handlePickerClick,use:"transparent-on-background","aria-label":u.a.text("conversations-visitor-ui.visitorExperienceAriaLabels.attachment"),shape:"circle","data-testid":"AttachmentPickerButton-VizExIconButton",children:Object(s.jsx)(Ke.a,{icon:Object(s.jsx)(Xe.a,{})})})}),Object(s.jsx)(Ze,{accept:this.props.accept.join(","),"data-selenium-test":"visitor-attachment-file-input","data-testid":"AttachmentPickerButton-input",disabled:this.props.disabled,ref:this.inputRefCallback,type:"file",multiple:this.props.allowMultiple,onChange:this.onInputChange})]})}}$e.displayName="AttachmentPickerButton";$e.propTypes={accept:b.a.arrayOf(b.a.string).isRequired,allowMultiple:b.a.bool.isRequired,disabled:b.a.bool,maxAttachmentFileSize:b.a.number.isRequired,mobile:b.a.bool,onClick:b.a.func,onSelectFiles:b.a.func.isRequired};$e.defaultProps={accept:[],allowMultiple:!1,onClick:()=>{}};var et=$e,tt=n("Fjoq"),nt=n("qKTc"),st=n("Xs/R");const rt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},at=`(?:${Object.keys(rt).join("|")})`,it=RegExp(at),ot=RegExp(at,"g");function ct(e){e=null==e?"":""+e;return it.test(e)?e.replace(ot,e=>rt[e]):e}const dt=13,lt=g.a.div.withConfig({displayName:"MessageEditor__FileUploadWrapper",componentId:"sc-142mntr-0"})(["display:flex;overflow:auto;& > *:not(:last-child){margin-right:8px;}"]);let ut=!1;const pt=Object(r.forwardRef)(({canUploadAttachments:e,chatInputChanged:t,coloring:n,disablePublish:a,disabled:d,fileTypes:p,inputStaging:h,maxAttachmentFileSize:b,mobile:m,networkOffline:g,onAttachmentButtonClick:j,onRemoveAttachment:O,onSelectAttachmentFiles:x,publishMessage:y,shouldDisableInitialInputFocus:I,shouldHideAttachmentButton:T,shouldSendInputStagingEvent:w,showQuickReplyPlaceholder:S,showingHsBranding:k,stagedAttachments:R,stagedMessageEditorText:A,supportsAttachments:E,toggleOnAndOffInputFocus:P},M)=>{const[N,_]=Object(r.useState)(A||""),F=Object(r.useRef)(),q=M||F,L=()=>{q&&q.current&&q.current.focus()};Object(r.useEffect)(()=>{!d&&!I&&q&&q.current&&q.current.focus()},[q,d,I]);const D=()=>N,B=()=>D().length<l.a,U=()=>R&&R.size,z=()=>!R||R.every(c.isUploadCompleted),H=()=>{const e=Boolean(D())&&""!==D().trim();return B()&&z()&&(e||U())},V=()=>H()&&!g&&!d&&!a,Q=e=>{const n=e.target.value;_(n);w&&!n&&h(n,!0);t(n);if((d||a)&&!ut){f.a.captureMessage("VISITOR_CAN_TYPE_WHILE_PUBLISH_DISABLED");ut=!0}},W=()=>{if(V()){const e=D(),t=`<div>${i.a.link(ct(e),{stripPrefix:!1})}</div>`.replace(/\n/g,"<br>");y({text:e,richText:t});_("");h("",!0);L()}},J=e=>{if(e.keyCode===dt&&!1===e.shiftKey){W();e.preventDefault();e.stopPropagation();return!1}return!0},Y=()=>B()?"":u.a.text("conversations-visitor-ui.chatTextArea.validationMessage"),G=({files:e})=>{x({files:e});L()},K=()=>{d||P(!0)},X=()=>{P(!1)},Z=t=>{t&&t.clipboardData&&t.clipboardData.files&&e&&x({files:t.clipboardData.files})},$=Object(s.jsx)(ie,{disableInitialInputFocus:I,disabled:d||g||a,error:!B(),messageText:N,onChange:Q,onKeyDown:J,showQuickReplyPlaceholder:S,ref:q,showingHsBranding:k,validationMessage:Y(),onInputFocus:K,onInputBlur:X,onPaste:Z}),ee=U()?Object(s.jsx)(lt,{className:"m-bottom-2"+(k?" m-top-2":""),children:R.map(e=>Object(s.jsx)("div",{"data-testid":"MessageEditor-FileUploadItem",children:Object(s.jsx)(C.a,{attachment:e,onRemove:()=>{O({attachment:e})}})},Object(o.getLocalId)(e)))}):null,te=Object(tt.c)(n)?null:Object(tt.a)(n),ne=!V();return Object(s.jsx)(v,{inputToRender:$,FileUploads:ee,showingHsBranding:k,children:Object(s.jsxs)(r.Fragment,{children:[E&&!T?Object(s.jsx)("div",{className:m?"m-right-3":"",children:Object(s.jsx)(et,{accept:p,color:te,disabled:!e||d,mobile:m,onClick:j,onSelectFiles:G,maxAttachmentFileSize:b})}):null,Object(s.jsx)(le.a,{className:"chat-send-button","data-test-id":"chat-send-button","data-testid":"MessageEditor-VizExIconButton",disabled:ne,shape:"circle",onClick:W,use:"transparent-on-background","aria-label":u.a.text("conversations-visitor-ui.visitorExperienceAriaLabels.send"),children:Object(s.jsx)(Ke.a,{icon:Object(s.jsx)(st.a,{})})})]})})});pt.propTypes={canUploadAttachments:b.a.bool.isRequired,chatInputChanged:b.a.func.isRequired,coloring:Object(d.a)("ColoringRecord"),disablePublish:b.a.bool.isRequired,disabled:b.a.bool.isRequired,fileTypes:b.a.arrayOf(b.a.string).isRequired,inputStaging:b.a.func.isRequired,maxAttachmentFileSize:b.a.number.isRequired,mobile:b.a.bool,networkOffline:b.a.bool.isRequired,onAttachmentButtonClick:b.a.func,onRemoveAttachment:b.a.func.isRequired,onSelectAttachmentFiles:b.a.func.isRequired,publishMessage:b.a.func.isRequired,shouldDisableInitialInputFocus:b.a.bool,shouldHideAttachmentButton:b.a.bool,shouldSendInputStagingEvent:b.a.bool.isRequired,showQuickReplyPlaceholder:b.a.bool.isRequired,showingHsBranding:b.a.bool,stagedAttachments:b.a.instanceOf(p.List),stagedMessageEditorText:b.a.string,supportsAttachments:b.a.bool.isRequired,toggleOnAndOffInputFocus:b.a.func};pt.displayName="MessageEditor";pt.defaultProps={isThreadStarted:!0,disablePublish:!1,onRemoveAttachment:()=>{},onSelectAttachmentFiles:()=>{},createNewThread:()=>{},supportsAttachments:!1,fileTypes:nt.a,stagedAttachments:[],toggleOnAndOffInputFocus:()=>{}};t.a=pt},"2+Io":function(e,t,n){var s=n("pDio")(n("8i16"),"Map");e.exports=s},"31tl":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));const s="WEB"},"3FHW":function(e,t,n){var s=n("8X3F"),r=n("kmmH"),a="[object AsyncFunction]",i="[object Function]",o="[object GeneratorFunction]",c="[object Proxy]";function d(e){if(!r(e))return!1;var t=s(e);return t==i||t==o||t==a||t==c}e.exports=d},"3OTY":function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));n.d(t,"c",(function(){return u}));n.d(t,"b",(function(){return p}));n.d(t,"d",(function(){return h}));var s=n("Ut5p"),r=n("KrP/"),a=n("tlSg"),i=n("k3iI"),o=n("E6wg"),c=n("NpZo"),d=n("081M");const l=Object(s.b)(r.a),u=Object(s.b)(r.c),p=Object(s.b)(r.b,e=>({error:e}));function h(e=!1){return e?(e,t)=>{const n=Object(o.getSessionId)(t()),s=Object(c.getSelectedThreadId)(t()),r=Object(d.getHubspotUtk)();e(l());const h=({sessionId:t}={})=>{e(Object(i.updateSessionId)(t));e(u())},b=t=>{e(p(t))};Object(a.sendConsentToCommunicate)({sessionId:n,hubspotUtk:r,threadId:s}).then(h,b).catch(e=>{setTimeout(()=>{throw e})})}:null}},"3oj9":function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var s=n("KXN9"),r=n("MBJP"),a=n("ZSXR"),i=n("eEyY"),o=n("Ryja"),c=n("Xcjc");const d=Object(r.a)([i.getCurrentThreadId,a.a,o.getStagedThreadHistory],(e,t,n)=>e===c.a?n:Object(s.a)(t)||null)},"4cgu":function(e,t,n){"use strict";var s=n("xA3K"),r=n("QgEn"),a=n("VfuR"),i=n.n(a),o=n("9f1P"),c=n.n(o),d=n("uax2"),l=n("0wen"),u=n("54vt");const p="primary",h="secondary",b={PRIMARY:p,SECONDARY:h},m={[p]:l.PRIMARY,[h]:l.SECONDARY},g=e=>m[e],j={[p]:u.SECONDARY,[h]:u.PRIMARY},f=e=>j[e];var O=b,x=n("CR0J");const y=c()(d.a).withConfig({displayName:"VizExLoadingButton__Spinner",componentId:"sc-137sufa-0"})(["height:0;position:absolute;top:50%;right:0;transition:opacity 0.2s;opacity:",";"],({show:e})=>e?1:0),v=c.a.div.withConfig({displayName:"VizExLoadingButton__ReadyWrapper",componentId:"sc-137sufa-1"})(["transition:opacity 0.2s;opacity:",";"],({show:e})=>e?1:0),C=(O.PRIMARY,e=>{const{children:t,Button:n,result:a,use:i,theme:o,currentState:c,onClick:d}=e,l=Object(s.a)(e,["children","Button","result","use","theme","currentState","onClick"]),u="ready"===c,p="submitting"===c,h="done"===c;return Object(r.jsxs)(n,Object.assign({theme:o,onClick:p||h?()=>{}:d,use:g(i),style:{position:"relative"}},l,{children:[Object(r.jsx)(v,{"data-testid":"VizExLoadingButton-Ready",show:u,children:t}),Object(r.jsx)(y,{size:"xs",grow:!0,use:f(i),theme:o,showResult:h,show:p||h,"data-testid":"VizExLoadingButton-Spinner",children:a})]}))});C.propTypes={Button:i.a.elementType.isRequired,children:i.a.node.isRequired,currentState:i.a.oneOf(["ready","submitting","done"]),onClick:i.a.func,result:i.a.node,theme:x.a,use:i.a.oneOf(Object.values(O))};C.defaultProps={"data-test-id":"loading-button",use:O.PRIMARY,onClick:()=>{}};C.displayName="VizExLoadingButton";t.a=C},"4hT6":function(e,t,n){"use strict";n.r(t);n.d(t,"getFileSize",(function(){return a}));var s=n("JGJA"),r=n("ughT");const a=e=>{const t=Object(r.getFile)(e);return t&&Object(s.a)("size",t)||0}},"4nf7":function(e,t,n){"use strict";var s=n("021p"),r=n("bOW6"),a=n("BnUr"),i=n("QYOI"),o=n("MBJP"),c=n("qjq5"),d=n("3Yas");d.a.implement(Array,(e,t)=>i.Iterable.isIterable(e)?t.concat(e.toJS()):t.concat(e));d.a.implementInherited(i.Seq.Indexed,(e,t)=>t.concat(e));d.a.implementInherited(i.Collection.Indexed,(e,t)=>t.concat(e));d.a.implement(String,(e,t)=>t.concat(e));var l=d.a,u=Object(c.a)(l),p=n("SGjM"),h=n("DdHT"),b=n("6aYC"),m=n("k09d"),g=n("Z6IV"),j=n("3oj9"),f=n("5oUx");n.d(t,"a",(function(){return x}));let O;const x=Object(o.a)([m.a,j.a,b.a,f.a],(e,t,n,o)=>{const c=Object(a.getChannelName)(e),d=Object(a.getThreadId)(e),l=Object(s.b)(t)||Object(i.List)(),b=Object(h.a)(u(l),u(n),Object(p.a)(Object(r.wrapFailedMessage)({threadId:d,channel:c})),u(o))(Object(i.List)()),m=b.size?b.filter(g.isSupportedMessageType):Object(i.List)();Object(i.is)(O,m)||(O=m);return O})},"5N3d":function(e,t,n){"use strict";n.r(t);n.d(t,"validateAttachmentFile",(function(){return i}));var s=n("Zn4N"),r=n("eg+O"),a=n("z4Bj");const i=e=>{const t=Object(a.a)();Object(r.fileExceedsSizeLimit)(e)?t.reject(s.b):t.resolve();return t.promise}},"5SRO":function(e,t,n){"use strict";var s=n("QgEn"),r=n("mKxs"),a=n("VfuR"),i=n.n(a),o=n("9f1P"),c=n.n(o);const d=32,l=e=>"number"==typeof e?e+"px":e;var u=n("xA3K");const p="1.5s",h="linear",b="infinite",m=Object(o.keyframes)(["100%{transform:translateX(100%);}"]),g=Object(o.css)(["animation:"," "," "," ",";"],m,p,h,b);var j=n("+KD7");const f="default",O="blank",x="on-shade",y="on-dark",v={[f]:{primary:j.j,secondary:j.l},[x]:{primary:j.l,secondary:j.j},[y]:{primary:j.k,secondary:j.u}},C=`\n  background: ${j.s};\n`,I=({primary:e,secondary:t})=>`\n  background: ${e};\n  background: linear-gradient(to right, ${e}, ${t} 20%, ${e} 40%);\n`,T=e=>v[e],w=({use:e})=>e===O?C:I(T(e)),S=f,k=c.a.div.withConfig({displayName:"SkeletonBase__SkeletonBaseInner",componentId:"sc-6tw9zj-0"})(["position:relative;margin:",";padding:",";",";width:100%;overflow:hidden;z-index:1;&::after{content:' ';display:block;position:absolute;top:0;left:0;right:0;height:100%;transform:translateX(-100%);",";","}"],({margin:e})=>l(e),({padding:e})=>l(e),({use:e=S})=>e===O?C:"background: "+v[e].primary,({use:e=S})=>e!==O&&g,({use:e=S})=>e!==O&&w({use:e})),R=e=>{let{children:t}=e,n=Object(u.a)(e,["children"]);return Object(s.jsx)(k,Object.assign({"data-loading":"true"},n,{children:t}))};R.displayName="SkeletonBase";R.propTypes={children:i.a.node,className:i.a.string,margin:i.a.oneOfType([i.a.number,i.a.string]),padding:i.a.oneOfType([i.a.number,i.a.string]),use:i.a.oneOf([f,x,y,O])};var A=R;const E=d,P=c()(A).withConfig({displayName:"SkeletonCircle",componentId:"sc-1t0bgu3-0"})(["border-radius:50%;width:",";height:",";min-width:",";&::before{border-radius:50%;}"],({size:e=E})=>l(e),({size:e=E})=>l(e),({size:e=E})=>l(e));P.displayName="SkeletonCircle";P.propTypes={size:i.a.number};var M=P,N=n("Ktcs"),_=n("GdKg"),F=n("0IK8"),q=n("lw+E"),L=n("Ec2D"),D=n.n(L),B=n("Mx3c"),U=n("npjq");const z=()=>{};class H extends N.PureComponent{constructor(e){super(e);this.handleClick=this.handleClick.bind(this)}handleClick(){const{onClick:e,sender:t}=this.props;e(t)}render(){const{isLoading:e,sender:t,size:n}=this.props;if(e)return Object(s.jsx)(M,{size:32});if(!t)return Object(s.jsx)(_.a,{size:n});const r=Object(F.getSenderTypeForCMF)(t),a=U.a.text("conversations-visitor-message-history.agent"),i=U.a.text("conversations-visitor-message-history.avatar",{identifier:Object(q.c)(t)||a});switch(r){case B.BOT:case B.SYSTEM:return Object(s.jsx)(_.a,{size:n,src:Object(q.a)(t)||D.a,alt:i});default:return Object(s.jsx)("span",{onClick:this.handleClick,children:Object(s.jsx)(_.a,{size:n,src:Object(q.a)(t),alt:i})})}}}H.displayName="SenderAvatar";H.propTypes={isLoading:i.a.bool,onClick:i.a.func.isRequired,sender:Object(r.a)("Sender"),size:_.a.propTypes.size};H.defaultProps={onClick:z,size:"sm"};var V=n("yCEM"),Q=n("Ydwr");const W="#cbd6e2",J="#00a4bd",Y=window.navigator?navigator.userAgent.toLowerCase():"",G=()=>Y.includes("trident/");var K=n("JGJA");const X=Object(K.a)("alignItems"),Z=Object(K.a)("avatarWidth"),$=Object(K.a)("backgroundColor"),ee=Object(K.a)("borderColor"),te=Object(K.a)("borderRadius"),ne=Object(K.a)("borderWidth"),se=(Object(K.a)("messageSpacing"),Object(K.a)("textColor")),re=Object(K.a)("fileAttachmentTheme"),ae=(Object(K.a)("quickReplyTheme"),Object(K.a)("widgetAccent"));var ie=n("iDVC");const oe=Object(N.createContext)(Object(ie.a)()),ce=()=>Object(N.useContext)(oe);var de=oe;const le=Object(o.keyframes)(["25%{background-color:",";}75%{background-color:",";}"],W,W);let ue=Object(o.keyframes)(["0%,100%{transform:translateY(0);}25%{transform:translateY(.25em);}50%{transform:translateY(0);}75%{transform:translateY(-.25em);}"]);G()&&(ue=Object(o.keyframes)(["0%,100%{top:0;}25%{top:.25em;}50%{top:0}75%{top:-.25em;}"]));const pe=c.a.div.withConfig({displayName:"TypingDots__Dot",componentId:"sc-1x2dwmy-0"})(["position:relative;background-color:currentColor;color:",";border-radius:50%;height:1em;width:1em;animation:",",",";animation-duration:1s;animation-timing-function:linear;animation-iteration-count:infinite;&:not(:last-child){margin-right:0.75em;}&:nth-child(2){animation-delay:-0.66s;}&:nth-child(3){animation-delay:-0.33s;}"],e=>e.color?e.color:J,ue,le),he=c.a.div.withConfig({displayName:"TypingDots__TypingDotsWrapper",componentId:"sc-1x2dwmy-1"})(["display:flex;align-items:center;justify-content:center;height:24px;font-size:8px;width:4.5em;"]);class be extends N.Component{render(){const e=ae(this.context);return Object(s.jsxs)(he,{children:[Object(s.jsx)(pe,{color:e,className:"dot-1"}),Object(s.jsx)(pe,{color:e,className:"dot-2"}),Object(s.jsx)(pe,{color:e,className:"dot-3"})]})}}be.contextType=de;be.displayName="TypingDots";var me=be,ge=i.a.oneOf([V.b,V.a,V.c]),je=n("CnAB"),fe=n("Gc2C");const Oe=e=>{Object(fe.a)(void 0===e||"object"==typeof e,"Invalid config type given");e&&Object.values(e).forEach(e=>{Object(fe.a)(e instanceof ie.a,"All themes in the configuration must be a `Theme` record. Found %s",typeof e)})},xe=Object(N.memo)(({themeConfig:e,use:t,children:n})=>{Oe(e);e=Object.assign({},je.b,e);const r=t?e[t]:e[V.b]||Object(ie.a)();return Object(s.jsx)(de.Provider,{value:r,children:n})});xe.displayName="ThemeProvider";xe.propTypes={children:i.a.node.isRequired,themeConfig:i.a.objectOf(Object(r.a)("Theme")),use:ge};var ye=xe;const ve=c.a.div.withConfig({displayName:"PrimaryMessageAvatar__PrimaryMessageAvatarWrapper",componentId:"butkas-0"})(["align-items:center;display:flex;flex-shrink:0;justify-items:center;margin-top:35px;"]);class Ce extends N.PureComponent{render(){const{children:e,className:t}=this.props;return Object(s.jsx)(ve,{className:t,children:e})}}Ce.displayName="PrimaryMessageAvatar";Ce.propTypes={children:i.a.node.isRequired,className:i.a.string};const Ie=c.a.div.withConfig({displayName:"PrimaryMessageContentSection__PaddedArea",componentId:"sc-5vsp48-0"})(["padding:8px 16px;"]),Te=c.a.div.withConfig({displayName:"PrimaryMessageContentSection__PrimaryMessageContentSectionWrapper",componentId:"sc-5vsp48-1"})(["overflow:hidden;width:100%;button{width:auto;}"]);class we extends N.PureComponent{renderContent(){const{children:e}=this.props;return Object(s.jsx)(Ie,{children:e})}render(){const{children:e,className:t}=this.props;return N.Children.count(e)>0?Object(s.jsx)(Te,{className:t,children:Object(s.jsx)("div",{className:"width-100 padding-x-4 padding-y-2",children:this.renderContent()})}):null}}we.contextType=de;we.displayName="PrimaryMessageContentSection";we.propTypes={children:i.a.node,className:i.a.string};var Se=n("8Ma8");const ke=c.a.div.withConfig({displayName:"PrimaryMessageContent__PrimaryMessageContentWrapper",componentId:"sc-16xwpdc-0"})(["position:relative;min-height:32px;word-break:break-word;box-sizing:border-box;border-style:solid;border-width:",";border-color:",";background-color:",";color:",";display:inline-flex;align-items:center;flex-direction:column;border-radius:",";","{border-top-style:solid;border-top-width:1px;border-top-color:",";&:first-child{border-top:none;}}max-width:284px;"],({borderWidth:e})=>e,({borderColor:e})=>e,({backgroundColor:e})=>e,({textColor:e})=>e,({borderRadius:e})=>e,Te,({borderColor:e})=>e),Re=e=>{const{children:t,className:n,shouldFocusMessage:r}=e,a=ce(),i=Object(N.useRef)(null),{disableAutoFocus:o}=Object(Se.c)();Object(N.useEffect)(()=>{!o&&r&&i.current&&i.current.focus()},[o,r]);return Object(s.jsx)(ke,{className:n,backgroundColor:$(a),borderColor:ee(a),borderRadius:te(a),borderWidth:ne(a),tabIndex:0,ref:i,textColor:se(a),children:t})};Re.displayName="PrimaryMessageContent";Re.propTypes={children:i.a.node,className:i.a.string,shouldFocusMessage:i.a.bool};var Ae=Re;const Ee=c.a.div.withConfig({displayName:"PrimaryMessageFooter__PrimaryMessageFooterWrapper",componentId:"sc-161keet-0"})(["display:flex;margin-top:4px;max-width:284px;"]);class Pe extends N.PureComponent{render(){const{children:e,className:t}=this.props;return Object(s.jsx)(Ee,{className:t,children:e})}}Pe.displayName="PrimaryMessageFooter";Pe.propTypes={children:i.a.node.isRequired,className:i.a.string};const Me=c.a.div.withConfig({displayName:"PrimaryMessageHeader__PrimaryMessageHeaderWrapper",componentId:"fhah8-0"})(["display:flex;height:16px;align-items:center;margin-top:4px;margin-bottom:4px;width:100%;"]);class Ne extends N.PureComponent{render(){const{children:e,className:t}=this.props;return Object(s.jsx)(Me,{className:t,children:e})}}Ne.displayName="PrimaryMessageHeader";Ne.propTypes={children:i.a.node.isRequired,className:i.a.string};const _e=c.a.div.withConfig({displayName:"PrimaryMessageHeaderContent__PrimaryMessageHeaderContentWrapper",componentId:"sc-1xh3ltt-0"})(["margin-left:1px;min-width:0;"]);class Fe extends N.PureComponent{render(){const{children:e,className:t}=this.props;return Object(s.jsx)(_e,{className:t,children:e})}}Fe.displayName="PrimaryMessageHeaderContent";Fe.propTypes={children:i.a.node.isRequired,className:i.a.string};const qe="8px",Le=c.a.div.withConfig({displayName:"PrimaryMessage__PrimaryMessageWrapper",componentId:"sc-1kdbxet-0"})(["display:flex;flex-direction:column;align-items:",";padding-left:",";","{","{width:",";margin-left:-",";margin-right:",";}>:first-child{&","{margin-left:",";}}}","{margin-left:",";}","{margin-left:",";}"],({alignment:e})=>e||"flex-start",qe,Me,ve,({avatarWidth:e})=>e,qe,qe,_e,({avatarWidth:e})=>e,ke,({avatarWidth:e})=>e,Ee,({avatarWidth:e})=>e),De=c.a.div.withConfig({displayName:"PrimaryMessage__SpacingWrapper",componentId:"sc-1kdbxet-1"})(["padding-top:4px;padding-bottom:4px;padding-left:10px;padding-right:10px;width:100%;"]);class Be extends N.PureComponent{render(){const{children:e,className:t,use:n}=this.props;return e?Object(s.jsx)(ye,{themeConfig:this.context,use:n,children:Object(s.jsx)(De,{className:t,children:Object(s.jsx)(de.Consumer,{children:t=>Object(s.jsx)(Le,{"data-test-id":this.props["data-test-id"],"data-test-use":n,alignment:X(t),avatarWidth:Z(t),children:e})})})}):null}}Be.contextType=je.a;Be.displayName="PrimaryMessage";Be.propTypes={children:i.a.node,className:i.a.string,"data-test-id":i.a.string,use:ge};const Ue=c.a.div.withConfig({displayName:"SkeletonText__SkeletonTextWrapper",componentId:"sc-148lolo-0"})(["position:relative;width:",";"],({width:e})=>l(e)),ze=c()(A).withConfig({displayName:"SkeletonText__SkeletonTextInner",componentId:"sc-148lolo-1"})(["height:0.75em;left:0;position:absolute;top:50%;transform:translateY(-50%);width:100%;"]),He=e=>{let{width:t="100%"}=e,n=Object(u.a)(e,["width"]);return Object(s.jsxs)(Ue,{width:t,children:[" ",Object(s.jsx)(ze,Object.assign({},n))]})};He.displayName="SkeletonText";He.propTypes={width:i.a.oneOfType([i.a.number,i.a.string])};var Ve=He,Qe=n("fzij"),We=n("dPcB"),Je=n("Rd7q");const Ye=["de","ja"];var Ge=({givenName:e,familyName:t,email:n},s)=>{const r=s&&s.locale||Object(Je.a)();return Ye.indexOf(r)>=0||!e?Object(We.a)({firstName:e,lastName:t,email:n},s):e},Ke=n("0FzD");class Xe extends N.Component{render(){const{email:e,familyName:t,givenName:n,isFriendly:r,name:a,options:i,titleType:o}=this.props,c=r?Ge({givenName:n,familyName:t,email:e},i):Object(We.a)({firstName:n,lastName:t,email:e,name:a,titleType:o},i);return Object(s.jsx)("span",{children:c})}}Xe.displayName="FormattedName";Xe.propTypes={email:i.a.string,familyName:i.a.string,givenName:i.a.string,isFriendly:i.a.bool,name:i.a.string,options:i.a.object,titleType:i.a.oneOf(Object.keys(Ke.a).map(e=>Ke.a[e]))};Xe.defaultProps={isFriendly:!1};var Ze=n("sl/w");const $e=({sender:e})=>{switch(e&&Object(q.h)(e)){case B.BOT:return Object(s.jsx)(Ze.a,{message:"conversations-message-history.responder.bot"});case B.AGENT:return Object(s.jsx)(Ze.a,{message:"conversations-message-history.responder.unknownResponder"});case B.VISITOR:return Object(s.jsx)(Ze.a,{message:"conversations-message-history.responder.unknownVisitor"});case B.SYSTEM:return Object(s.jsx)(Ze.a,{message:"conversations-message-history.responder.automatic"});default:return Object(s.jsx)(Ze.a,{message:"conversations-message-history.responder.unknownSender"})}};$e.displayName="UnknownSenderText";const et=({sender:e,isLoading:t})=>{if(t)return Object(s.jsx)(Ve,{"data-test-id":"skeleton-text",width:100});const n=e&&Object(q.e)(e),r=e&&Object(q.g)(e),a=e&&Object(q.d)(e);return Boolean(n||r||a)?Object(s.jsx)(Xe,{givenName:n||void 0,familyName:r||void 0,email:a||void 0}):Object(s.jsx)($e,{sender:e})};et.displayName="SenderName";et.propTypes={isLoading:i.a.bool,sender:Object(r.a)("Sender")};var tt=et;class nt extends N.PureComponent{render(){const{isSenderLoading:e,sender:t}=this.props;return e?Object(s.jsx)(Ve,{width:150}):Object(s.jsx)(Qe.a,{use:"help",children:Object(s.jsx)("strong",{children:Object(s.jsx)(tt,{sender:t})})})}}nt.displayName="SenderHeaderContent";nt.propTypes={isSenderLoading:i.a.bool,sender:Object(r.a)("Sender")};var st=nt;class rt extends N.PureComponent{render(){const{isSenderLoading:e,sender:t}=this.props;return Object(s.jsx)(st,{sender:t,isSenderLoading:e})}}rt.displayName="TypingHeaderContent";rt.propTypes={isSenderLoading:i.a.bool,sender:Object(r.a)("Sender")};var at=n("FYyX"),it=n("rCfO"),ot=n("Nnwm");const ct=Object(it.a)((e,t,n)=>t?n.get(Object(ot.buildSenderLocator)(t,e)):null);var dt=n("oLsC"),lt=n("o/5C"),ut=n("/OK6");const pt=e=>Object(ut.isFromAgent)(e)?U.a.text("conversations-visitor-message-history.agent"):Object(ut.isFromBot)(e)?U.a.text("conversations-visitor-message-history.bot"):Object(ut.isFromSystem)(e)?U.a.text("conversations-visitor-message-history.system"):"",ht=(e,t)=>{const n=Object(F.getSenderId)(e),s=Object(F.getSenderType)(e),r=ct(n,s,t);return Object(q.b)(r)||Object(dt.a)({senderType:s,firstName:Object(lt.c)(e)||pt(e),email:Object(lt.b)(e)||null})},bt="STARTED",mt=Object(it.a)(e=>!Object(q.b)(e)&&Object(q.i)(e)===bt),gt=e=>{const{message:t,senders:n}=e,r=ht(t,n),a=mt(r),i=Object(q.e)(r),o=Object(ut.isFromVisitor)(t),c=o?V.c:V.a;Object(N.useEffect)(()=>{o||Object(at.a)(U.a.text("conversations-visitor-message-history.subjectIsTyping",{subject:i||U.a.text("conversations-visitor-message-history.agent")}))},[o,i]);return Object(s.jsxs)(Be,{use:c,children:[Object(s.jsxs)(Ne,{children:[Object(s.jsx)(Ce,{children:Object(s.jsx)(H,{sender:r,isLoading:a})}),Object(s.jsx)(Fe,{children:Object(s.jsx)(rt,{message:t,sender:r,isSenderLoading:a})})]}),Object(s.jsx)(Ae,{children:Object(s.jsx)(we,{children:Object(s.jsx)(me,{})})})]})};gt.displayName="TypingIndicatorMessage";gt.propTypes={message:Object(r.a)("TypingIndicatorMessage").isRequired,senders:Q.a.isRequired};var jt=gt,ft=n("t6nY"),Ot=n.n(ft);const xt=c.a.div.withConfig({displayName:"DashedLabel__StyledBorder",componentId:"sc-1rqydm7-0"})(["display:flex;flex-grow:1;border:solid 1px ",";"],j.i);function yt({children:e,transparent:t,"data-test-id":n,labelPadding:r}){return Object(s.jsxs)("div",{className:Ot()("display-flex align-end",r,t&&"justify-center",!r&&"m-y-6"),"data-test-id":n||"dashed-label",tabIndex:0,children:[!t&&Object(s.jsx)(xt,{className:"m-bottom-3"}),Object(s.jsx)("div",{className:"max-100 p-x-4",children:Object(s.jsx)(Qe.a,{use:"help",className:"m-bottom-1 align-center text-center word-break-break-word flex-column",children:e})}),!t&&Object(s.jsx)(xt,{className:"m-bottom-3"})]})}yt.displayName="DashedLabel";yt.propTypes={children:i.a.node.isRequired,"data-test-id":i.a.string,transparent:i.a.bool};var vt=yt,Ct=n("sA91"),It=n("Pz4q"),Tt=n("rIrL"),wt=n("MfaD");const St=document.implementation.createHTMLDocument(""),kt=(e,t)=>"p"===t&&e&&e.classList&&e.classList.contains("MsoNormal")&&e.children&&e.children.length,Rt=e=>e&&!e.children.legnth&&"o:p"===e.tagName.toLowerCase()&&e.innerHTML.includes("&nbsp;"),At=e=>e&&"span"===e.tagName.toLowerCase()&&Rt(e.firstElementChild),Et=e=>!!e.getElementsByTagName("img").length,Pt=({node:e,node_name:t})=>{if(kt(e,t)){const t=e.firstElementChild;if(Rt(t)||At(t)){if(Et(e)){e.removeChild(t);return Pt({node:e,node_name:"p"})}return{node:St.createElement("br")}}const n=St.createElement("div");Object.keys(e.attributes).forEach(t=>{const s=e.attributes[t];n.setAttribute(s.nodeName,s.nodeValue)});n.innerHTML=e.innerHTML.trim().replace(/&nbsp;/g,"");return{node:n}}return null},Mt=["position","top","bottom","left","right","z-index","clear","float","background-image","white-space"],Nt=({node:e})=>{if(e&&e.style&&e.style.length>0&&e.style.removeProperty){Mt.forEach(t=>e.style.removeProperty(t));return{node:e}}return null},_t=({node:e,node_name:t})=>{if(e&&"img"===t&&e.attributes){e.attributes["data-original-height"]&&e.setAttribute("height",e.attributes["data-original-height"].value);e.attributes["data-original-width"]&&e.setAttribute("width",e.attributes["data-original-width"].value);e.attributes["data-full-size-src"]&&e.setAttribute("src",e.attributes["data-full-size-src"].value);return{node:e}}return null},Ft=({node:e,node_name:t})=>{if("div"===t&&e&&e.classList&&e.classList.contains("gmail_default")){const t=St.createElement("span");Object.keys(e.attributes).forEach(n=>{const s=e.attributes[n];t.setAttribute(s.nodeName,s.nodeValue)});t.innerHTML=e.innerHTML.trim();return{node:t}}return null};var qt=n("YibP"),Lt=n("eCQl"),Dt=n("kkqp"),Bt=n.n(Dt);const Ut=e=>new Bt.a(e),zt=["gmail_extra","gmail_quote","hs_reply","x_hs_reply_wrap"],Ht="divRplyFwdMsg",Vt=(e,t)=>t===Ht||e&&e.contains&&zt.some(t=>e.contains(t)),Qt=["hs_signature"],Wt=e=>e&&e.contains&&Qt.some(t=>e.contains(t)),Jt={transformers:[Pt,({node:e})=>{const{classList:t,id:n,attributes:s=[]}=e;if(Vt(t,n)){const e=St.createElement("span");Object.keys(s).forEach(t=>{const n=s[t];e.setAttribute(n.nodeName,n.nodeValue)});e.innerHTML="";e.setAttribute("data-email-reply","");return{node:e}}return null},({node:e})=>{const{classList:t,attributes:n=[]}=e;if(Wt(t)){const e=St.createElement("span");Object.keys(n).forEach(t=>{const s=n[t];e.setAttribute(s.nodeName,s.nodeValue)});e.innerHTML="";e.setAttribute("data-email-signature","");return{node:e}}return null},Nt,Ft,_t],dom:St,elements:["b","blockquote","br","caption","cite","code","col","colgroup","dd","dl","dt","em","figure","h1","h2","h3","h4","h5","h6","i","img","li","ol","p","pre","q","small","strike","strong","sub","sup","table","tbody","td","tfoot","th","thead","tr","u","ul","font","div","span","a"],attributes:{__ALL__:["style","align","valign","width","height"],blockquote:["cite"],col:["span"],colgroup:["span"],figure:["style"],ol:["start","type"],q:["cite"],img:["title","alt","src"],table:["summary","bgcolor"],td:["abbr","axis","colspan","rowspan","bgcolor"],th:["abbr","axis","colspan","rowspan","scope","bgcolor"],ul:["type"],font:["size"],a:["href","title"],span:["data-at-mention","data-owner-id","contenteditable","data-email-reply"]},add_attributes:{a:{target:"_blank"}},remove_contents:["script"],protocols:{a:{href:["http","https"]}}},Yt=e=>{Array.from(e.querySelectorAll("br + [data-email-reply]")).forEach(e=>{const t=e.previousElementSibling;t&&t.nodeName&&"br"===t.nodeName.toLowerCase()&&t.classList&&t.classList.add("display-none")})},{body:Gt}=St,Kt=Object(it.a)((e,t)=>{const n=St.createElement("div");try{Gt.innerHTML=e;const s=Object.assign({},Jt);s.transformers=t;const r=Ut(s).clean_node(Gt).cloneNode(!0);n.appendChild(r);Yt(n)}catch(e){const t=Object(qt.a)("Error sanitizing email message: "+e.message,e);Object(Lt.reportError)({error:t})}return n.innerHTML}),Xt=Object(it.a)(e=>Kt(e,[Pt,Ft,Nt,_t])),Zt=Object(it.a)(e=>{if(!e)return null;const t=document.createElement("div");t.innerHTML=Xt(e);document.body.appendChild(t);const n=t.innerText;document.body.removeChild(t);return n});var $t=n("qkre");const en=[It.a,Tt.a,wt.a],tn=Object(it.a)(e=>{setTimeout(()=>{Object(fe.a)(en.some(t=>e instanceof t),"hasTextContent: Unsupported message record type %s supplied",Object(Ct.a)(e))},0);const t=Object($t.f)(e),n=Object(F.getRichText)(e)||Object(F.getPlainText)(e);return t||Boolean(n&&n.length&&Zt(n))});var nn=n("HtM0"),sn=n("mIAK");const rn=c.a.div.withConfig({displayName:"ContentText__ContentTextWrapper",componentId:"sc-1j5tdlt-0"})(["word-wrap:break-word;box-sizing:border-box;width:100%;a{font-weight:inherit;text-decoration:underline;}img{max-width:100%;height:auto;}"]),an=e=>{const{"aria-label":t,contentText:n,messageId:r,onClickAction:a,shouldAnnounce:i}=e,{announce:o}=Object(sn.b)();Object(N.useEffect)(()=>{i&&o({id:r||t,text:t})},[o,t,r,i]);return Object(s.jsx)(rn,{children:Object(s.jsx)("div",{"aria-label":t,dir:"auto","data-test-id":"primary-message-content",dangerouslySetInnerHTML:{__html:Object(nn.a)(n,{shouldPreserveNewlines:!0,allowedDomainsForIframe:[/^\/?\/?play\.vidyard\.com\/[a-zA-Z0-9]*\.html$/gm]})},onClick:a})})};an.displayName="ContentText";an.propTypes={"aria-label":i.a.string,contentText:i.a.string.isRequired,messageId:i.a.string,onClickAction:i.a.func,shouldAnnounce:i.a.bool};an.defaultProps={onClickAction:()=>{}};var on=an,cn=n("MJM1");const dn=e=>Object(cn.a)(["metadata","officeHoursStartTime"],e),ln=e=>Object(cn.a)(["officeHoursStartTime"],e);var un=n("V1/C");const pn=e=>e["@type"]===un.a?ln(e)&&ln(e)-(new Date).getTime()<0:dn(e)&&dn(e)-(new Date).getTime()<0,hn=({message:e})=>e["@type"]===un.a||tn(e)?pn(e)?null:Object(s.jsx)(vt,{transparent:!0,labelPadding:"m-y-1",children:Object(s.jsx)(on,{messageId:e.id,"aria-label":`${U.a.text("conversations-visitor-message-history.systemMessage")} ${Object(F.getPlainText)(e)}`,contentText:Object(F.getRichText)(e)||Object(F.getPlainText)(e)})}):null;hn.displayName="AvailabilityMessage";hn.propTypes={message:i.a.oneOfType([Object(r.a)("TypicalResponseTimeMessage"),Object(r.a)("OfficeHoursMessage")]).isRequired};var bn=hn,mn=n("vIAU"),gn=n("mNDY"),jn=n("wL7V"),fn=n("oxA8"),On=n("QYOI");const xn=()=>Object(s.jsx)("i",{children:Object(s.jsx)(Ze.a,{message:"conversations-message-history.noContent"})});xn.displayName="NoContentLabel";var yn=xn,vn=n("r1tY");const Cn=["fileId"],In=["fileMetadata"],Tn=["fileUsageType"],wn=["thumbnailMetadata"],Sn=(Object(cn.a)(Cn),Object(cn.a)(In)),kn=(Object(cn.a)(Tn),Object(cn.a)(wn),["expiresAt"]),Rn=["url"],An=["name"],En=["extension"],Pn=["type"],Mn=["fileSize"],Nn=["width"],_n=["height"],Fn=(Object(cn.a)(kn),Object(cn.a)(Rn)),qn=Object(cn.a)(An),Ln=Object(cn.a)(En),Dn=Object(cn.a)(Pn),Bn=Object(cn.a)(Mn),Un=Object(cn.a)(Nn),zn=Object(cn.a)(_n),Hn=e=>{const t=qn(e),n=Ln(e);return n?`${t}.${n}`:t};var Vn=n("g/uM"),Qn=n("PY2H");const Wn=c.a.div.withConfig({displayName:"InlineImageAttachment__InlineImageAttachmentWrapper",componentId:"sc-1svc3iv-0"})(["display:block;max-width:100%;"]);class Jn extends N.PureComponent{constructor(e){super(e);this.hasLoadedImage=()=>{this.setState({hasLoaded:!0})};this.state={hasLoaded:!1}}getDimensions(){const{maxWidth:e,width:t,height:n}=this.props;if(this.state.hasLoaded||!e||!t||!n)return{};if(t<=e)return{width:t,height:n};return{width:e,height:n*(e/t)}}render(){const{name:e,url:t}=this.props,{width:n,height:r}=this.getDimensions();return Object(s.jsx)(Wn,{children:Object(s.jsx)(Qn.a,{href:t,target:"_blank","data-test-id":"inline-image-attachment",children:Object(s.jsx)(Vn.a,{alt:e,src:t,width:n,height:r,style:{minHeight:r},onLoad:this.hasLoadedImage})})})}}Jn.displayName="InlineImageAttachment";Jn.propTypes={height:i.a.number,maxWidth:i.a.number,name:i.a.string.isRequired,url:i.a.string.isRequired,width:i.a.number};var Yn=Jn;const Gn="IMG",Kn=e=>{const t=Sn(e);return{type:Dn(t),extension:Ln(t)}},Xn=e=>e?e.filter(e=>{const{type:t,extension:n}=Kn(e);return Boolean(t===Gn&&"svg"!==n)}):Object(On.List)(),Zn=e=>e.filter(e=>{const{type:t,extension:n}=Kn(e);return Boolean(t!==Gn||"svg"===n)}),$n=e=>e.some(e=>{const{type:t,extension:n}=Kn(e);return Boolean(t===Gn&&"svg"!==n)}),es=300,ts=c.a.div.withConfig({displayName:"InlineImageAttachments__FileAttachmentsWrapper",componentId:"sc-194arc6-0"})(["cursor:pointer;box-sizing:border-box;width:100%;max-width:","px;display:block;margin-bottom:16px;margin-top:8px;"],es);class ns extends N.PureComponent{constructor(e){super(e);this.state={maxWidth:es};this.wrapperRef=Object(N.createRef)()}componentDidMount(){const e=Object(vn.findDOMNode)(this.wrapperRef.current);e&&e.offsetWidth&&e.offsetWidth!==this.state.maxWidth&&this.setState({maxWidth:e.offsetWidth})}render(){const{fileAttachments:e}=this.props;return Object(s.jsx)(ts,{ref:this.wrapperRef,children:Xn(e).map((e,t)=>{const n=Sn(e),r=Hn(n),a=Fn(n),i=Un(n),o=zn(n);return Object(s.jsx)(Yn,{name:r,url:a,width:i,height:o,maxWidth:this.state.maxWidth},"image-"+t)})})}}ns.displayName="InlineImageAttachments";ns.propTypes={fileAttachments:i.a.instanceOf(On.List)};var ss=ns,rs=n("C3IS"),as=n("OI0Z"),is=n("IpNy");var os=Object(N.createContext)(Object(is.a)()),cs=n("rF4n"),ds=n("P7jJ");const ls=e=>Object(s.jsxs)("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 20 24",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},e,{children:[Object(s.jsx)("defs",{children:Object(s.jsx)("path",{d:"M14.466 0c.076 0 .153.008.233.023.1.02.196.059.288.104.023.011.046.023.068.037.09.052.177.111.252.187l6.345 6.4c.075.076.135.163.186.255.013.023.025.045.036.068.045.093.083.19.103.295.015.075.023.153.023.231v13.2c0 1.884-1.468 3.2-3.569 3.2H6.534c-2.1 0-3.568-1.316-3.568-3.2V3.6c0-1.985 1.6-3.6 3.568-3.6zm-1.133 2H6.25C5.56 2 5 2.56 5 3.25v17.917c0 .689.68.833 1.25.833h12.5c.57 0 1.25-.144 1.25-.833v-12.5h-4.583c-1.149 0-2.084-.935-2.084-2.084V2z",id:"file__a"})}),Object(s.jsx)("use",{xlinkHref:"#file__a"})]}));ls.displayName="SVGFile";var us=ls;const ps=c.a.div.withConfig({displayName:"FileAttachmentTile__FileAttachmentTileWrapper",componentId:"ip88ri-0"})(["max-width:300px;"]);class hs extends N.PureComponent{render(){const{fileMetadata:e}=this.props,t=Hn(e),n=Fn(e),r=Bn(e);return Object(s.jsx)(ps,{children:Object(s.jsx)(cs.a,{onClick:()=>window.open(n),fileName:t,fileInfo:Object(s.jsx)(as.a,{value:r}),preview:Object(s.jsx)(ds.a,{icon:Object(s.jsx)(us,{}),size:"sm"})})})}}hs.contextType=os;hs.displayName="FileAttachmentTile";hs.propTypes={fileMetadata:Object(r.a)("FileMetadataRecord").isRequired};var bs=hs;const ms=Object(K.a)("tileBackgroundColor"),gs=c.a.div.withConfig({displayName:"AttachmentsFooter__AttachmentsFooterWrapper",componentId:"sc-172mb22-0"})(["cursor:pointer;box-sizing:border-box;display:block;background-color:",";"],({backgroundColor:e})=>e),js=c()(bs).withConfig({displayName:"AttachmentsFooter__StyledFileAttachmentTile",componentId:"sc-172mb22-1"})(["background-color:",";"],({backgroundColor:e})=>e||"rgba(255, 255, 255, 0.5)");class fs extends N.PureComponent{render(){const{fileAttachments:e}=this.props;return Object(s.jsx)(gs,{backgroundColor:$(this.context),children:e.map((e,t)=>Object(s.jsx)(js,{fileMetadata:Sn(e),backgroundColor:ms(re(this.context))},t))})}}fs.contextType=de;fs.displayName="AttachmentsFooter";fs.propTypes={fileAttachments:i.a.instanceOf(On.List).isRequired};var Os=fs;const xs=/^rgb/i,ys=e=>{let t,n,s;try{if(xs.test(e)){const r=e.match(/(\d+)\D+(\d+)\D+(\d+)/);t=parseInt(r[1],10);n=parseInt(r[2],10);s=parseInt(r[3],10)}else{let r=e.toLowerCase().replace(/^#/,"");3===r.length&&(r=r.replace(/([0-9a-f])/g,"$1$1"));t=parseInt(r.substring(0,2),16);n=parseInt(r.substring(2,4),16);s=parseInt(r.substring(4,6),16)}if([t,n,s].some(isNaN))return{}}catch(e){return{}}return{r:t,g:n,b:s}},vs=e=>{const{r:t,g:n,b:s}=ys(e);if([t,n,s].some(isNaN))return{hue:0,saturation:0,lightness:0};const r=t/255,a=n/255,i=s/255,o=Math.max(r,a,i),c=Math.min(r,a,i),d=(o+c)/2,l=o-c;if(0===l)return{hue:0,saturation:0,lightness:d};let u;const p=d>.5?l/(2-o-c):l/(o+c);switch(o){case r:u=(a-i)/l+(a<i?6:0);break;case a:u=(i-r)/l+2;break;default:u=(r-a)/l+4}u*=60;u=Math.round(u);return{hue:u,saturation:p,lightness:d}},Cs=e=>{const t=e<0?0:e>1?1:e;return Math.round(100*t)+"%"},Is=(e,t=.1)=>{const{hue:n,saturation:s,lightness:r}=vs(e);return`hsl(${[n,Cs(s),Cs(r+t)].join(", ")})`},Ts=(e,t=.1)=>Is(e,-t);var ws=n("OwpT"),Ss=n.n(ws);const ks=c.a.div.withConfig({displayName:"CommonMessageContent__HyperlinkStyleWrapper",componentId:"sc-1ecqv9a-0"})(["overflow:hidden;"," a{color:",";&:hover{color:",";}&:active{color:",";}}"],ke,({hyperlinkColor:e})=>e,({hyperlinkColor:e})=>e&&Ts(e),({hyperlinkColor:e})=>e&&Ts(e,.2));class Rs extends N.PureComponent{isSentFromVisitor(){return Object(F.getSenderType)(this.props.message)===B.VISITOR}isClickableLink(e){return new RegExp("([a-zA-Z0-9]+://)?([a-zA-Z0-9_]+:[a-zA-Z0-9_]+@)?([a-zA-Z0-9.-]+\\.[A-Za-z]{2,4})(:[0-9]+)?(/.*)?").test(e)}handleOnClickEvent(e){e.persist();"A"===e.target.tagName&&this.props.toggleOpen({isOpened:!1,isUser:!0})}renderContentText(){const{message:e,mobile:t,isLastMessage:n,senderName:r}=this.props,a=Object(F.getRichText)(e)||Object(F.getPlainText)(e),i=t&&this.isClickableLink(a);if(!a)return null;const o=Object(F.getRichText)(e)&&Ss.a.link(a,{stripPrefix:!1});return Object(s.jsx)(on,{senderName:r,messageId:e.id,contentText:o||a,shouldAnnounce:n,"aria-label":`${this.isSentFromVisitor()?U.a.text("conversations-visitor-message-history.iSay"):U.a.text("conversations-visitor-message-history.subjectSays",{subject:r||U.a.text("conversations-visitor-message-history.agent")})} ${Object(F.getPlainText)(e)}`,onClickAction:i?this.handleOnClickEvent.bind(this):null})}renderMessageSection(){const{fileAttachments:e,message:t}=this.props,n=!Object(rs.c)(t)&&e&&$n(e),r=tn(t);return n||r?Object(s.jsxs)(we,{children:[this.renderContentText(),n&&Object(s.jsx)(ss,{fileAttachments:e}),this.props.quickReplySelect&&this.props.quickReplySelect()]}):null}renderAttachmentsSection(){const{fileAttachments:e,message:t}=this.props,n=Object(rs.c)(t)?e:Zn(e);return n&&n.size?Object(s.jsx)(we,{children:Object(s.jsx)(Os,{fileAttachments:n})}):null}render(){const e=this.renderMessageSection(),t=this.renderAttachmentsSection(),n=this.isSentFromVisitor(),{hasUnansweredQuickReplyMessage:r,isLastMessage:a}=this.props;return Object(s.jsx)(ks,{hyperlinkColor:n&&se(this.context),children:Object(s.jsxs)(Ae,{shouldFocusMessage:a&&r,children:[e,t,!e&&!t&&Object(s.jsx)(we,{children:Object(s.jsx)(yn,{})})]})})}}Rs.contextType=de;Rs.displayName="CommonMessageContent";Rs.propTypes={fileAttachments:i.a.instanceOf(On.List),hasUnansweredQuickReplyMessage:i.a.bool,isLastMessage:i.a.bool,message:Object(r.a)("CommonMessage").isRequired,mobile:i.a.bool,quickReplySelect:i.a.oneOfType([i.a.bool,i.a.func]),senderName:i.a.string,toggleOpen:i.a.func};var As=Rs;class Es extends N.PureComponent{render(){const{fileAttachments:e,message:t,positionDescriptors:n}=this.props,r=Object(jn.a)(t),a=n.includes(mn.c);return Object(s.jsxs)(Be,{use:V.c,children:[Object(s.jsx)(As,{fileAttachments:e,isLastMessage:a,message:r}),a&&Object(s.jsx)(Pe,{children:Object(s.jsx)(Qe.a,{use:"help",children:Object(s.jsx)(fn.a,{message:"conversations-visitor-message-history.status.publishing.UNPUBLISHED"})})})]})}}Es.displayName="ActivelyPublishingMessage";Es.propTypes={fileAttachments:i.a.instanceOf(On.List),message:Object(r.a)("ActivelyPublishing").isRequired,positionDescriptors:gn.a.isRequired};var Ps=Es,Ms=n("yYAF"),Ns=n("BvOu"),_s=n("mEYk"),Fs=n.n(_s);const qs=(e,t)=>{Object(N.useEffect)(()=>{const n=n=>{try{const{data:s,__origin:r,source:a}=n,i=JSON.parse(s);if(i.uuid!==e||!e||!i.uuid)return;const{type:o,data:c}=i,d=t[o];"function"==typeof d&&d({data:c,source:a})}catch(t){Fs.a.captureException(t,{extra:{event:n,uuid:e}});return}};window.addEventListener("message",n);return()=>window.removeEventListener("message",n)},[])},Ls=window.location.host.includes("local"),Ds=Object(N.memo)(({message:e,sessionId:t,hubspotUtk:n,threadId:r})=>{const a=Object(N.useRef)(Object(Ns.generateUuid)()),[i,o]=Object(N.useState)(160),c={RESIZE_IFRAME:({data:e})=>{o(e.height)}};qs(a.current,c);const d=new URLSearchParams({uuid:a.current,sessionId:t,hubspotUtk:n,threadId:r}),l=`${Object(Ms.getFullUrl)(Ls?"local":"app")}/feedback-in-chat/${Object(K.a)("feedbackTransactionId",e)}?${d}`;return Object(s.jsx)(Be,{use:V.a,children:Object(s.jsx)(Ae,{children:Object(s.jsx)(we,{children:Object(s.jsx)("iframe",{src:l,style:{width:"100%",height:i,border:0}})})})})});Ds.displayName="FeedbackSurveyMessage";Ds.propTypes={hubspotUtk:i.a.string,message:Object(r.a)("FeedbackSurveyMessage").isRequired,sessionId:i.a.string,threadId:i.a.string};var Bs=Ds,Us=n("LdnN"),zs=n("QGYt"),Hs=n("4cgu"),Vs=n("Xs/R"),Qs=n("f3U3");const Ws=c()(zs.a).withConfig({displayName:"EmailCaptureInput__StyledVizExButton",componentId:"h81wdp-0"})(["padding:0;width:100% !important;height:100%;"]),Js=c.a.div.withConfig({displayName:"EmailCaptureInput__LoadingButtonContainer",componentId:"h81wdp-1"})(["width:38px;height:32px;margin:4px 4px 4px 0;"]),Ys={disabled:i.a.bool,locale:i.a.string,onChange:i.a.func.isRequired,onKeyPress:i.a.func.isRequired,onSubmit:i.a.func,submissionState:i.a.oneOf(["ready","submitting","done"]),value:i.a.string},Gs=({disabled:e,value:t,onChange:n,onKeyPress:r,onSubmit:a,locale:i,submissionState:o})=>Object(s.jsx)(Qs.a,{"aria-label":U.a.text("conversations-visitor-message-history.email-capture.placeholderText",{locale:i}),value:t,placeholder:U.a.text("conversations-visitor-message-history.email-capture.placeholderText",{locale:i}),"data-test-id":"email-capture-input",onChange:n,onKeyPress:r,suffix:Object(s.jsx)(Js,{children:Object(s.jsx)(Hs.a,{currentState:o,onClick:a,disabled:e,"aria-label":U.a.text("conversations-visitor-message-history.email-capture.submitEmailAddress",{locale:i}),"data-test-id":"email-capture-submit-button",Button:Ws,children:Object(s.jsx)(ds.a,{icon:Object(s.jsx)(Vs.a,{color:j.s})})})})});Gs.displayName="EmailCaptureInput";Gs.propTypes=Ys;var Ks=Gs;const Xs=c.a.span.withConfig({displayName:"CaptureSection__ErrorMessage",componentId:"sc-1bqulxn-0"})(["color:",";font-size:12px;line-height:18px;text-align:left;margin-top:9px;display:flex;"],j.e),Zs=({message:e,email:t,errorMessage:n,onChange:r,onKeyPress:a,onSubmit:i,submissionState:o})=>Object(s.jsxs)(we,{children:[Object(s.jsx)(on,{messageId:e.id,"aria-label":`${U.a.text("conversations-visitor-message-history.agentSays")} ${Object(F.getPlainText)(e)}`,contentText:Object(F.getPlainText)(e)}),Object(s.jsx)(Ks,{disabled:!t,value:t,onChange:r,onKeyPress:a,onSubmit:i,submissionState:o}),Object(s.jsx)(Xs,{"aria-live":"assertive",children:n})]},"email-prompt-capture-section");Zs.displayName="CaptureSection";Zs.propTypes={email:i.a.string,errorMessage:i.a.string,message:Object(r.a)("EmailCapturePromptMessage").isRequired,onChange:i.a.func.isRequired,onKeyPress:i.a.func.isRequired,onSubmit:i.a.func.isRequired,submissionState:i.a.string.isRequired};var $s=n("CR0J"),er=n("57op");const tr=er.a,nr=er.f,sr=er.h;var rr=n("rdz/");const ar=({theme:e})=>Object(o.css)(["box-shadow:0 0 0 1px ",";"],Object(rr.a)(sr(e),40)),ir=({checked:e,theme:t})=>Object(o.css)(["background-color:",";color:",";"],tr(t),!e&&Object(rr.a)(sr(t),40)),or=c.a.div.withConfig({displayName:"VizExCheckbox__CheckboxBox",componentId:"kyihrs-0"})(["flex-shrink:0;height:16px;width:16px;transition:color 0.15s ease-out,background-color 0.15s ease-out;color:",";border-color:currentColor;border:2px solid;border-radius:3px;position:relative;",";",";"],({checked:e,theme:t})=>e?sr(t):nr(t),({hover:e,theme:t,checked:n})=>e&&ir({theme:t,checked:n}),({focus:e,theme:t})=>e&&ar({theme:t})),cr=c.a.label.withConfig({displayName:"VizExCheckbox__CheckboxWrapper",componentId:"kyihrs-1"})(["position:relative;display:inline-flex;flex-direction:row;align-items:center;font-size:16px;cursor:pointer;:hover ","{","}input:focus + ","{","}"],or,ir,or,ar),dr=c.a.input.withConfig({displayName:"VizExCheckbox__CheckboxInput",componentId:"kyihrs-2"})(["position:absolute;top:0;width:1px;height:1px;margin:-1px;padding:0;overflow:hidden;clip:rect(0,0,0,0);border:0;"]),lr=c.a.svg.withConfig({displayName:"VizExCheckbox__Indicator",componentId:"kyihrs-3"})(["height:100%;width:100%;top:0;left:0;position:absolute;pointer-events:none;"]),ur=c.a.div.withConfig({displayName:"VizExCheckbox__ContentWrapper",componentId:"kyihrs-4"})(["padding-left:8px;user-select:none;cursor:pointer;"]),pr=e=>{const{onChange:t,theme:n,children:r,checked:a,focus:i,hover:o}=e,c=Object(u.a)(e,["onChange","theme","children","checked","focus","hover"]),d=Object(N.useRef)(null);return Object(s.jsxs)(cr,Object.assign({},c,{onClick:()=>{d.current&&d.current.focus()},"data-testid":"VizExCheckbox",checked:a,theme:n,children:[Object(s.jsx)(dr,{ref:d,"data-testid":"VizExCheckbox-input",type:"checkbox",onChange:t}),Object(s.jsx)(or,{theme:n,checked:a,focus:i,hover:o,children:a&&Object(s.jsx)(lr,{viewBox:"0 0 15 15.343",children:Object(s.jsx)("path",{d:"M1.013 8.11c0-.223.078-.412.234-.568l1.14-1.14c.155-.155.345-.233.568-.233s.413.077.57.233l2.46 2.47 5.492-5.5c.156-.156.346-.234.568-.234.224 0 .413.077.57.233l1.138 1.14c.156.155.234.345.234.568 0 .224-.078.414-.234.57l-6.06 6.06-1.14 1.14c-.155.155-.345.233-.568.233s-.413-.078-.57-.234l-1.138-1.14-3.03-3.03c-.156-.156-.234-.346-.234-.57z",fill:"currentColor"})})}),r&&Object(s.jsx)(ur,{children:r})]}))};pr.displayName="VizExCheckbox";pr.propTypes={checked:i.a.bool,children:i.a.node,focus:i.a.bool,hover:i.a.bool,onChange:i.a.func,theme:$s.a};var hr=pr;const br=c.a.div.withConfig({displayName:"ConsentToCommunicate__BreakString",componentId:"ap0v0x-0"})(["-ms-word-break:break-all;display:block;word-break:break-word;word-wrap:break-word;"]),mr=c()(Qe.a).withConfig({displayName:"ConsentToCommunicate__SmallNoParagraphPadding",componentId:"ap0v0x-1"})(["p{margin-bottom:0;}"]),gr=({message:e,companyName:t,consentToCommunicate:n,onChange:r})=>{const a=Object(nn.a)(e)||U.a.text("conversations-visitor-message-history.email-capture.consentToCommunicate",{accountName:t});return Object(s.jsx)(hr,{checked:n,onChange:r,children:Object(s.jsx)(mr,{use:"help",children:Object(s.jsx)(br,{children:Object(s.jsx)("span",{dangerouslySetInnerHTML:{__html:a}})})})})};gr.displayName="ConsentToCommunicate";gr.propTypes={companyName:i.a.string,consentToCommunicate:i.a.bool.isRequired,message:i.a.string.isRequired,onChange:i.a.func.isRequired};var jr=gr;const fr=/\s|@.{0,}@/;class Or extends N.PureComponent{constructor(e){super(e);this.onConsentChange=()=>{this.setState({hasConsentedToCommunicate:!this.state.hasConsentedToCommunicate})};this.state={email:"",emailError:!1,hasConsentedToCommunicate:!1,submitFailure:!1,submissionState:"ready"};this.handleChange=this.handleChange.bind(this);this.handleKeyPress=this.handleKeyPress.bind(this);this.handleSubmit=this.handleSubmit.bind(this)}handleChange(e){this.setState({email:e.target.value,emailError:!1,submitFailure:!1,submissionState:"ready"})}handleKeyPress(e){const t=13;e.which===t&&this.handleSubmit()}handleSubmit(){const{sendVisitorEmailAddress:e,threadId:t}=this.props,{email:n,hasConsentedToCommunicate:s}=this.state,r=n.trim();Us.a.test(r)&&!r.match(fr)?this.setState({submissionState:"submitting"},()=>{e({email:r,consentToCommunicate:s,threadId:t}).then(({error:e}={})=>{this.setState({submitFailure:Boolean(e),submissionState:"done"})}).catch(e=>{setTimeout(()=>{throw e})})}):this.setState({emailError:!0,submissionState:"ready"})}getValidationMessage(){switch(!0){case this.state.emailError:return Object(s.jsx)(fn.a,{message:"conversations-visitor-message-history.email-capture.invalid"});case this.state.submitFailure:return Object(s.jsx)(fn.a,{message:"conversations-visitor-message-history.email-capture.failed"});default:return null}}render(){const{companyName:e,consentToCommunicateMessage:t,hasVisitorEmail:n,message:r,positionDescriptors:a,requiresConsentToCommunicate:i}=this.props,{email:o,hasConsentedToCommunicate:c}=this.state,d=this.getValidationMessage();return Object(s.jsx)(Be,{use:V.a,children:Object(s.jsx)(Ae,{shouldFocusMessage:a&&a.get(mn.c),children:n?Object(s.jsx)(we,{children:Object(s.jsx)(fn.a,{"data-test-id":"email-capture-success",message:"conversations-visitor-message-history.email-capture.thanks"})}):Object(s.jsxs)(N.Fragment,{children:[Object(s.jsx)(Zs,{message:r,email:o,errorMessage:d,onChange:this.handleChange,onKeyPress:this.handleKeyPress,onSubmit:this.handleSubmit,submissionState:this.state.submissionState}),i&&Object(s.jsx)(we,{children:Object(s.jsx)(jr,{message:t,companyName:e,consentToCommunicate:c,onChange:this.onConsentChange})},"email-prompt-content-section")]})})})}}Or.displayName="EmailCapturePromptMessage";Or.propTypes={companyName:i.a.string,consentToCommunicateMessage:i.a.string,hasVisitorEmail:i.a.bool.isRequired,message:Object(r.a)("EmailCapturePromptMessage").isRequired,positionDescriptors:gn.a.isRequired,requiresConsentToCommunicate:i.a.bool,sendVisitorEmailAddress:i.a.func.isRequired,threadId:i.a.number.isRequired};var xr=Or,yr=n("19qb"),vr=n("AQmo"),Cr=n("le4V"),Ir=n("MBJP"),Tr=n("ZqFO"),wr=n("647q");const Sr=Object(Ir.a)(wr.getLatestWidgetData,e=>Object(Tr.c)(e)),kr=Object(Ir.a)(wr.getLatestWidgetData,Object(K.a)("companyName"));var Rr=n("Wtdz"),Ar=n("AEyM"),Er=n("eEyY");const Pr=e=>({coloring:Object(vr.a)(e),companyName:kr(e),consentToCommunicateMessage:Sr(e),hasVisitorEmail:Object(Rr.a)(e),requiresConsentToCommunicate:Object(Cr.a)(e),threadId:Object(Er.getCurrentThreadId)(e)}),Mr={sendVisitorEmailAddress:Ar.sendVisitorEmailAddress};var Nr=Object(yr.connect)(Pr,Mr)(xr);const _r=e=>Object(s.jsx)("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 28 25",xmlns:"http://www.w3.org/2000/svg"},e,{children:Object(s.jsx)("path",{d:"M12 7.663c-.042-.286.044-.577.234-.796.192-.218.469-.344.76-.344h2.011c.292 0 .57.126.76.344.192.22.277.51.236.796l-1.006 6.992c-.07.492-.494.857-.995.857-.5 0-.925-.365-.995-.857l-1.006-6.992zm2 13.841c-1.11 0-2.01-.894-2.01-1.997 0-1.103.9-1.998 2.01-1.998 1.111 0 2.01.895 2.01 1.998s-.899 1.997-2.01 1.997zm3.001-19.783C16.375.643 15.253 0 14 0s-2.374.643-3 1.72L.47 19.838c-.627 1.078-.627 2.365 0 3.442C1.096 24.357 2.217 25 3.47 25H24.53c1.253 0 2.374-.643 3-1.72.627-1.078.627-2.365 0-3.443L17.001 1.721z",fillRule:"evenodd"})}));_r.displayName="SVGWarning";var Fr=_r;class qr extends N.PureComponent{render(){const{fileAttachments:e,message:t,onRepublish:n}=this.props,r=Object(jn.a)(t);return Object(s.jsxs)(Be,{use:V.c,children:[Object(s.jsx)(As,{fileAttachments:e,isLastMessage:!0,message:r}),Object(s.jsx)(Pe,{children:Object(s.jsxs)(Qe.a,{use:"error",children:[Object(s.jsx)(ds.a,{icon:Object(s.jsx)(Fr,{}),className:"m-right-1"}),Object(s.jsx)(Qn.a,{onClick:()=>n(r),use:"error",children:Object(s.jsx)(fn.a,{message:"conversations-visitor-message-history.status.publishing.PUBLISH_FAILED"})})]})})]})}}qr.displayName="FailedToPublishMessage";qr.propTypes={fileAttachments:i.a.instanceOf(On.List),message:Object(r.a)("FailedToPublish").isRequired,onRepublish:i.a.func.isRequired};var Lr=qr;const Dr={onRepublish:n("N4ZN").a};var Br=Object(yr.connect)(null,Dr)(Lr),Ur=n("gGDi");function zr(e){return"string"==typeof e}function Hr(e){return zr(e)?e:e.has("label")?e.get("label"):e.get("value")}function Vr(e){return zr(e)?e:e.get("value")}var Qr=n("k8Ub"),Wr=n("/mXs");const Jr=e=>Object(s.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 32 32"},e,{children:Object(s.jsx)("path",{d:"M29.92 2.58L11.33 21.17l-9.25-9.25c-.362-.362-.862-.586-1.415-.586-1.105 0-2.001.896-2.001 2.001 0 .553.224 1.053.586 1.415L9.92 25.41c.362.362.862.587 1.415.587s1.053-.224 1.415-.587l20-20c.362-.362.586-.862.586-1.415 0-1.105-.896-2.001-2.001-2.001-.553 0-1.053.224-1.415.586z"})}));Jr.displayName="SVGSuccess";var Yr=Jr;const Gr=c.a.div.withConfig({displayName:"QuickReplyGroup__ButtonWrapper",componentId:"yjoy4l-0"})(["margin-bottom:12px;> *{margin-right:8px;margin-bottom:8px;}> *:last-child{margin-right:0;}padding:8px;display:inline-block;"]),Kr=c()(zs.a).withConfig({displayName:"QuickReplyGroup__LeftAlignButton",componentId:"yjoy4l-1"})(["text-align:left;"]);class Xr extends N.Component{constructor(e){super(e);this.handleSendMulti=this.handleSendMulti.bind(this);this.handleQuickReplySend=this.handleQuickReplySend.bind(this);this.handleSendIndividual=this.handleSendIndividual.bind(this);this.handleSelect=this.handleSelect.bind(this);this.state={selected:Object(On.Set)()}}hasSelected(){const{selected:e}=this.state;return e.size>0}handleSelect(e){this.setState(({selected:t})=>({selected:t.includes(e)?t.delete(e):t.add(e)}))}handleSendMulti(){const{selected:e}=this.state;if(this.hasSelected()){const t=e.map(Hr).join(", ");this.handleQuickReplySend(t,e)}}handleSendIndividual(e){const t=Object(On.List)([e]),n=Hr(e);this.handleQuickReplySend(n,t)}handleQuickReplySend(e,t){const{message:n,publishMessage:s}=this.props;s({text:e,quickReply:Object(Qr.a)(n).set("quickReplies",t.toJS())})}renderOptions(){const{options:e,multiSelect:t,disabled:n}=this.props,{selected:r}=this.state,a=t?this.handleSelect:this.handleSendIndividual;return e.map(e=>{const i=()=>a(e),o=r.includes(e),c=Vr(e),d=Hr(e);if(!c||!d)return null;const l=t&&Object(s.jsx)(hr,{className:"m-right-2",checked:o,onChange:i,children:d});return Object(s.jsx)(Kr,{onClick:i,disabled:n,size:"sm",children:l||d},"quickreply."+c)})}renderSendButton(){const{disabled:e,multiSelect:t}=this.props;if(!t)return null;const n=!this.hasSelected()||e;return Object(s.jsx)(Wr.a,{disabled:n,onClick:this.handleSendMulti,size:"sm",children:Object(s.jsx)(ds.a,{icon:Object(s.jsx)(Yr,{}),size:"sm"})},"send-button")}render(){return Object(s.jsx)(Gr,{"data-test-id":"quick-reply-group",children:[...this.renderOptions(),this.renderSendButton()]})}}Xr.contextType=de;Xr.defaultProps={multiSelect:!1,hasSentReply:!1};Xr.displayName="QuickReplyGroup";Xr.propTypes={disabled:i.a.bool.isRequired,message:i.a.oneOfType([Object(r.a)("CommonMessage"),Object(r.a)("InitialMessage")]).isRequired,multiSelect:i.a.bool.isRequired,options:i.a.instanceOf(On.Set).isRequired,publishMessage:i.a.func};var Zr=Xr;const $r=7;n("iKGd");const ea=er.f,ta=er.e,na=(er.a,er.b,er.g,er.f,er.h,er.h),sa=(er.h,"__PLACEHOLDER_VALUE__"),ra=c.a.select.withConfig({displayName:"VizExMobileSelect__StyledSelect",componentId:"sc-1joxjht-0"})(["appearance:none;background:none;border-radius:3px;border:1px solid transparent;color:inherit;cursor:inherit;font-size:16px;margin:0;outline:none;padding:8px 32px 10px 10px;width:100%;height:40px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;&::-ms-expand{display:none;}:focus::-ms-value{color:",";background:transparent;}"],({theme:e})=>Object(er.i)(e)),aa=c.a.div.withConfig({displayName:"VizExMobileSelect__SelectContainer",componentId:"sc-1joxjht-1"})(["background-color:",";border-radius:3px;border:1px solid ",";cursor:pointer;display:block;font-size:16px;height:40px;line-height:22px;padding:0;position:relative;text-align:left;transition:all 0.15s ease-out;width:100%;&::after{border-color:transparent;border-style:solid;border-width:0.375em;display:inline-block;vertical-align:middle;border-top-color:",";margin-top:0.375em;margin-top:-3px;content:' ';position:absolute;top:50%;right:1em;z-index:2;pointer-events:none;}"],({theme:e})=>ta(e),({theme:e})=>ea(e),({theme:e})=>na(e)),ia=e=>{const{options:t,disabled:n,value:r,onChange:a,placeholder:i,theme:o}=e,c=Object(u.a)(e,["options","disabled","value","onChange","placeholder","theme"]),d=t.map(({value:e,text:t})=>Object(s.jsx)("option",{value:e,children:t},e));return Object(s.jsx)(aa,{theme:o,children:Object(s.jsxs)(ra,Object.assign({},c,{"data-testid":"VizExSelect",disabled:n,defaultValue:sa,value:r,onChange:a,theme:o,children:[i&&Object(s.jsx)("option",{disabled:!0,value:sa,children:i}),d]}))})};ia.displayName="VizExMobileSelect";ia.propTypes={disabled:i.a.bool,onChange:i.a.func.isRequired,options:i.a.arrayOf(i.a.shape({text:i.a.string,value:i.a.string})).isRequired,placeholder:i.a.string,theme:$s.a,value:i.a.string};var oa=ia;const ca="__PLACEHOLDER_VALUE__",da=({quickReplyOptions:e,onChange:t,disabled:n,value:r,placeholder:a})=>{const i=Object(N.useMemo)(()=>e.map(e=>{const t=Vr(e);return{text:Hr(e),value:t}}).toJS(),[e]);return Object(s.jsx)(oa,{options:i,onChange:t,disabled:n,defaultValue:ca,value:r,placeholder:a})};da.displayName="QuickReplySelect";da.propTypes={disabled:i.a.bool,onChange:i.a.func.isRequired,placeholder:i.a.string,quickReplyOptions:i.a.instanceOf(On.OrderedSet).isRequired,value:i.a.string};var la=da,ua=n("VADA"),pa=n("pHbL"),ha=n("SGjM");const ba=Object(it.a)(({companyLogo:e,customChatName:t})=>new dt.a({avatar:e,firstName:t,senderType:B.AGENT}));var ma=n("YPLr"),ga=n("Avso");const ja=Object(it.a)((e,t,n)=>{const s=Object(ma.agentTypeToSenderType)(Object(ga.getAgentType)(e)||n);return new dt.a({id:Object(ga.getUserId)(e)||t,avatar:Object(ga.getAvatar)(e),firstName:Object(ga.getFirstName)(e),email:Object(ga.getEmail)(e),lastName:Object(ga.getLastName)(e),senderType:s})}),fa=c.a.div.withConfig({displayName:"InitialMessageAvatar__MultiAvatarWrapper",componentId:"sc-1qxh37g-0"})(["width:100%;height:100%;display:flex;justify-content:center;flex-wrap:wrap;margin-right:4px;margin-left:-4px;& > *{flex:1;line-height:1;position:relative;& > *{position:absolute;left:0;bottom:-8px;}div{background-color:white;}}"]);class Oa extends N.PureComponent{getSenderAvatars(){const{chatHeadingConfig:e,sender:t,sendFromResponders:n}=this.props;if(Object(ut.isFromBot)(t))return Object(On.List)([t]);if(n.size)return Object(ha.a)(ja,n);const s=Object(ua.a)(e);return s?Object(On.List)([ba({companyLogo:s,customChatName:Object(pa.a)(e)})]):Object(On.List)()}renderAvatars(){const e=this.getSenderAvatars();if(!e.size)return Object(s.jsx)(H,{});if(1===e.size){const t=e.get(0);return Object(s.jsx)(H,{sender:t})}const t=2===e.size;return Object(s.jsx)(fa,{children:e.map((e,n)=>Object(s.jsx)(H,{sender:e,size:t?"xs":"xxs"},n))})}render(){return Object(s.jsx)(Ce,{children:this.renderAvatars()})}}Oa.displayName="InitialMessageAvatar";Oa.propTypes={chatHeadingConfig:i.a.oneOfType([Object(r.a)("CompanyChatHeadingConfig"),Object(r.a)("OwnerChatHeadingConfig"),Object(r.a)("UsersAndTeamsChatHeadingConfig")]),sendFromResponders:i.a.instanceOf(On.List).isRequired,sender:Object(r.a)("Sender")};var xa=Oa;class ya extends N.PureComponent{constructor(e){super(e);this.handleQuickReplySend=()=>{const{message:e,publishMessage:t}=this.props,{selectedQuickReply:n}=this.state;t({text:Hr(n),quickReply:Object(Qr.a)(e).set("quickReplies",[n])})};this.handleQuickReplySelect=({target:{value:e}})=>{const{message:t}=this.props,n=Object(Qr.d)(t).filter(t=>Vr(t)===e).first();this.setState({selectedQuickReply:n})};this.showQuickReplySelection=()=>{const{message:e}=this.props,t=Object(Qr.d)(e),n=Object(Qr.b)(e);return this.showQuickReplies()&&t.count()>$r&&!n};this.renderQuickReplySelect=()=>{const{message:e,isThreadStarted:t,requiresExplicitConsentToProcess:n}=this.props,{selectedQuickReply:r}=this.state,a=Object(Qr.d)(e);return Object(s.jsx)("div",{className:"m-y-2",children:Object(s.jsx)(la,{quickReplyOptions:a,disabled:n||!t,onChange:this.handleQuickReplySelect,value:Vr(r),placeholder:U.a.text("conversations-visitor-message-history.quickReply.selectionPlaceholder")})})};this.renderQuickReplySendButton=()=>{const{isThreadStarted:e}=this.props,{selectedQuickReply:t}=this.state;return Object(s.jsx)(Pe,{children:Object(s.jsx)(zs.a,{disabled:!e||!Vr(t),onClick:this.handleQuickReplySend,size:"sm",use:"primary",children:Object(s.jsx)(Ze.a,{message:"conversations-visitor-message-history.quickReply.selectionComplete"})})})};this.state={selectedQuickReply:Object(On.Map)()}}get sender(){const{message:e,senders:t}=this.props;return ht(e,t)}hasQuickReplyOptions(){const{message:e}=this.props,t=Object(F.getSenderType)(e);return Object(Qr.a)(e)&&t!==B.VISITOR}showQuickReplies(){const{hasUnansweredQuickReplyMessage:e,positionDescriptors:t}=this.props,n=e&&t.get(mn.c);return this.hasQuickReplyOptions()&&n}renderAvatar(){const{chatHeadingConfig:e,sendFromResponders:t}=this.props;return Object(s.jsx)(xa,{chatHeadingConfig:e,sender:this.sender,sendFromResponders:t})}renderQuickReplyGroup(){const{isThreadStarted:e,message:t,publishMessage:n,requiresExplicitConsentToProcess:r}=this.props,a=Object(Qr.d)(t),i=Object(Qr.b)(t);return Object(s.jsx)(Pe,{children:Object(s.jsx)(Zr,{disabled:r||!e,options:a,message:t,multiSelect:i,publishMessage:n,onSend:this.handleQuickReplySend})})}renderContentSection(){const e=Object(cn.a)(["metadata","@type"]),{message:t}=this.props;let n,r;if(Boolean(e(t))){n=Object(F.getPlainText)(t);r=Object(F.getRichText)(t)}else{n=Object(Ur.b)(t);r=Object(Ur.a)(t)}const a=Ss.a.link(r,{stripPrefix:!1});return Object(s.jsxs)(we,{children:[Object(s.jsx)(on,{messageId:t.id,"aria-label":`${U.a.text("conversations-visitor-message-history.agentSays")} ${Object(F.getPlainText)(t)}`,contentText:a||n}),this.showQuickReplySelection()&&this.renderQuickReplySelect()]})}renderMessageFooter(){const{message:e}=this.props,t=Object(Qr.d)(e),n=Object(Qr.b)(e);return this.showQuickReplySelection()?this.renderQuickReplySendButton():this.showQuickReplies()&&(t.count()<=$r||n)?this.renderQuickReplyGroup():null}render(){const{positionDescriptors:e}=this.props,t=e.get(mn.a);return Object(s.jsxs)(Be,{use:V.a,children:[t&&Object(s.jsx)(Ne,{children:this.renderAvatar()}),Object(s.jsx)(Ae,{shouldFocusMessage:Boolean(this.showQuickReplies()),children:this.renderContentSection()}),this.renderMessageFooter()]})}}ya.displayName="InitialMessage";ya.propTypes={chatHeadingConfig:i.a.oneOfType([Object(r.a)("CompanyChatHeadingConfig"),Object(r.a)("OwnerChatHeadingConfig"),Object(r.a)("UsersAndTeamsChatHeadingConfig")]),hasUnansweredQuickReplyMessage:i.a.bool,isThreadStarted:i.a.bool.isRequired,message:Object(r.a)("InitialMessage").isRequired,positionDescriptors:gn.a.isRequired,publishMessage:i.a.func,requiresExplicitConsentToProcess:i.a.bool.isRequired,sendFromResponders:i.a.instanceOf(On.List).isRequired,senders:Q.a.isRequired};var va=ya,Ca=n("p9k8"),Ia=n("WUj5"),Ta=n("hTKa"),wa=n("PYok"),Sa=n("byjC"),ka=n("k09d"),Ra=n("wD2U");const Aa=e=>{const t=Object(ka.a)(e);return{chatHeadingConfig:Object(Ia.a)(e),sendFromResponders:Object(Ta.a)(e),hasUnansweredQuickReplyMessage:Object(Sa.a)(e,{thread:t}),isThreadStarted:Object(Ca.a)(t),mobile:Object(Ra.getIsMobile)(e)}},Ea={publishMessage:wa.a};var Pa=Object(yr.connect)(Aa,Ea)(va);const Ma=e=>{const t=Object(F.getSenderType)(e);return Object(Qr.a)(e)&&t!==B.VISITOR};class Na extends N.PureComponent{constructor(e){super(e);this.handleQuickReplySend=()=>{const{message:e,publishMessage:t}=this.props,{selectedQuickReply:n}=this.state;t({text:Hr(n),quickReply:Object(Qr.a)(e).set("quickReplies",[n])})};this.handleQuickReplySelect=({target:{value:e}})=>{const{message:t}=this.props,n=Object(Qr.d)(t).filter(t=>Vr(t)===e).first();this.setState({selectedQuickReply:n})};this.showQuickReplies=()=>{const{hasUnansweredQuickReplyMessage:e,message:t,positionDescriptors:n}=this.props,s=e&&n.get(mn.c);return Ma(t)&&s};this.showQuickReplySelection=()=>{const{message:e}=this.props,t=Object(Qr.d)(e),n=Object(Qr.b)(e);return this.showQuickReplies()&&t.count()>$r&&!n};this.renderQuickReplyGroup=()=>{const{isThreadStarted:e,message:t,publishMessage:n,requiresExplicitConsentToProcess:r}=this.props,a=Object(Qr.d)(t),i=Object(Qr.b)(t);return Object(s.jsx)(Pe,{children:Object(s.jsx)(Zr,{options:a,disabled:r||!e,message:t,multiSelect:i,publishMessage:n,onChange:this.handleQuickReplyUpdate})})};this.renderQuickReplySendButton=()=>{const{isThreadStarted:e}=this.props,{selectedQuickReply:t}=this.state;return Object(s.jsx)(Pe,{children:Object(s.jsx)(zs.a,{disabled:!e||!Vr(t),onClick:this.handleQuickReplySend,size:"sm",use:"primary",children:Object(s.jsx)(Ze.a,{message:"conversations-visitor-message-history.quickReply.selectionComplete"})})})};this.renderQuickReplySelect=()=>{const{message:e,isThreadStarted:t,requiresExplicitConsentToProcess:n}=this.props,{selectedQuickReply:r}=this.state,a=Object(Qr.d)(e);return Object(s.jsx)("div",{className:"m-y-2",children:Object(s.jsx)(la,{quickReplyOptions:a,disabled:n||!t,onChange:this.handleQuickReplySelect,value:Vr(r),placeholder:U.a.text("conversations-visitor-message-history.quickReply.selectionPlaceholder")})})};this.state={selectedQuickReply:Object(On.Map)()}}isSentFromVisitor(){return Object(ut.isFromVisitor)(this.props.message)}get sender(){const{message:e,senders:t}=this.props;return ht(e,t)}renderMessageHeader(){const{positionDescriptors:e}=this.props;if(!e.includes(mn.b)||this.isSentFromVisitor())return null;const t=this.sender,n=mt(t);return Object(s.jsxs)(Ne,{children:[Object(s.jsx)(Ce,{children:Object(s.jsx)(H,{sender:t,isLoading:n})}),Object(s.jsx)(Fe,{children:Object(s.jsx)(st,{isSenderLoading:n,sender:t})})]})}renderTimeStamp(){const{message:e,positionDescriptors:t,locale:n}=this.props,r=t.includes(mn.e),a=Object(F.getTimestamp)(e);return r&&a?Object(s.jsx)(Pe,{children:Object(s.jsx)(Qe.a,{use:"help",children:new Date(a).toLocaleTimeString(n,{hour:"2-digit",minute:"2-digit"})})}):null}renderMessageFooter(){const{message:e}=this.props,t=Object(Qr.d)(e),n=Object(Qr.b)(e);return this.showQuickReplies()&&this.showQuickReplySelection()?this.renderQuickReplySendButton():this.showQuickReplies()&&(t.count()<=$r||n)?this.renderQuickReplyGroup():this.renderTimeStamp()}render(){const{fileAttachments:e,message:t,positionDescriptors:n,toggleOpen:r,mobile:a,hasUnansweredQuickReplyMessage:i}=this.props,o=this.isSentFromVisitor()?V.c:V.a;return Object(s.jsxs)(Be,{use:o,children:[this.renderMessageHeader(),Object(s.jsx)(As,{senderName:Object(q.e)(this.sender),fileAttachments:e,isLastMessage:n.includes(mn.c),message:t,quickReplySelect:this.showQuickReplySelection()&&this.renderQuickReplySelect,mobile:a,toggleOpen:r,hasUnansweredQuickReplyMessage:i}),this.renderMessageFooter()]})}}Na.displayName="CommonMessage";Na.propTypes={fileAttachments:i.a.instanceOf(On.List),hasUnansweredQuickReplyMessage:i.a.bool,isThreadStarted:i.a.bool.isRequired,locale:i.a.string.isRequired,message:Object(r.a)("CommonMessage").isRequired,mobile:i.a.bool,positionDescriptors:gn.a.isRequired,publishMessage:i.a.func,requiresExplicitConsentToProcess:i.a.bool.isRequired,senders:Q.a,toggleOpen:i.a.func};var _a=Na,Fa=n("jxkM"),qa=n("u8Gm");const La=e=>{const t=Object(ka.a)(e);return{hasUnansweredQuickReplyMessage:Object(Sa.a)(e,{thread:t}),isThreadStarted:Object(Ca.a)(t),mobile:Object(Ra.getIsMobile)(e),locale:Object(qa.b)(e)}},Da={publishMessage:wa.a,toggleOpen:Fa.toggleOpen};var Ba=Object(yr.connect)(La,Da)(_a),Ua=n("lOT2");const za=e=>({requiresExplicitConsentToProcess:Object(Ua.a)(e)}),Ha={},Va=Object(yr.connect)(za,Ha),Qa=["id"],Wa=["timestamp"],Ja=(Object(cn.a)(Qa),Object(cn.a)(Wa)),Ya=Object(N.memo)(({message:e,labelPadding:t,locale:n})=>{const r=Ja(e),a=new Date(r).toLocaleDateString(n,{year:"numeric",month:"long",day:"numeric"});return Object(s.jsx)(vt,{labelPadding:t,children:Object(s.jsx)(Qe.a,{use:"help",children:a})})});Ya.displayName="DateLabelMessage";Ya.propTypes={labelPadding:i.a.string,locale:i.a.string.isRequired,message:Object(r.a)("DateMessage").isRequired};var Ga=Ya;const Ka=c.a.div.withConfig({displayName:"DateLabel__StyleWrapper",componentId:"q3znq1-0"})(["","{border-color:",";}"],xt,j.f),Xa=e=>Object(s.jsx)(Ka,{children:Object(s.jsx)(Ga,Object.assign({},e,{labelPadding:"m-y-3"}))});Xa.displayName="DateLabel";Xa.propTypes=Ga.propTypes;var Za=Xa;const $a=e=>({locale:Object(qa.b)(e)});var ei=Object(yr.connect)($a,null)(Za),ti=n("9d9s"),ni=n("E6wg");const si=e=>t=>{const n=Object(yr.useSelector)(ni.getSessionId);return Object(s.jsx)(e,Object.assign({},t,{sessionId:n}))};var ri=n("081M");const ai=e=>t=>{const n=Object(yr.useSelector)(ri.getHubspotUtk);return Object(s.jsx)(e,Object.assign({},t,{hubspotUtk:n}))};function ii(e){return t=>{const n=Object(yr.useSelector)(Er.getCurrentThreadId);return Object(s.jsx)(e,Object.assign({},t,{threadId:n}))}}n.d(t,"a",(function(){return ji}));const{ACTIVELY_PUBLISHING:oi,COMMON_MESSAGE:ci,DATE_MESSAGE:di,EMAIL_CAPTURE_PROMPT:li,FAILED_TO_PUBLISH:ui,INITIAL_MESSAGE:pi,OFFICE_HOURS:hi,TYPICAL_RESPONSE_TIME:bi,TYPING:mi,FEEDBACK_SURVEY:gi}=ti.a,ji={[oi]:Ps,[ci]:Va(Ba),[di]:ei,[li]:Nr,[ui]:Br,[pi]:Va(Pa),[hi]:bn,[bi]:bn,[mi]:jt,[gi]:ii(si(ai(Bs)))}},"5els":function(e,t,n){var s=n("uIOU"),r=n("EzJv"),a=n("2+Io");function i(){this.size=0;this.__data__={hash:new s,map:new(a||r),string:new s}}e.exports=i},"5oUx":function(e,t,n){"use strict";var s=n("YPLr"),r=n("Avso"),a=n("MBJP"),i=n("k09d"),o=n("Q2fA");const c=Object(a.a)([e=>e,i.a],(e,t)=>Object(o.a)(e,{thread:t}));var d=n("eEyY"),l=n("QYOI"),u=n("+TdC"),p=n("BvOu"),h=n("cPs9");n.d(t,"a",(function(){return b}));const b=Object(a.a)([c,d.getCurrentThreadId],(e,t)=>{if(!e||!t)return Object(l.List)();const n=Object(s.agentTypeToCMFSenderType)(Object(r.getAgentType)(e),!0),a=Object(h.a)(n);return Object(l.List)([new u.a({id:Object(p.generateUuid)(),typingState:null,sender:{"@type":n,[a]:Object(r.getUserId)(e)}})])})},"5rZi":function(e,t,n){"use strict";n.r(t);n.d(t,"createNewThread",(function(){return M}));var s=n("+LtA"),r=n("Ut5p"),a=n("QYOI"),i=n("JGJA"),o=n("mEYk"),c=n.n(o),d=n("4dq7"),l=n("dIvY"),u=n("sWFM"),p=n("V0XL"),h=n("E6wg"),b=n("lJFu"),m=n("Ryja"),g=n("Ux+X"),j=n("081M"),f=n("k3iI"),O=n("qwm9"),x=n("2Sm/"),y=n("PY3R"),v=n("q1tZ"),C=n("647q"),I=n("2BFa"),T=n("xM+F"),w=n("CdQ/"),S=n("dZ2B"),k=n("R4/u");const R=Object(r.b)(x.a.STARTED),A=Object(r.b)(x.a.SUCCEEDED,({channel:e,threadId:t,conversation:n,threadHistory:s,shouldAskForEmail:r})=>({channel:e,threadId:t,conversation:n,threadHistory:s,shouldAskForEmail:r})),E=Object(r.b)(x.a.FAILED,({status:e,message:t,error:n})=>({status:e,message:t,error:n}));let P;function M(){return(e,t)=>{const n=Object(h.getSessionId)(t()),r=Object(u.getMessageId)(t()),o=Object(p.getMessagesPageUri)(t()),x=Object(j.getHubspotUtk)(),M=Object(C.getLatestWidgetData)(t()),N=Object(m.getVisitorInitialThreadHistory)(t()),_=(N[0]||[{}]).id;if(void 0===_||P===_){P===_&&c.a.captureMessage("createNewThread attempted duplicate initial message",{level:"warning",extra:{initialMessageId:_}});return null}P=_;e(R());return Object(O.createVisitorThread)({sessionId:n,hubspotUtk:x,messageId:r,messagesPageUri:o,visitorThreadInitialHistory:N,widgetData:M,zoneId:Object(S.getUserTimezone)()}).then(({channelDetails:n,sessionId:r,id:c,history:u,shouldAskForEmail:p})=>{const h=new s.a(Object.assign({},u,{attachments:Object(a.Map)(Object(i.a)("attachments",u))})),m=Object(b.buildCreatedThread)({channelDetails:n,messagesPageUri:o,threadId:c,threadHistory:h});e(Object(f.updateSessionId)(r));e(Object(g.trackInteraction)("start-conversation",{action:"new conversation started",threadId:c}));e(Object(k.b)());e(A({channel:Object(v.a)(n),threadId:c,conversation:m,threadHistory:h,shouldAskForEmail:p}));e(Object(d.addAvailabilityMessage)({channel:Object(v.a)(n),threadId:c}));Object(y.a)({thread:m});Object(I.gdprCookieConsentOnExitIntentEnabled)(t(),M)||Object(T.getIsPrivateLoad)(M)||Object(l.handleStoreMessagesCookie)(Object(w.getMessagesUtk)())}).catch((t={})=>e(E({status:t.status,message:t.message,error:t})))}}},"6GFX":function(e,t,n){"use strict";n.r(t);n.d(t,"generateIdForFile",(function(){return s}));const s=({file:e,timestamp:t})=>`${e?e.name:""}-${t}`},"6PLn":function(e,t,n){"use strict";n.r(t);n.d(t,"applyGdprConsent",(function(){return a}));var s=n("Qf6G"),r=n("FPMu");const a=()=>(e,t)=>{Object(r.shouldRecordImplicitConsentToProcess)(t())&&e(Object(s.consentToProcess)());return Promise.resolve()}},"6aYC":function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var s=n("KXN9"),r=n("x1JE"),a=n("MBJP"),i=n("eEyY"),o=n("goEE"),c=n("a/jS");const d=Object(a.a)([c.a,i.getCurrentThreadId],(e,t)=>{const n=Object(r.getEntries)(e).map(s.a);return Object(o.getSortedMessagesByThreadId)(n,t)})},"6upE":function(e,t){function n(e){var t=this.has(e)&&delete this.__data__[e];this.size-=t?1:0;return t}e.exports=n},"7A+m":function(e,t,n){"use strict";var s=n("19qb"),r=n("8g7g"),a=n("V2EP"),i=n("jM00"),o=n("PYok"),c=n("7yF8"),d=n("MBJP"),l=n("Pda3"),u=n("M/2P");const p=Object(d.a)([u.getAsyncPubSubClient],l.isFailed);var h=n("k09d"),b=n("AQmo"),m=n("V0XL"),g=n("JoPj"),j=n("byjC"),f=n("ZAuv"),O=n("w1Zi"),x=n("84LK"),y=n("piVz"),v=n("80AS"),C=n("jRRu"),I=n("wD2U"),T=n("vwA6"),w=n("gALC"),S=n("S055"),k=n("MJM1");const R=Object(k.a)(["isInitialInputFocusDisabled"]);var A=n("QnHA");const E=Object(d.a)([A.a],e=>R(e));var P=n("NpZo"),M=n("JGJA");const N=e=>Object(M.a)("messageEditorStaging",e);var _=n("w1qe");const F=(e,t)=>Object(k.a)([e,_.a],t),q=Object(d.a)(P.getSelectedThreadId,N,(e,t)=>F(e,t));var L=n("Ut5p"),D=n("xZ3y");const B=Object(L.b)(D.UPDATE_MESSAGE_EDITOR_STAGING_TEXT,e=>e),U=Object(L.b)(D.REMOVE_MESSAGE_EDITOR_STAGING_TEXT,e=>e),z=e=>(t,n)=>{t(B({stagingText:e,threadId:Object(P.getSelectedThreadId)(n())}))},H=()=>(e,t)=>{e(U(Object(P.getSelectedThreadId)(t())))};var V=n("/gEt"),Q=n("2gT5"),W=n("A+sO"),J=n("JWgK");const Y=e=>{const t=Object(h.a)(e),n=!Object(v.a)(e,{thread:t})&&Object(j.a)(e,{thread:t}),s=Object(C.getIsBot)(e)&&Object(W.getIsWidgetInAwayMode)(e)&&!Object(Q.isPersistedThread)(t);return{coloring:Object(b.a)(e),currentConversation:t,disablePublish:!Object(c.a)(e),disableTextInput:n||s,showQuickReplyPlaceholder:n,isOnFocus:Object(w.a)(e),stagedMessage:q(e),messagesPageUri:Object(m.getMessagesPageUri)(e),networkOffline:p(e),showingHsBranding:Object(g.a)(e),showInitialMessageBubble:Object(y.a)(e),stagedAttachments:Object(i.a)(e),mobile:Object(I.getIsMobile)(e),shouldHideAttachmentButton:Object(S.a)(e),shouldDisableInitialInputFocus:E(e),shouldSendInputStagingEvent:Object(V.a)(),canUploadAttachments:Object(J.a)(e,{thread:t})}},G={closeInitialMessageBubble:x.a,onRemoveAttachment:r.a,onSelectAttachmentFile:a.a,publishMessage:o.a,publishTypingMessage:f.a,toggleOnAndOffInputFocus:T.a,setMessageEditorStagingText:z,removeMessageEditorStagingText:H};t.a=Object(s.connect)(Y,G)(O.a)},"7j4v":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));const s=3e3},"7yF8":function(e,t,n){"use strict";var s=n("MBJP"),r=n("Pda3"),a=n("kV9q"),i=n("M/2P"),o=n("JGJA"),c=n("KXN9"),d=n("x1JE"),l=n("5vQK");const u=Object(o.a)("subscriptions"),p=(e,{clientKey:t=l.a}={})=>t,h=Object(s.a)([p,u],d.getEntry);Object(s.a)([h],c.a);var b=n("rjAk"),m=n("Ryja"),g=n("dHfq"),j=n("ZSXR");n.d(t,"a",(function(){return f}));const f=Object(s.a)([m.getAsyncStagedThread,i.getAsyncPubSubClient,b.hasPersistedThreads,h,g.a,j.a],(e,t,n,s,i,o)=>{if(Object(r.isStarted)(e))return!1;if(Object(r.isUninitialized)(e)&&!n)return!0;return!(!Object(r.isSucceeded)(i)&&!Object(r.isUninitialized)(i)||!Object(r.isSucceeded)(o)&&!Object(r.isUninitialized)(o))&&(!!(n&&Object(a.isClientReady)(t)&&Object(r.isSucceeded)(s))||!!(Object(r.isSucceeded)(e)&&Object(a.isClientReady)(t)&&Object(r.isSucceeded)(s)))})},"80AS":function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var s=n("MBJP"),r=n("J4oD"),a=n("C3IS"),i=n("V+nC"),o=n("iPDb"),c=n("k8Ub"),d=n("kWFB");const l=Object(s.a)([r.historyDataForThread],e=>{if(!e||!Object(d.hasMessages)(e))return!0;const t=Object(o.a)(e).filter(e=>Object(a.b)(e)&&!Object(a.c)(e)||Object(i.a)(e)).last();return Object(c.c)(t)})},"84zR":function(e,t,n){"use strict";n.r(t);n.d(t,"uploadAttachment",(function(){return g}));var s=n("ughT"),r=n("Ux+X"),a=n("E6wg"),i=n("9P7L"),o=n("xAl4"),c=n("JIa2"),d=n("VXRw"),l=n("lnDz"),u=n("Zn4N"),p=n("gygH"),h=n("Wnz4"),b=n("kSDi"),m=n("R4/u");const g=({attachment:e,threadId:t})=>(n,g)=>{const j=Date.now();n(Object(d.attachmentUploadStart)({attachment:e,threadId:t}));const f=Object(a.getSessionId)(g()),O=Object(s.getLocalId)(e),x=Object(s.getFile)(e),y=Object(c.createFormDataForAttachment)({file:x});return Object(i.fetchAttachmentUploadUrlClient)({sessionId:f,threadId:t}).then(({uploadUrl:e})=>Object(o.uploadAttachmentClient)({formData:y,onProgress:({loaded:e,total:s})=>{n(Object(p.handleAttachmentUploadProgress)({localId:O,threadId:t,loaded:e,total:s}))},uploadUrl:`${b.a}/${e}`})).then(({objects:[e]})=>{const s=Date.now();n(Object(l.attachmentUploadComplete)({localId:O,threadId:t,fileId:e.id,uploadedFile:e}));n(Object(m.a)());n(Object(r.trackInteraction)("attached-file",{action:"attached file","attachment-type":e.extension,"attachment-size-bytes":x.size,"upload-time-ms":s-j}))}).catch(e=>{if(e&&e.responseJSON&&e.responseJSON.message.includes("not allowed")){n(Object(h.attachmentError)(u.a,t));n(Object(r.trackInteraction)("failed-to-attach-file",{action:"failed to attach file","failure-type":"invalid file type"}))}else{n(Object(h.attachmentError)(u.c,t));n(Object(r.trackInteraction)("failed-to-attach-file",{action:"failed to attach file","failure-type":"upload error"}))}})}},"8FuJ":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var s=n("YPLr"),r=n("oLsC"),a=n("Avso"),i=n("MBJP");const o=Object(i.b)((e,t,n)=>{const i=Object(s.agentTypeToSenderType)(Object(a.getAgentType)(e)||n);return new r.a({id:Object(a.getUserId)(e)||t,avatar:Object(a.getAvatar)(e),firstName:Object(a.getFirstName)(e),email:Object(a.getEmail)(e),lastName:Object(a.getLastName)(e),senderType:i})})},"8M+t":function(e,t,n){"use strict";var s=n("QgEn"),r=n("VfuR"),a=n.n(r),i=n("Ktcs"),o=n("9f1P"),c=n.n(o),d=n("+KD7"),l=n("0IL2"),u=n("mKxs"),p=n("evgc"),h=n("sl/w"),b=n("/gEt"),m=n("pKKv");const g=c.a.div.withConfig({displayName:"ProcessConsentPrompt__ConsentPromptWrapper",componentId:"s2qyig-0"})(["border-top:2px solid ",";"],d.f);class j extends i.Component{componentDidMount(){const{trackInteraction:e}=this.props;e("widget-interaction",{action:"view consent to process"})}render(){const{coloring:e,consentToProcess:t,closeConsentToProcess:n,consentToProcessError:r,consentToProcessMessage:a,dismissConsentToProcessError:i,showGdprConsentToProcessButton:o}=this.props;return Object(s.jsx)(g,{children:r?Object(s.jsx)(p.a,{title:Object(s.jsx)(h.a,{message:"conversations-visitor-ui.network.offline.title"}),onClose:i}):Object(s.jsx)(l.a,{showButton:o,message:a,onClick:t,onClose:n,coloring:e,queryParamsTestStr:Object(m.getTestStringFromQueryParams)(),isPortal53:Object(b.a)()})})}}j.displayName="ProcessConsentPrompt";j.propTypes={closeConsentToProcess:a.a.func,coloring:Object(u.a)("ColoringRecord"),consentToProcess:a.a.func,consentToProcessError:a.a.bool,consentToProcessMessage:a.a.string,dismissConsentToProcessError:a.a.func,showGdprConsentToProcessButton:a.a.bool,trackInteraction:a.a.func};t.a=j},"8Q5G":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));const s=(e,...t)=>{"function"==typeof e&&e(...t)}},"8cLO":function(e,t,n){"use strict";n.r(t);n.d(t,"gdprExplicitConsentRequired",(function(){return i}));var s=n("DdHT"),r=n("ZqFO"),a=n("VvTX");const i=Object(s.a)(r.f,a.getGdprExplicitConsentRequired)},"8f3s":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var s=n("ughT"),r=n("l6Ux"),a=n("p3n+");const i=e=>{if(!e)return null;const t=e.filter(r.isUploadCompleted).map(s.getFileId);return t.size?Object(a.a)({fileIds:t}):null}},"8g7g":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var s=n("ughT"),r=n("Ux+X"),a=n("BnUr"),i=n("jVj2");const o=({attachment:e,thread:t})=>n=>{const o=Object(a.getThreadId)(t),c=Object(s.getLocalId)(e);n(Object(i.removeAttachment)({localId:c,threadId:o}));n(Object(r.trackInteraction)("remove-staged-attachment",{action:"remove staged attachment"}))}},"90r9":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var s=n("dIvY"),r=n("CdQ/"),a=n("Ux+X");function i(){return e=>{Object(s.handleStoreMessagesCookie)(Object(r.getMessagesUtk)());e(Object(a.trackInteraction)("widget-interaction",{action:"clicked consent to cookies button"}))}}},"9C7g":function(e,t,n){"use strict";var s=n("QYOI"),r="<<anonymous>>",a={listOf:u,mapOf:h,orderedMapOf:b,setOf:m,orderedSetOf:g,stackOf:j,iterableOf:f,recordOf:O,shape:y,contains:y,mapContains:v,list:c("List",s.List.isList),map:c("Map",s.Map.isMap),orderedMap:c("OrderedMap",s.OrderedMap.isOrderedMap),set:c("Set",s.Set.isSet),orderedSet:c("OrderedSet",s.OrderedSet.isOrderedSet),stack:c("Stack",s.Stack.isStack),seq:c("Seq",s.Seq.isSeq),record:c("Record",(function(e){return e instanceof s.Record})),iterable:c("Iterable",s.Iterable.isIterable)};function i(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":e instanceof s.Iterable?"Immutable."+e.toSource().split(" ")[0]:t}function o(e){function t(t,n,s,a,i,o){for(var c=arguments.length,d=Array(c>6?c-6:0),l=6;l<c;l++)d[l-6]=arguments[l];o=o||s;a=a||r;return null!=n[s]?e.apply(void 0,[n,s,a,i,o].concat(d)):t?new Error("Required "+i+" `"+o+"` was not specified in `"+a+"`."):void 0}var n=t.bind(null,!1);n.isRequired=t.bind(null,!0);return n}function c(e,t){function n(n,s,r,a,o){var c=n[s];if(!t(c)){var d=i(c);return new Error("Invalid "+a+" `"+o+"` of type `"+d+"` supplied to `"+r+"`, expected `"+e+"`.")}return null}return o(n)}function d(e,t,n){function s(s,r,a,o,c){for(var d=arguments.length,l=Array(d>5?d-5:0),u=5;u<d;u++)l[u-5]=arguments[u];var p=s[r];if(!n(p)){var h=o,b=i(p);return new Error("Invalid "+h+" `"+c+"` of type `"+b+"` supplied to `"+a+"`, expected an Immutable.js "+t+".")}if("function"!=typeof e)return new Error("Invalid typeChecker supplied to `"+a+"` for propType `"+c+"`, expected a function.");for(var m=p.toArray(),g=0,j=m.length;g<j;g++){var f=e.apply(void 0,[m,g,a,o,c+"["+g+"]"].concat(l));if(f instanceof Error)return f}}return o(s)}function l(e){function t(t,n,s,r,a){for(var i=arguments.length,o=Array(i>5?i-5:0),c=5;c<i;c++)o[c-5]=arguments[c];var d=t[n];if("function"!=typeof e)return new Error("Invalid keysTypeChecker (optional second argument) supplied to `"+s+"` for propType `"+a+"`, expected a function.");for(var l=d.keySeq().toArray(),u=0,p=l.length;u<p;u++){var h=e.apply(void 0,[l,u,s,r,a+" -> key("+l[u]+")"].concat(o));if(h instanceof Error)return h}}return o(t)}function u(e){return d(e,"List",s.List.isList)}function p(e,t,n,s){function r(){for(var r=arguments.length,a=Array(r),i=0;i<r;i++)a[i]=arguments[i];return d(e,n,s).apply(void 0,a)||t&&l(t).apply(void 0,a)}return o(r)}function h(e,t){return p(e,t,"Map",s.Map.isMap)}function b(e,t){return p(e,t,"OrderedMap",s.OrderedMap.isOrderedMap)}function m(e){return d(e,"Set",s.Set.isSet)}function g(e){return d(e,"OrderedSet",s.OrderedSet.isOrderedSet)}function j(e){return d(e,"Stack",s.Stack.isStack)}function f(e){return d(e,"Iterable",s.Iterable.isIterable)}function O(e){function t(t,n,r,a,o){for(var c=arguments.length,d=Array(c>5?c-5:0),l=5;l<c;l++)d[l-5]=arguments[l];var u=t[n];if(!(u instanceof s.Record)){var p=i(u);return new Error("Invalid "+a+" `"+o+"` of type `"+p+"` supplied to `"+r+"`, expected an Immutable.js Record.")}for(var h in e){var b=e[h];if(b){var m=u.toObject(),g=b.apply(void 0,[m,h,r,a,o+"."+h].concat(d));if(g)return g}}}return o(t)}function x(e){var t=void 0===arguments[1]?"Iterable":arguments[1],n=void 0===arguments[2]?s.Iterable.isIterable:arguments[2];function r(s,r,a,o,c){for(var d=arguments.length,l=Array(d>5?d-5:0),u=5;u<d;u++)l[u-5]=arguments[u];var p=s[r];if(!n(p)){var h=i(p);return new Error("Invalid "+o+" `"+c+"` of type `"+h+"` supplied to `"+a+"`, expected an Immutable.js "+t+".")}var b=p.toObject();for(var m in e){var g=e[m];if(g){var j=g.apply(void 0,[b,m,a,o,c+"."+m].concat(l));if(j)return j}}}return o(r)}function y(e){return x(e)}function v(e){return x(e,"Map",s.Map.isMap)}e.exports=a},"9P7L":function(e,t,n){"use strict";n.r(t);n.d(t,"fetchAttachmentUploadUrlClient",(function(){return a}));var s=n("VYoM");const r="livechat-public/v1/attachment/upload-url",a=({sessionId:e,threadId:t})=>s.a.get(r,{query:{sessionId:e,threadId:t}})},"9d9s":function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var s=n("b9/n"),r=n("0GyJ"),a=n("KO+H"),i=n("GcWH"),o=n("V1/C"),c=n("6OYF"),d=n("tY0N"),l=n("K7Yy"),u=n("nguO");const p={ACTIVELY_PUBLISHING:u.a,COMMON_MESSAGE:r.a,DATE_MESSAGE:s.a,EMAIL_CAPTURE_PROMPT:a.a,FAILED_TO_PUBLISH:u.b,INITIAL_MESSAGE:i.a,OFFICE_HOURS:o.a,TYPICAL_RESPONSE_TIME:c.a,TYPING:d.a,FEEDBACK_SURVEY:l.a}},"9n7a":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var s=n("JGJA");const r=Object(s.a)("resolvedAttachments")},"A+8x":function(e,t,n){"use strict";var s=n("MBJP"),r=n("647q"),a=n("X9Pk"),i=n("2BFa"),o=n("JGJA");const c=Object(o.a)("cookieBannerOnExitVisible");var d=n("FFIQ");n.d(t,"a",(function(){return l}));const l=Object(s.a)([r.getLatestWidgetData,d.getHasMessagesCookieBeenSaved,a.getAPIEnableWidgetCookieBanner,c],(e,t,n,s)=>{const r=Object(i.gdprCookieConsentOnWidgetLoadEnabled)(e);return Boolean(n||r||s)&&!t})},AEyM:function(e,t,n){"use strict";n.r(t);n.d(t,"sendVisitorEmailAddressRequested",(function(){return h}));n.d(t,"sendVisitorEmailAddressFailed",(function(){return b}));n.d(t,"sendVisitorEmailAddressSucceeded",(function(){return m}));n.d(t,"sendVisitorEmailAddress",(function(){return g}));var s=n("Ut5p"),r=n("E6wg"),a=n("xZ3y"),i=n("sIRh"),o=n("z96q"),c=n("3OTY"),d=n("Ux+X"),l=n("c2PF"),u=n("081M"),p=n("BnUr");const h=Object(s.b)(a.SEND_VISITOR_EMAIL_ADDRESS,e=>({email:e})),b=Object(s.b)(a.SEND_VISITOR_EMAIL_ADDRESS_FAILED,e=>({error:e})),m=Object(s.b)(a.SEND_VISITOR_EMAIL_ADDRESS_SUCCEEDED,e=>({email:e}));function g({consentToCommunicate:e=!1,email:t,threadId:n}){return(s,a)=>{s(h(t));const g=Object(l.getThreadByThreadId)(a(),{threadId:n}),j=Object(p.getChannelName)(g),f=Object(r.getSessionId)(a()),O=Object(u.getHubspotUtk)(),x=()=>{s(m(t));s(Object(i.default)({channel:j,email:t,threadId:n}));e&&s(Object(c.d)(e));s(Object(d.trackInteraction)("widget-interaction",{action:"submit email"}));return{error:null}},y=e=>{s(b(e));return{error:e}};return o.sendVisitorEmailAddress({threadId:n,email:t,sessionId:f,hubspotUtk:O}).then(x,y)}}},Apky:function(e,t,n){"use strict";n.r(t);var s=n("p9k8"),r=n("19qb"),a=n("MBJP"),i=n("LgEy"),o=n("647q");const c=Object(a.a)([o.getLatestWidgetData],e=>Object(i.gdprConsentToProcessEnabled)(e));var d=n("A+8x"),l=n("lOT2"),u=n("k09d"),p=n("JoPj"),h=n("Wzl7"),b=n("zB5l"),m=n("vwA6"),g=n("V2EP"),j=n("3gKe");const f=e=>({shouldShowMeetingsLink:Object(b.a)(e),isThreadStarted:Object(s.a)(Object(u.a)(e)),requiresExplicitConsentToProcess:Object(l.a)(e),showingGdprProcess:c(e)&&!Object(j.getUserHasGivenConsentToProcess)(e),renderCookieConsentPrompt:Object(d.a)(e),showingHsBranding:Object(p.a)(e)}),O={toggleOnAndOffInputFocus:m.a,selectAttachmentFile:g.a};t.default=Object(r.connect)(f,O)(h.a)},BB3q:function(e,t,n){var s=n("QhUm");function r(e,t){var n=s(this,e),r=n.size;n.set(e,t);this.size+=n.size==r?0:1;return this}e.exports=r},"BW+T":function(e,t,n){var s=n("d1Q1"),r="Expected a function";function a(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(r);var n=function(){var s=arguments,r=t?t.apply(this,s):s[0],a=n.cache;if(a.has(r))return a.get(r);var i=e.apply(this,s);n.cache=a.set(r,i)||a;return i};n.cache=new(a.Cache||s);return n}a.Cache=s;e.exports=a},BYz9:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var s=n("Nnwm"),r=n("MeE7");const a=e=>Object(s.buildSenderLocator)(Object(r.getType)(e),Object(r.getId)(e))},CnAB:function(e,t,n){"use strict";n.d(t,"b",(function(){return o}));var s=n("+KD7"),r=n("Ktcs"),a=n("yCEM"),i=n("iDVC");const o={[a.b]:Object(i.a)(),[a.a]:Object(i.a)(),[a.c]:Object(i.a)({backgroundColor:s.c,borderColor:s.d,alignment:"flex-end"})},c=Object(r.createContext)(o);t.a=c},DOHQ:function(e,t,n){var s=n("8i16")["__core-js_shared__"];e.exports=s},Ec2D:function(e,t){e.exports="//static.hsappstatic.net/salesImages/static-1.446/messages/bot-avatar.svg"},EzJv:function(e,t,n){var s=n("RLxx"),r=n("ccWV"),a=n("Uz5A"),i=n("mMAp"),o=n("IrnW");function c(e){var t=-1,n=null==e?0:e.length;this.clear();for(;++t<n;){var s=e[t];this.set(s[0],s[1])}}c.prototype.clear=s;c.prototype.delete=r;c.prototype.get=a;c.prototype.has=i;c.prototype.set=o;e.exports=c},"FC+o":function(e,t,n){"use strict";n.d(t,"b",(function(){return s}));n.d(t,"e",(function(){return r}));n.d(t,"a",(function(){return a}));n.d(t,"d",(function(){return i}));n.d(t,"c",(function(){return o}));const s="NETWORK_OFFLINE",r="THREAD_HISTORY_FAILED",a="CREATE_NEW_THREAD_FAILED",i="SUBSCRIPTIONS_FAILED",o="PUBSUB_FAILED"},FJf1:function(e,t,n){"use strict";n.r(t);n.d(t,"trackSendMessage",(function(){return r}));var s=n("Ux+X");const r=({threadId:e})=>t=>{const n={};"number"==typeof e&&(n.threadId=e);t(Object(s.trackInteraction)("send-message",n))}},FPMu:function(e,t,n){"use strict";n.r(t);n.d(t,"shouldRecordImplicitConsentToProcess",(function(){return c}));var s=n("MBJP"),r=n("LgEy"),a=n("8cLO"),i=n("647q"),o=n("3gKe");const c=Object(s.a)([i.getLatestWidgetData,o.getUserHasGivenConsentToProcess],(e,t)=>Object(r.gdprConsentToProcessEnabled)(e)&&!Object(a.gdprExplicitConsentRequired)(e)&&!t)},GkNN:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var s=n("MBJP"),r=n("JGJA"),a=n("xePV"),i=n("BnUr"),o=n("BMD5");const c=Object(s.a)([a.a,o.a],(e,t)=>{const n=Object(i.getThreadId)(t);return Object(r.a)(n,e)||null})},IpNy:function(e,t,n){"use strict";var s=n("+KD7"),r=n("QYOI"),a=n("febS");var i=Object(r.Record)({width:"auto",minHeight:36,borderColor:s.h,whiteSpace:"normal",lineHeight:"1rem",color:s.h},"QuickReplyTheme");const o=Object(r.Record)({alignItems:"flex-start",avatarWidth:"32px",backgroundColor:s.l,borderColor:s.a,borderRadius:"4px",borderWidth:"1px",messageSpacing:"8px",textColor:s.r,fileAttachmentTheme:Object(a.a)(),quickReplyTheme:i(),headerBackgroundColor:s.s,headerTextColor:s.r,avatarBackgroundColor:s.a,avatarBorderColor:s.a,avatarTextColor:s.r},"Theme");t.a=o},IqZ3:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var s=n("Ut5p"),r=n("OIId");const a=Object(s.b)(r.e,e=>({threadId:e}))},IrnW:function(e,t,n){var s=n("LPlp");function r(e,t){var n=this.__data__,r=s(n,e);if(r<0){++this.size;n.push([e,t])}else n[r][1]=t;return this}e.exports=r},Isoj:function(e,t,n){"use strict";var s=n("QgEn"),r=n("19qb"),a=n("VfuR"),i=n.n(a),o=n("npjq"),c=n("Ktcs"),d=n("9f1P"),l=n.n(d),u=n("QGYt"),p=n("sl/w"),h=n("HtM0"),b=n("gFbD"),m=n("A2+2"),g=n("Kcjm"),j=n("fzij");const f=l.a.div.withConfig({displayName:"ConsentModal__ConsentModalContainer",componentId:"sc-1wpzaja-0"})(["position:absolute;display:flex;align-items:flex-start;justify-content:center;height:calc(100% - ","px);top:","px;width:100%;background-color:rgba(45,62,80,0.79);backdrop-filter:blur(2px);padding-top:20%;border-bottom-left-radius:","px;border-bottom-right-radius:","px;overflow-y:hidden;"],g.d,g.d,m.a,m.a),O=l.a.div.withConfig({displayName:"ConsentModal__ContentContainer",componentId:"sc-1wpzaja-1"})(["display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;padding:12px 24px;background-color:white;border-radius:3px;box-shadow:0 2px 4px -1px rgba(0,0,0,0.75);margin:0 20px;"]),x=l()(j.a).withConfig({displayName:"ConsentModal__SmallNoParagraphPadding",componentId:"sc-1wpzaja-2"})(["display:block;word-break:break-word;word-wrap:break-word;-ms-word-break:break-all;p{margin-bottom:0;}"]),y=l()(u.a).withConfig({displayName:"ConsentModal__FullWidthButton",componentId:"sc-1wpzaja-3"})(["padding:9px 16px;flex:0 1 100%;&:not(:first-child){margin-left:8px;}"]),v=l.a.div.withConfig({displayName:"ConsentModal__ButtonsContainer",componentId:"sc-1wpzaja-4"})(["display:flex;flex-direction:row;margin:12px 0 0 0;width:100%;"]),C=l.a.p.withConfig({displayName:"ConsentModal__Header",componentId:"sc-1wpzaja-5"})(["text-transform:none;font-size:18px;font-weight:500;margin-top:18px;margin-bottom:12px;line-height:normal;"]),I=({headerMessage:e,message:t,onClick:n,onDeclineClick:r})=>{const[a,i]=Object(c.useState)({isEntering:!0,shouldRender:!0,callback:()=>{}}),o=()=>{if(!a.isEntering){a.callback();i(Object.assign({},a,{shouldRender:!1}))}},d=e=>{i(Object.assign({},a,{isEntering:!1,callback:e}))};return a.shouldRender?Object(s.jsx)(f,{style:{animation:(a.isEntering?"consent-modal-background-fadeIn":"consent-modal-background-fadeOut")+" .3s"},"data-test-id":"gdpr-consent-prompt-container",onAnimationEnd:o,children:Object(s.jsx)(b.a,{children:i=>Object(s.jsxs)(O,{"data-test-id":"gdpr-consent-prompt",style:{animation:(a.isEntering?"consent-modal-content-fadeIn":"consent-modal-content-fadeOut")+" .3s"},children:[e&&Object(s.jsx)(C,{children:e}),Object(s.jsx)(x,{use:"help",role:"document",tabIndex:0,"data-test-id":"gdpr-consent-text",dangerouslySetInnerHTML:{__html:Object(h.a)(t)}}),Object(s.jsxs)(v,{children:[Object(s.jsx)(y,{onClick:()=>{d(n)},"data-test-id":"gdpr-consent-agree-button",use:"primary",children:Object(s.jsx)(p.a,{message:"conversations-visitor-experience-components.buttons.agree",options:{locale:i}})}),Object(s.jsx)(y,{onClick:()=>{d(r)},"data-test-id":"gdpr-consent-dismiss-button",children:Object(s.jsx)(p.a,{message:"conversations-visitor-experience-components.buttons.disagree",options:{locale:i}})})]})]},"consent-modal-content-container")})},Math.random+"-consent-modal-container"):null};I.defaultProps={animationTimeMs:300,onClick:()=>{},onDeclineClick:()=>{}};I.propTypes={headerMessage:i.a.node,message:i.a.string.isRequired,onClick:i.a.func.isRequired,onDeclineClick:i.a.func.isRequired};I.displayName="ConsentModal";var T=I,w=n("0IL2"),S=n("Ux+X"),k=n("90r9"),R=n("iatO"),A=n("2BFa"),E=n("VTHq");function P(){return(e,t)=>{(Object(A.gdprCookieConsentOnExitIntentEnabled)(t())||Object(E.getAPIEnableWidgetCookieBannerOnExitIntent)(t()))&&e(Object(R.a)(!1));e(Object(S.trackInteraction)("widget-interaction",{action:"clicked decline cookies button"}))}}var M=n("AQmo"),N=n("mKxs"),_=n("647q"),F=n("X9Pk");class q extends c.Component{componentDidMount(){const{trackInteraction:e}=this.props;e("widget-interaction",{action:"view consent to cookies"})}render(){return Object(s.jsx)(b.a,{children:e=>this.props.isExitIntentPrompt?Object(s.jsx)(T,{headerMessage:Object(s.jsx)(p.a,{message:"conversations-visitor-ui.gdpr.consentToCookies.promptHeader",options:{locale:e}}),message:o.a.text("conversations-visitor-ui.gdpr.consentToCookies.exitIntentCookieConsent",{locale:e}),onDeclineClick:this.props.declineCookies,onClick:this.props.consentToCookies,coloring:this.props.coloring}):Object(s.jsx)(w.a,{message:o.a.text("conversations-visitor-ui.gdpr.consentToCookies.pageLoadCookieConsent",{locale:e}),onDeclineClick:this.props.declineCookies,onClick:this.props.consentToCookies,coloring:this.props.coloring,showButton:!0})})}}q.displayName="CookieConsentPrompt";q.propTypes={coloring:Object(N.a)("ColoringRecord"),consentToCookies:i.a.func.isRequired,declineCookies:i.a.func.isRequired,isExitIntentPrompt:i.a.bool.isRequired,trackInteraction:i.a.func.isRequired};const L={consentToCookies:k.a,declineCookies:P,trackInteraction:S.trackInteraction},D=e=>({coloring:Object(M.a)(e),widgetData:Object(_.getLatestWidgetData)(e),isExitIntentPrompt:Object(A.gdprCookieConsentOnExitIntentEnabled)(e)&&!Object(F.getAPIEnableWidgetCookieBanner)(e)});t.a=Object(r.connect)(D,L)(q)},JIa2:function(e,t,n){"use strict";n.r(t);n.d(t,"createFormDataForAttachment",(function(){return s}));const s=({file:e})=>{const t=new FormData;t.append("file",e);return t}},JWgK:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var s=n("MBJP"),r=n("jM00"),a=n("byjC"),i=n("80AS"),o=n("S055");const c=Object(s.a)([i.a,r.a,a.a,o.a],(e,t,n,s)=>!(!e&&n||s)&&(!t||!t.size))},JoPj:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var s=n("JGJA"),r=n("MBJP"),a=n("647q");const i=Object(r.a)(a.getLatestWidgetData,Object(s.a)("showingHsBranding"))},KLi6:function(e,t,n){var s=n("uQvf"),r="__lodash_hash_undefined__";function a(e,t){var n=this.__data__;this.size+=this.has(e)?0:1;n[e]=s&&void 0===t?r:t;return this}e.exports=a},KSjU:function(e,t,n){"use strict";var s=n("MJM1");t.a=Object(s.a)(["meetingsLinkUrl"])},LPlp:function(e,t,n){var s=n("+a0K");function r(e,t){for(var n=e.length;n--;)if(s(e[n][0],t))return n;return-1}e.exports=r},LdnN:function(e,t,n){"use strict";var s=n("EuUD");const r="\\.",a='\\s\\?\\#\\/\\(\\)\\=\\:\\;\\@\\\\"'+r,i=`(?:www${r})`,o="(?:[%a-zA-Z0-9_-]+)",c="(?:(?:\\.[%a-zA-Z0-9-]+)[^\\.\\s])",d="\\s\\?\\#\\&";var l=new RegExp(`^(?:.+)@${{www:i,domain:`${i}?(?:(?:[^${a}]+)${r})+(?:[^${a}]+)`,protocol:"(?:(?:https?:)?\\/\\/)",protocolRequired:"(?:https?:\\/\\/)",path:"(?:(?:\\/[^\\s\\/\\#\\&\\?]*)+\\/?)",wildcardPath:"(?:(/(?:[%a-zA-Z0-9_-])*?)*(?:/[\\*]))",file:`${o}${c}`,fileName:o,fileExtension:c,search:`(?:([\\?&#][^${d}]*?=?([^${d}]*))+)`,ungroupedSearch:`(?:(?:[\\?&#][^${d}]*?=?(?:[^${d}]*))+)`}.domain}$`);t.a=Object(s.a)({name:"EmailAddress",validator:e=>l.test(e)})},LgEy:function(e,t,n){"use strict";n.r(t);n.d(t,"gdprConsentToProcessEnabled",(function(){return i}));var s=n("DdHT"),r=n("ZqFO"),a=n("VvTX");const i=Object(s.a)(r.f,a.getGdprConsentToProcessEnabled)},Nnwm:function(e,t,n){"use strict";n.r(t);var s=n("Mx3c"),r=n("QYOI"),a=Object(r.Record)({senderId:null,senderType:null},"SenderLocator");n.d(t,"buildSenderLocator",(function(){return o}));const i=[s.AGENT,s.BOT,s.SYSTEM,s.VISITOR,s.INTEGRATOR],o=(e,t)=>{i.includes(e)||console.warn(`buildSenderLocator received invalid sender type ${e} expected one of: ${i}`);return a({senderType:e,senderId:t?""+t:null})}},OI0Z:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var s=n("xA3K"),r=n("QgEn"),a=n("Ktcs"),i=n("VfuR"),o=n.n(i),c=n("npjq");class d extends a.Component{render(){const e=this.props,{value:t}=e,n=Object(s.a)(e,["value"]);return Object(r.jsx)("span",{children:c.a.formatSize(t,n)})}}d.displayName="FormattedSize";d.propTypes={value:o.a.number.isRequired}},OhTC:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var s=n("JGJA");const r=Object(s.a)("fileUploads")},OoDT:function(e,t,n){"use strict";var s=n("QgEn"),r=n("VfuR"),a=n.n(r),i=n("Ktcs"),o=n("qjq5"),c=n("scKg");function d(e){if("number"==typeof e&&e>=0)return e;throw new Error(`expected \`interval\` to be a positive number but got \`${e}\``)}function l(e,t){d(e);Object(c.a)(t);let n,s,r=0,a=null;function i(){if(null!==a){clearTimeout(a);a=null}}function o(){r=Date.now();s=t(...n)}function l(...t){n=t;i();Date.now()-r>=e?o():a=setTimeout(o,e);return s}l.cancel=i;return l}var u=Object(o.a)(l);const p=100,h=e=>{try{return e[0].contentBoxSize[0].blockSize||0}catch(e){return 0}};class b extends i.PureComponent{constructor(e){super(e);this.state={inTop:!0,inBottom:!0,height:0,distanceToBottom:0,shouldKeepAtBottom:!0,previousContentHeight:0};this.scrollContainer=Object(i.createRef)();this.scrollContent=Object(i.createRef)();const t=e=>{const t=h(e);this.state.previousContentHeight<t&&this.inThreshold().inTop&&this.props.onScrollToTop();this.setState({previousContentHeight:t})};t.bind(this);this.contentResizeObserver=new ResizeObserver(t);this.onResize=u(p,this.onResize.bind(this));this.onScroll=u(p,this.onScroll.bind(this))}componentDidMount(){const{current:e}=this.scrollContent;if(e){this.setState({height:e.clientHeight});this.scrollToBottom();this.contentResizeObserver.observe(e)}window.addEventListener("resize",this.onResize,{passive:!0})}getSnapshotBeforeUpdate(){const{current:e}=this.scrollContainer;return e?{prevScrollTop:this.getScrollDistanceFromTop()}:null}componentDidUpdate(e,t,n){const{current:s}=this.scrollContainer;if(!n||!s)return;if(this.state.shouldKeepAtBottom){this.scrollToBottom();return}if(0===this.state.distanceToBottom){this.setState({shouldKeepAtBottom:!0});return}const{prevScrollTop:r}=n,a=this.getScrollDistanceFromTop();a===r&&t.height>this.state.height&&this.setScrollTop(a+(t.height-this.state.height))}componentWillUnmount(){this.contentResizeObserver.disconnect();window.removeEventListener("resize",this.onResize)}getScrollDistanceFromTop(){const{current:e}=this.scrollContainer,{current:t}=this.scrollContent,n=e.scrollHeight-t.clientHeight;return e.scrollTop-n}onScroll(){const{onScrollToTop:e,onScrollFromBottom:t,onScrollToBottom:n}=this.props;if(!this.scrollContainer.current||!this.scrollContent.current)return;const{inTop:s,inBottom:r}=this.inThreshold();!this.state.inTop&&s&&e();!this.state.inBottom&&r&&n();this.state.inBottom&&!r&&t();const a=this.getScrollDistanceFromBottom();this.setState({inTop:s,inBottom:r,distanceToBottom:a,shouldKeepAtBottom:!1})}inThreshold(){const{topThreshold:e,bottomThreshold:t}=this.props;return{inTop:this.getScrollDistanceFromTop()<=e,inBottom:this.getScrollDistanceFromBottom()<=t}}getScrollDistanceFromBottom(){const{current:e}=this.scrollContainer;if(!e)return 0;const{scrollTop:t,scrollHeight:n,clientHeight:s,offsetHeight:r}=e;return n-(s||r)-t}scrollToBottom(){const{current:e}=this.scrollContainer;e&&this.setScrollTop(e.scrollHeight);this.setState({shouldKeepAtBottom:!0})}setScrollTop(e){const{current:t}=this.scrollContainer;t&&(t.scrollTop=e||0)}onResize(){const{current:e}=this.scrollContent;e&&this.setState({height:e.clientHeight||0})}render(){const{children:e,className:t,stickToTop:n}=this.props;return Object(s.jsxs)("div",{className:t,style:{flexGrow:1},onScroll:this.onScroll,ref:this.scrollContainer,children:[n,Object(s.jsx)("div",{ref:this.scrollContent,children:e})]})}}b.displayName="ScrollWrapper";b.propTypes={bottomThreshold:a.a.number.isRequired,children:a.a.node,className:a.a.string,onScrollFromBottom:a.a.func.isRequired,onScrollToBottom:a.a.func.isRequired,onScrollToTop:a.a.func.isRequired,stickToTop:a.a.node,topThreshold:a.a.number.isRequired};const m=()=>{};b.defaultProps={bottomThreshold:300,onScrollFromBottom:m,onScrollToBottom:m,onScrollToTop:m,topThreshold:300};var g=b,j=n("c89E");const f=e=>document.querySelector(`[${j.a}="${e}"]`);var O=n("Gc2C");const x=(e,t)=>{for(const n of t)Object(O.a)(!!e.prototype[n],"Component missing required function %s",n)},y=()=>{const e=document.querySelector(`[${j.a}]:last-child`);return e&&e.getAttribute?e.getAttribute(j.a):null},v=e=>{const t=y();if(!e||!t)return null;const n=f(t);if(!n)return null;const s=e.getScrollDistanceFromTop(),{offsetTop:r}=n;return{lastMessageId:t,lastMessageOffsetTop:r,prevScrollTop:s}},C=300,I=()=>(e,{alignment:t}={alignment:"start"})=>{const n=f(e);e&&n&&n.scrollIntoView&&n.scrollIntoView("start"===t)},T=({scrollWrapperRef:e})=>()=>{const t=e.current;t&&t.scrollToBottom()},w=({scrollWrapperRef:e})=>({threshold:t=C}={})=>{const n=e.current;n&&n.state&&(e.current.state.distanceToBottom<=t||n.getScrollDistanceFromBottom()<=t)&&n.scrollToBottom()},S=e=>{const t=e.current;return{lastMessageId:t.lastMessageId,lastMessageOffsetTop:t.lastMessageOffsetTop,prevScrollTop:t.prevScrollTop}},k=e=>{x(e,["getScrollDistanceFromTop","getScrollDistanceFromBottom","setScrollTop","scrollToBottom"]);const t=Object(i.forwardRef)((e,t)=>{const n=Object(i.useRef)(),r=Object(i.useRef)();t.current={scrollToMessage:I(),scrollToBottom:T({scrollWrapperRef:n}),scrollToBottomIfInThreshold:w({scrollWrapperRef:n})};const a=Object(i.useRef)(!0);Object(i.useLayoutEffect)(()=>{const e=n.current;if(a.current){r.current=v(e);a.current=!1;return}if(!r.current)return;const{lastMessageId:t,lastMessageOffsetTop:s,prevScrollTop:i}=S(r);r.current=v(e);if(e.getScrollDistanceFromTop()!==i)return;const o=f(t);if(!o||!o.offsetTop)return;const c=o.offsetTop-s;c&&e.setScrollTop(e.getScrollDistanceFromTop()+c)});return Object(s.jsx)(g,Object.assign({ref:n},e))});t.displayName="WithScrollTo";return t};var R=n("mKxs"),A=n("021p"),E=n("kWFB"),P=n("9f1P"),M=n.n(P),N=n("uax2"),_=n("t6nY"),F=n.n(_),q=n("Xcjc"),L=n("R1eS");const D=M()(N.a).withConfig({displayName:"ThreadHistoryFetcher__LoadingSpinnerWrapper",componentId:"mpap2q-0"})(["height:0;margin-top:20px;"]),B=M()(k(g)).withConfig({displayName:"ThreadHistoryFetcher__ScrollToWrapper",componentId:"mpap2q-1"})(["flex:1 1;display:flex;flex-direction:column;align-self:stretch;overflow-y:scroll;overflow-x:hidden;"]);class U extends i.PureComponent{constructor(e){super(e);this.scrollWrapper=Object(i.createRef)();this.fetchHistory=this.fetchHistory.bind(this)}componentDidMount(){const{current:e}=this.scrollWrapper;e&&e.scrollToBottom();this.fetchHistory()}componentDidUpdate(e){const{threadId:t,messageCount:n,shouldScrollToBottom:s,isOnFocus:r}=this.props,{threadId:a,messageCount:i,shouldScrollToBottom:o,isOnFocus:c}=e,{current:d}=this.scrollWrapper;if(t===a)if(i){n!==i&&d&&d.scrollToBottomIfInThreshold();s!==o&&d&&d.scrollToBottomIfInThreshold();r!==c&&d&&d.scrollToBottomIfInThreshold()}else d&&d.scrollToBottom();else{this.fetchHistory();d&&d.scrollToBottom()}}fetchHistory(){const{fetchThreadHistory:e,threadId:t,threadHistory:n,sessionId:s}=this.props;t!==q.a&&e({offsetOrdinal:Object(A.c)(n),offsetTimestamp:Object(A.d)(n),threadId:t,sessionId:s})}render(){const{children:e,isLoadingHistory:t,loadingHistoryFailed:n,threadId:r,threadHistory:a}=this.props;if(t&&!Object(E.hasMessages)(a))return Object(s.jsx)(N.a,{grow:!0});if(n&&!Object(E.hasMessages)(a))return Object(s.jsx)(L.a,{});const i=F()(this.props.className,"messages-scroll-container-utv");return Object(s.jsx)(B,{className:i,ref:this.scrollWrapper,onScrollToTop:this.fetchHistory,stickToTop:t&&Object(s.jsx)(D,{grow:!0}),children:e},r)}}U.propTypes={children:a.a.node.isRequired,className:a.a.string,fetchThreadHistory:a.a.func.isRequired,isLoadingHistory:a.a.bool,isOnFocus:a.a.bool.isRequired,loadingHistoryFailed:a.a.bool,messageCount:a.a.number.isRequired,sessionId:a.a.string.isRequired,shouldScrollToBottom:a.a.bool.isRequired,threadHistory:Object(R.a)("ThreadHistory"),threadId:a.a.number.isRequired};U.displayName="ThreadHistoryFetcher";t.a=U},P5SP:function(e,t,n){"use strict";n.r(t);var s=n("MBJP"),r=n("c2PF"),a=n("lTxV");const i=Object(s.a)([r.getThreadByThreadId],a.a);var o=n("V0XL");n.d(t,"shouldRecordUrlContextUpdate",(function(){return c}));const c=Object(s.a)([i,o.getMessagesPageUri],(e,t)=>e!==t)},PY3R:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var s=n("sZZm"),r=n("tek+"),a=n("6WMu");const i=({thread:e})=>{Object(s.postExternalApiEvent)({eventType:r.c,payload:{conversation:Object(a.serializeThreadForExternalEvent)(e)}})}},PYok:function(e,t,n){"use strict";n.d(t,"a",(function(){return E}));var s=n("BnUr"),r=n("31tl"),a=n("LdnN"),i=n("5rZi"),o=n("6PLn"),c=n("4SpI"),d=n("2gT5"),l=n("IqZ3"),u=n("k09d"),p=n("FJf1"),h=n("UxS0"),b=n("tbpt"),m=n("V0XL"),g=n("P5SP"),j=n("wy0V"),f=n("AEyM"),O=n("SbeA"),x=n("CdQ/"),y=n("gD8A"),v=n("E6wg"),C=n("Xcjc"),I=n("0U0A"),T=n("yDuE"),w=n("JGJA"),S=n("Zui/"),k=n("pdIa");const R=()=>(e,t)=>{const n=Object(u.a)(t()),r=Object(m.getMessagesPageUri)(t()),a=Object(s.getThreadId)(n);return Object(g.shouldRecordUrlContextUpdate)(t(),{threadId:a})&&a!==C.a?Object(y.updateVisitorContext)({currentUrl:r,sessionId:Object(v.getSessionId)(t()),threadId:a}).then(()=>{e(Object(j.a)({threadId:a,currentUrl:r}))}).catch(()=>Promise.resolve()):Promise.resolve()},A=({text:e,richText:t,quickReply:n,fileAttachment:m})=>(g,j)=>{const y=Object(u.a)(j()),v=Object(d.isPersistedThread)(y),C=Object(s.getChannelName)(y),w=Object(s.getThreadId)(y),S=Object(x.getMessagesUtk)(),k=v?Object(T.getChannelInstanceIdFromCurrentThreadHistory)(j(),w):Object(I.getChannelInstanceId)(j()),R=Object(h.buildVisitorCommonMessage)({channelInstanceId:k,clientType:r.a,fileAttachment:m,quickReply:n,richText:t,senderId:S,text:e});g(Object(l.a)(w));g(Object(p.trackSendMessage)({threadId:w}));if(!v){g(Object(b.stageMessageOnStubbedThread)(R));return g(Object(i.createNewThread)())}Object(O.getMostRecentMessageIsEmailPrompt)(j())&&a.a.test(e)&&g(Object(f.sendVisitorEmailAddress)({email:e,consentToCommunicate:!1,threadId:w}));return g(Object(c.publishMessage)({channel:C,message:R,threadId:w})).then(()=>g(Object(o.applyGdprConsent)()))};function E({text:e,richText:t,quickReply:n,fileAttachment:s}){return r=>r(R()).then(()=>{r(A({text:e,richText:t,quickReply:n,fileAttachment:s}));n&&Object(w.a)("@type",n)===S.i&&Object(k.a)(n)})}},Q2fA:function(e,t,n){"use strict";var s=n("MBJP"),r=n("qjq5"),a=n("AaWM"),i=Object(r.a)(a.a),o=n("JGJA"),c=n("Avso"),d=n("RyNb"),l=n("ncoD"),u=n("SfUm");n.d(t,"a",(function(){return p}));const p=Object(s.a)([u.a,l.getAllAgentResponders,d.a],(e,t,n)=>{const s=Object(c.getUserId)(n);return Object(o.a)(s,e)?n:t&&t.find(t=>{const n=Object(c.getUserId)(t);return i(n,e)})})},QG41:function(e,t,n){var s=n("uQvf");function r(){this.__data__=s?s(null):{};this.size=0}e.exports=r},QGYt:function(e,t,n){"use strict";var s=n("xA3K"),r=n("QgEn"),a=n("VfuR"),i=n.n(a),o=n("9f1P"),c=n.n(o),d=n("7719"),l=n("CR0J"),u=n("Z/Dw"),p=n("aXPX"),h=n("0wen"),b=n("W/H/"),m=n("wjRl"),g=n("rdz/");const j={baseStyle:Object(o.css)(["padding:",";font-size:",";flex-shrink:0;border-radius:3px;line-height:16px;outline:none;transition:background-color 150ms ease-out;border-style:solid;border-width:1px;cursor:pointer;text-align:center;word-break:normal;overflow-wrap:break-word;background-color:transparent;",""],({size:e})=>p.b[e],({size:e})=>p.a[e],({theme:e,use:t})=>"primary"===t?`\n          background-color: ${e.primary};\n          border: none;\n          color: ${e.textOnPrimary};\n        `:`\n          background-color: transparent;\n          border-color: ${e.primary};\n          color: ${e.primary};\n        `),_disabled:Object(o.css)(["background-color:",";border:none;color:",";cursor:not-allowed;user-select:none;"],({theme:e})=>e.disabledBackground,({theme:e})=>e.disabledText),_focused:m.a,_hovered:Object(o.css)(["",""],({theme:e,use:t})=>`background-color: ${Object(g.a)(e.primary,"primary"===t?20:95)};`),_pressed:Object(o.css)(["",""],({theme:e,use:t})=>`background-color: ${Object(g.a)(e.primary,"primary"===t?-10:90)};`)},f={use:h.SECONDARY,size:d.e},O=c.a.button.withConfig({displayName:"VizExButton__AbstractVizExButton",componentId:"sc-1vd0x19-0"})(["",""],({theme:e})=>Object(b.a)({component:"Button",defaultStyles:j,theme:e})),x=c.a.div.withConfig({displayName:"VizExButton__NoSelect",componentId:"sc-1vd0x19-1"})(["user-select:none;"]),y=e=>{const{children:t}=e,n=Object(s.a)(e,["children"]);return Object(r.jsx)(O,Object.assign({},n,{children:Object(r.jsx)(x,{children:t})}))};y.displayName="VizExButton";y.propTypes=Object.assign({children:i.a.node,onClick:i.a.func,size:i.a.oneOf(Object.keys(p.c)),theme:l.a,use:i.a.oneOf(Object.values(h))},u.a);y.defaultProps=f;t.a=y},QVIP:function(e,t){var n=Function.prototype.toString;function s(e){if(null!=e){try{return n.call(e)}catch(e){}try{return e+""}catch(e){}}return""}e.exports=s},Qf6G:function(e,t,n){"use strict";n.r(t);n.d(t,"clickedConsentToProcess",(function(){return m}));n.d(t,"consentToProcessSucceeded",(function(){return g}));n.d(t,"consentToProcessFailed",(function(){return j}));n.d(t,"consentToProcess",(function(){return f}));var s=n("Ut5p"),r=n("KrP/"),a=n("E6wg"),i=n("wn0x"),o=n("uk/S"),c=n("dIvY"),d=n("2BFa"),l=n("k3iI"),u=n("081M"),p=n("Ux+X"),h=n("647q"),b=n("CdQ/");const m=Object(s.b)(r.d),g=Object(s.b)(r.g),j=Object(s.b)(r.f,({error:e})=>({error:e}));function f(){return(e,t)=>{const n=Object(a.getSessionId)(t()),s=Object(i.getMessageId)(t()),r=Object(u.getHubspotUtk)(),f=Object(h.getLatestWidgetData)(t());e(m());Object(o.sendConsentToProcess)({sessionId:n,hubspotUtk:r,welcomeMessageId:s,widgetData:f}).then(n=>{const{sessionId:s}=n,r=Object(d.gdprCookieConsentOnExitIntentEnabled)(t(),f);try{localStorage.setItem("userHasGivenConsentToProcess",!0)}catch(e){console.warn("local storage not set!")}r||Object(c.handleStoreMessagesCookie)(Object(b.getMessagesUtk)());e(Object(l.updateSessionId)(s));e(g());e(Object(p.trackInteraction)("widget-interaction",{action:"clicked consent to process button"}))},t=>e(j({error:t}))).catch(e=>{setTimeout(()=>{throw e})})}}},QhUm:function(e,t,n){var s=n("xP7N");function r(e,t){var n=e.__data__;return s(t)?n["string"==typeof t?"string":"hash"]:n.map}e.exports=r},R1eS:function(e,t,n){"use strict";var s=n("QgEn"),r=n("9f1P"),a=n.n(r),i=n("sl/w");const o=a.a.div.withConfig({displayName:"ErrorState__ErrorWrapper",componentId:"sc-9n3cba-0"})(["display:flex;justify-content:center;align-items:center;height:100%;flex-direction:column;"]),c=()=>Object(s.jsxs)(o,{children:[Object(s.jsx)("h5",{children:Object(s.jsx)(i.a,{message:"conversations-visitor-ui.asyncError.body"})}),Object(s.jsx)("div",{className:"m-top-3",children:Object(s.jsx)(i.a,{message:"conversations-visitor-ui.asyncError.noRetry"})})]});c.displayName="ErrorState";var d=c;const l=a.a.div.withConfig({displayName:"ThreadHistoryError__ThreadHistoryErrorWrapper",componentId:"eons6g-0"})(["text-align:center;flex-grow:1;"]),u=()=>Object(s.jsx)(l,{children:Object(s.jsx)(d,{})});u.displayName="ThreadHistoryError";t.a=u},"R4/u":function(e,t,n){"use strict";n.d(t,"b",(function(){return r}));n.d(t,"a",(function(){return a}));var s=n("0GGv");function r(){return(e,t)=>{Object(s.a)(t())||window.newrelic&&window.newrelic.addPageAction&&window.newrelic.setCustomAttribute&&window.newrelic.addPageAction("threadCreatedInWidget",{actionAttribute:"createdThreadInhWidget"})}}function a(){return(e,t)=>{Object(s.a)(t())||window.newrelic&&window.newrelic.addPageAction&&window.newrelic.setCustomAttribute&&window.newrelic.addPageAction("fileAttachedToWidget",{actionAttribute:"attachedFileToWidget"})}}},RLxx:function(e,t){function n(){this.__data__=[];this.size=0}e.exports=n},S055:function(e,t,n){"use strict";var s=n("MBJP"),r=n("MJM1");const a=Object(r.a)(["isAttachmentDisabled"]);var i=n("QnHA");n.d(t,"a",(function(){return o}));const o=Object(s.a)([i.a],e=>a(e))},SbeA:function(e,t,n){"use strict";n.r(t);n.d(t,"getMostRecentMessageIsEmailPrompt",(function(){return o}));var s=n("MBJP"),r=n("4nf7"),a=n("0IK8"),i=n("KO+H");const o=Object(s.a)([r.a],e=>Object(a.getType)(e.last())===i.a)},SfUm:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var s=n("QYOI"),r=n("MBJP"),a=n("JGJA"),i=n("BnUr"),o=n("BMD5"),c=n("6T8d");const d=Object(r.a)([o.a,c.typingStates],(e,t)=>{const n=Object(i.getThreadId)(e);return Object(a.a)(""+n,t)||Object(s.Map)()})},Syy6:function(e,t,n){var s=n("9Utk"),r=n("kmmH"),a="Expected a function";function i(e,t,n){var i=!0,o=!0;if("function"!=typeof e)throw new TypeError(a);if(r(n)){i="leading"in n?!!n.leading:i;o="trailing"in n?!!n.trailing:o}return s(e,t,{leading:i,maxWait:t,trailing:o})}e.exports=i},TXBG:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var s=n("KXN9"),r=n("Pda3"),a=n("x1JE"),i=n("QYOI"),o=n("MBJP"),c=n("bYG+"),d=n("9n7a");const l=Object(o.a)([d.a],e=>e&&Object(a.getEntries)(e).size?Object(a.getEntries)(e).reduce((e,t,n)=>t&&n&&Object(r.isSucceeded)(t)?Object(c.a)(String(n),Object(s.a)(t),e):e,Object(i.Map)()):Object(i.Map)())},UxS0:function(e,t,n){"use strict";n.r(t);n.d(t,"buildVisitorCommonMessage",(function(){return m}));var s=n("QYOI"),r=n("Mx3c"),a=n("6d8N"),i=n("cPs9"),o=n("bWKF"),c=n("BvOu"),d=n("v0wH"),l=n("WebA"),u=n("kqCt"),p=n("rf4d"),h=n("OxGf"),b=n("0G/n");const m=({channelInstanceId:e,clientType:t,fileAttachment:n,quickReply:m,richText:g,senderId:j,text:f})=>{const O=Object(o.b)(r.VISITOR),x=Object(i.a)(O),y=[],v={type:b.a,value:j},C=Object(u.a)({deliveryIdentifier:v}),I=Object(s.List)([C]);n&&y.push(n);m&&y.push(new a.a(m));return Object(l.buildCommonMessage)({status:{messageStatus:d.b},clientType:t,attachments:y,text:f,richText:g,id:Object(c.generateUuid)(),sender:{"@type":O,[x]:j},senders:I,channelInstanceId:e,genericChannelId:p.d,direction:h.a})}},Uz5A:function(e,t,n){var s=n("LPlp");function r(e){var t=this.__data__,n=s(t,e);return n<0?void 0:t[n][1]}e.exports=r},V2EP:function(e,t,n){"use strict";var s=n("ejMo"),r=n("Ux+X"),a=n("Zn4N");const i=e=>{switch(e){case a.b:return"size limit exceeded";default:return null}};var o=n("Wnz4"),c=n("BnUr"),d=n("5N3d"),l=n("84zR");n.d(t,"a",(function(){return u}));const u=({file:e,thread:t})=>n=>{const a=Object(c.getThreadId)(t);return Object(d.validateAttachmentFile)(e).then(()=>{const t=new s.a({file:e,progress:0});return n(Object(l.uploadAttachment)({attachment:t,threadId:a}))}).catch(e=>{n(Object(o.attachmentError)(e,a));n(Object(r.trackInteraction)("failed-to-attach-file",{action:"failed to attach file","failure-type":i(e)}))})}},VXRw:function(e,t,n){"use strict";n.r(t);n.d(t,"attachmentUploadStart",(function(){return a}));var s=n("Ut5p"),r=n("OIId");const a=Object(s.b)(r.d,({attachment:e,threadId:t})=>({attachment:e,threadId:t}))},Vsm7:function(e,t,n){var s=n("QhUm");function r(e){return s(this,e).get(e)}e.exports=r},VuFk:function(e,t,n){"use strict";var s=n("nDpY"),r=n.n(s),a=n("19qb"),i=n("QgEn"),o=n("QYOI"),c=n("VfuR"),d=n.n(c),l=n("Ktcs"),u=n("9f1P"),p=n.n(u),h=n("0IK8"),b=n("+KD7"),m=n("yCEM"),g=n("IpNy");const j={[m.b]:Object(g.a)(),[m.a]:Object(g.a)(),[m.c]:Object(g.a)({backgroundColor:b.c,borderColor:b.d})};var f=Object(l.createContext)(j),O=n("Ydwr"),x=n("6OYF"),y=n("wL7V"),v=n("0GyJ"),C=n("tY0N");const I=(e,t)=>{const n=h.getSenderId,s=h.getSenderType;return n(e)===n(t)&&s(e)===s(t)},T=e=>(t,n)=>{const s=Object(h.getTimestamp)(t),r=Object(h.getTimestamp)(n);return Math.abs(s-r)>=e};var w=n("o/5C");const S=(e,t,n,s)=>e===n&&t===s||e===s&&t===n,k=(e,t)=>{const n=Object(h.getType)(e),s=Object(h.getType)(t);return n===s||S(n,s,v.a,C.a)},R=(e,t)=>Object(w.e)(e)===Object(w.e)(t),A=T(6e4),E=(e,t)=>{e=Object(y.a)(e)||e;t=Object(y.a)(t)||t;return I(e,t)&&k(e,t)&&R(e,t)&&!A(e,t)};var P=n("rCfO");const M=e=>Object(y.a)(e)||e;var N=n("SlUU"),_=n("JGJA"),F=n("Zui/"),q=n("9F2+"),L=n("iapW");const D=e=>{const t=(Object(q.a)(e)||Object(o.List)()).find(e=>Object(_.a)("@type",e)===F.d);return t?Object(L.b)(t):Object(o.Map)()},B=Object(P.a)((e,t)=>{e=M(e);const n=D(e);return Object(N.fileAttachmentIdsInMessage)(e).reduce((e,s)=>{if(t.has(""+s)){const r=t.get(""+s),a=n.get(""+s);let i=r&&r.set("fileId",s);a&&(i=i&&i.set("fileUsageType",a));return e.push(i)}return e},Object(o.List)())});var U=n("eoCu"),z=n("vIAU");const H=(e,t,n,s)=>{const r=!t,a=!E(e,t),i=!s&&!E(e,n),c=!n,d={[z.a]:r,[z.b]:a,[z.e]:i,[z.c]:c};return Object.keys(d).reduce((e,t)=>d[t]?e.add(t):e,Object(o.Set)())};var V=n("mNDY"),Q=n("c89E");const W=(e,t)=>!Object.keys(e).some(n=>"fileAttachments"===n||"positionDescriptors"===n||"senders"===n?!Object(o.is)(e[n],t[n]):e[n]!==t[n]),J=Object(l.memo)(({fileAttachments:e,historyConfig:t,message:n,portalId:s,positionDescriptors:r,presentSenderLocators:a,senders:o,visitorLastReadTimestamp:c,lastMessageId:d,ungatedForToolbarRedesign:l,vid:u,recipientVisitors:p,isAttachmentLoading:b,ungatedForDeepLink:m,threadId:g})=>{const j={[Q.a]:Object(U.a)(n)},f=t[Object(h.getType)(n)];return f?Object(i.jsx)("div",Object.assign({},j,{children:Object(i.jsx)(f,{fileAttachments:e,message:n,isAttachmentLoading:b,portalId:s,positionDescriptors:r,senders:o,presentSenderLocators:a,visitorLastReadTimestamp:c,lastMessageId:d,ungatedForToolbarRedesign:l,vid:u,recipientVisitors:p,ungatedForDeepLink:m,threadId:g})})):null},W);J.displayName="MessageHistoryItem";J.propTypes={fileAttachments:d.a.instanceOf(o.List),historyConfig:d.a.object.isRequired,isAttachmentLoading:d.a.bool,lastMessageId:d.a.string,message:d.a.instanceOf(o.Record).isRequired,portalId:d.a.number,positionDescriptors:V.a.isRequired,presentSenderLocators:d.a.instanceOf(o.Set),recipientVisitors:d.a.instanceOf(o.Map),senders:O.a,threadId:d.a.string,ungatedForDeepLink:d.a.bool,ungatedForToolbarRedesign:d.a.bool,vid:d.a.number,visitorLastReadTimestamp:d.a.number};J.defaultProps={innerRef:()=>{},positionDescriptors:[]};var Y=J;const G=p.a.div.withConfig({displayName:"MessageHistory__ReflowElement",componentId:"v24xu0-0"})(["z-index:0;padding-top:4px;padding-left:16px;padding-right:16px;flex-shrink:0;@media screen and (max-width:900px){padding-left:8px;padding-right:8px;}"]);class K extends l.PureComponent{getDontIncludeLastInGroup(e,t){const{messages:n}=this.props,s=n.get(t+2);return!(!s||!E(e,s))}renderHistory(){const{fileAttachments:e,getAdditionalPositionDescriptors:t,historyConfig:n,lastMessageId:s,messages:r,portalId:a,presentSenderLocators:c,senders:d,ungatedForToolbarRedesign:l,visitorLastReadTimestamp:u,vid:p,recipientVisitors:b,isAttachmentLoading:m,ungatedForDeepLink:g,threadId:j}=this.props,f=t(r);return r.map((t,O)=>{const y=O>0?r.get(O-1):void 0,v=r.get(O+1);let C;Object(h.getType)(v)===x.a&&(C=this.getDontIncludeLastInGroup(t,O));const I=B(t,e);let T=H(t,y,v,C);const w=Object(h.getId)(t);T=T.merge(f.get(w,Object(o.Set)()));return Object(i.jsx)(Y,{historyConfig:n,fileAttachments:I,portalId:a,positionDescriptors:T,message:t,isAttachmentLoading:m,senders:d,presentSenderLocators:c,visitorLastReadTimestamp:u,lastMessageId:s,ungatedForToolbarRedesign:l,vid:p,recipientVisitors:b,ungatedForDeepLink:g,threadId:j},Object(U.a)(t))})}render(){const{className:e,themeConfig:t}=this.props;return Object(i.jsx)(G,{className:e,children:Object(i.jsx)(f.Provider,{value:t,children:this.renderHistory()})})}}K.displayName="MessageHistory";K.propTypes={className:d.a.string,fileAttachments:d.a.instanceOf(o.Map),getAdditionalPositionDescriptors:d.a.func,historyConfig:d.a.object.isRequired,isAttachmentLoading:d.a.bool,lastMessageId:d.a.string,messages:d.a.instanceOf(o.List),portalId:d.a.number,presentSenderLocators:d.a.instanceOf(o.Set),recipientVisitors:d.a.instanceOf(o.Map),senders:O.a,themeConfig:d.a.object,threadId:d.a.string,ungatedForDeepLink:d.a.bool,ungatedForToolbarRedesign:d.a.bool,vid:d.a.number,visitorLastReadTimestamp:d.a.number};K.defaultProps={getAdditionalPositionDescriptors:()=>Object(o.Map)(),fileAttachments:Object(o.Map)(),preventAutoscroll:!1,presentSenderLocators:Object(o.Set)(),scrollContainerToBottom:()=>{},displayEmailDeleteBanner:!1,ungatedForToolbarRedesign:!1,ungatedForDeepLink:!1};var X=K,Z=n("mKxs"),$=n("CnAB");const ee=Object(l.memo)(({themeConfig:e,children:t})=>Object(i.jsx)($.a.Provider,{value:e,children:t}));ee.displayName="ThemeConfigProvider";ee.propTypes={children:d.a.node.isRequired,themeConfig:d.a.objectOf(Object(Z.a)("Theme"))};var te=ee,ne=n("T25L").a,se=n("npjq"),re=n("5SRO"),ae=n("Pda3"),ie=n("E6wg"),oe=n("HiOC"),ce=n("OoDT"),de=n("3oj9"),le=n("ZSXR"),ue=n("eEyY"),pe=n("gALC");const he=e=>{const t=Object(le.a)(e);return{isLoadingHistory:Object(ae.isStarted)(t),loadingHistoryFailed:Object(ae.isFailed)(t),sessionId:Object(ie.getSessionId)(e),threadHistory:Object(de.a)(e),threadId:Object(ue.getCurrentThreadId)(e),isOnFocus:Object(pe.a)(e)}},be={fetchThreadHistory:oe.fetchThreadHistory};var me=Object(a.connect)(he,be)(ce.a),ge=n("Fjoq");var je=Object(o.Record)({tileBackgroundColor:"rgba(255, 255, 255, 0.5)"},"FileAttachmentTheme"),fe=n("xzMr"),Oe=n("iDVC");const xe=je({tileBackgroundColor:b.j}),ye=({coloring:e})=>({[m.b]:Object(Oe.a)({borderRadius:"0px 8px 8px 8px",borderWidth:"0px",fileAttachmentTheme:xe}),[m.a]:Object(Oe.a)({borderRadius:"0px 8px 8px 8px",borderWidth:"0px",fileAttachmentTheme:xe,widgetAccent:Object(ge.c)(e)?b.k:Object(ge.a)(e),quickReplyTheme:Object(fe.a)({borderColor:Object(ge.c)(e)?b.h:Object(ge.a)(e),color:Object(ge.c)(e)?b.k:Object(ge.b)(e)})}),[m.c]:Object(Oe.a)({alignItems:"flex-end",backgroundColor:Object(ge.c)(e)?b.l:Object(ge.a)(e),borderColor:"rgba(0, 0, 0, 0.2)",borderRadius:"8px 0px 8px 8px",borderWidth:"0px",textColor:Object(ge.c)(e)?b.k:Object(ge.b)(e),fileAttachmentTheme:xe,widgetAccent:Object(ge.c)(e)?b.k:Object(ge.a)(e)})});var ve=n("sl/w"),Ce=n("gFbD"),Ie=n("PY2H");const Te=p.a.div.withConfig({displayName:"NewThreadPrompt__NewThreadpromptContainer",componentId:"gvh43c-0"})(["padding:32px 20px 12px 20px;text-align:center;width:100%;"]);function we({createNewThread:e}){return Object(i.jsx)(Ce.a,{children:t=>Object(i.jsxs)(Te,{children:[Object(i.jsx)("p",{className:"m-bottom-0",children:Object(i.jsx)(ve.a,{message:"conversations-visitor-ui.newThreadPrompt.newHeading",options:{locale:t}})}),Object(i.jsx)(Ie.a,{"data-test-id":"visitor-widget-start-new-thread-button",onClick:e,children:Object(i.jsx)(ve.a,{message:"conversations-visitor-ui.newThreadPrompt.newButton",options:{locale:t}})})]})})}we.propTypes={createNewThread:d.a.func.isRequired};we.displayName="NewThreadPrompt";var Se=we,ke=n("uxYb"),Re=n("AQmo");const Ae=e=>({accentColor:Object(ge.a)(Object(Re.a)(e))}),Ee={createNewThread:ke.a};var Pe=Object(a.connect)(Ae,Ee)(Se),Me=n("mIAK");class Ne extends l.Component{render(){const{coloring:e,fileAttachments:t,messagesList:n,portalId:s,senders:r,shouldRenderNewThreadPrompt:a}=this.props,o=n.map(e=>{if("INITIAL_MESSAGE"===e.get("@type")){const t=e.get("richText");return t?e.set("richText",t.replace(/\n/g,"<br>")):e}return e});return Object(i.jsx)(me,{messageCount:ne(n),shouldScrollToBottom:a,children:Object(i.jsxs)(te,{themeConfig:ye({coloring:e}),children:[Object(i.jsx)(Me.a,{children:Object(i.jsx)("section",{"aria-label":se.a.text("conversations-visitor-ui.visitorExperienceAriaLabels.messageHistory"),children:Object(i.jsx)(X,{fileAttachments:t,historyConfig:re.a,messages:o,portalId:s,senders:r})})}),a&&Object(i.jsx)(Pe,{})]})})}}Ne.propTypes={coloring:Object(Z.a)("ColoringRecord").isRequired,fileAttachments:d.a.instanceOf(o.Map).isRequired,messagesList:d.a.instanceOf(o.List),portalId:d.a.number.isRequired,senders:d.a.instanceOf(o.Map).isRequired,shouldRenderNewThreadPrompt:d.a.bool.isRequired};Ne.displayName="ThreadHistory";var _e=Ne,Fe=n("dJw2"),qe=n("f8gn"),Le=n("TXBG"),De=n("eCQl"),Be=n("YibP");const Ue=e=>{let t;try{t=Object(Fe.a)(e)}catch(e){Object(De.reportError)({error:Object(Be.a)("ConnectedChatHistoryGetMessagesList selector threw: "+e.message,e)});throw e}return{coloring:Object(Re.a)(e),fileAttachments:Object(Le.a)(e),messagesList:t,portalId:r.a.get(),senders:Object(qe.a)(e)}},ze={};t.a=Object(a.connect)(Ue,ze)(_e)},Wnz4:function(e,t,n){"use strict";n.r(t);n.d(t,"attachmentError",(function(){return a}));var s=n("Ut5p"),r=n("OIId");const a=Object(s.b)(r.a,(e,t)=>({error:e,threadId:t}))},Wzl7:function(e,t,n){"use strict";var s=n("QgEn"),r=n("VfuR"),a=n.n(r),i=n("Ktcs"),o=n("7A+m"),c=n("VuFk"),d=n("19qb"),l=n("k09d"),u=n("G0nr"),p=n("Ux+X"),h=n("mKxs"),b=n("Zn4N"),m=n("FC+o"),g=n("evgc"),j=n("npjq"),f=n("sl/w"),O=n("qKTc"),x=n("PY2H"),y=n("xA3K"),v=n("8Q5G"),C=n("9f1P");const I=n.n(C).a.input.withConfig({displayName:"VizExFileButton__FilePickerInput",componentId:"sc-1jlqnpc-0"})(["display:none;"]),T={accept:[]},w=e=>{const{children:t,multiple:n,accept:r,onChange:a,onClick:o}=e,c=Object(y.a)(e,["children","multiple","accept","onChange","onClick"]),d=Object(i.useRef)(null),l=e=>{d.current&&d.current.click();Object(v.a)(o,e)};return Object(s.jsxs)(i.Fragment,{children:[t({onClick:l}),Object(s.jsx)(I,Object.assign({},c,{ref:d,type:"file",accept:r.join(","),multiple:n,onChange:a}))]})};w.displayName="VizExFileButton";w.defaultProps=T;w.propTypes={accept:a.a.arrayOf(a.a.string),children:a.a.func.isRequired,multiple:a.a.bool,onChange:a.a.func,onClick:a.a.func};var S=w;const k=e=>Object(s.jsx)(S,{accept:O.a,use:"unstyled",onClick:e.onClick,onChange:e.onChange,children:t=>Object(s.jsx)(x.a,Object.assign({use:"on-bright"},t,{children:e.children}))});k.displayName="FilePickerLink";k.propTypes={children:a.a.node.isRequired,onChange:a.a.func.isRequired,onClick:a.a.func};var R=k,A=n("kSDi"),E=n("BnUr");const P=({attachmentsError:e,dismissAttachmentsError:t,selectAttachmentFile:n,thread:r,trackInteraction:a})=>{const i=()=>{t({threadId:Object(E.getThreadId)(r)})},o=({target:{files:e}})=>{if(!e||!e.length)return;const t=e.item(0);n({file:t,thread:r})},c=()=>{a("retry-attachment-upload",{action:"retry attachment upload"})},d=(()=>{switch(e){case b.b:return Object(s.jsx)(f.a,{message:"cvVisitorUIAttachments.errors.fileSizeExceeded",options:{maxSize:j.a.formatSize(A.b)}});case b.c:return Object(s.jsx)(f.a,{message:"cvVisitorUIAttachments.errors.uploadError"});case b.a:return Object(s.jsx)(f.a,{message:"cvVisitorUIAttachments.errors.invalidFileType"});default:return null}})();return Object(s.jsx)(g.a,{title:d,onClose:i,link:Object(s.jsx)(R,{onChange:o,onClick:c,children:Object(s.jsx)(f.a,{message:"cvVisitorUIAttachments.tryAgain"})})})};P.displayName="AttachmentErrorAlerts";P.propTypes={attachmentsError:a.a.oneOf([b.b,b.c,b.a]),dismissAttachmentsError:a.a.func.isRequired,selectAttachmentFile:a.a.func.isRequired,thread:Object(h.a)("Thread").isRequired,trackInteraction:a.a.func.isRequired};var M=P;const N=({createNewThread:e,fetchOlderThreadHistory:t,networkError:n,startPubSub:r,resubscribe:a})=>{const[o,c]=Object(i.useState)([]),d=()=>{c([...o,n])};if(o.includes(n))return null;const l=(()=>{switch(n){case m.b:case m.c:case m.d:return Object(s.jsx)(f.a,{message:"conversations-visitor-ui.network.offline.title"});case m.e:return Object(s.jsx)(f.a,{message:"conversations-visitor-ui.network.pubSubFailure.title"});case m.a:return Object(s.jsx)(f.a,{message:"conversations-visitor-ui.network.newThreadFailure.title"});default:return null}})(),u=(()=>{switch(n){case m.e:return Object(s.jsx)(x.a,{use:"on-bright",onClick:t,children:Object(s.jsx)(f.a,{message:"conversations-visitor-ui.network.pubSubFailure.retry"})});case m.a:return Object(s.jsx)(x.a,{use:"on-bright",onClick:e,children:Object(s.jsx)(f.a,{message:"conversations-visitor-ui.network.pubSubFailure.retry"})});case m.d:return Object(s.jsx)(x.a,{use:"on-bright",onClick:a,children:Object(s.jsx)(f.a,{message:"conversations-visitor-ui.network.pubSubFailure.retry"})});case m.c:return Object(s.jsx)(x.a,{use:"on-bright",onClick:r,children:Object(s.jsx)(f.a,{message:"conversations-visitor-ui.network.pubSubFailure.retry"})});default:return null}})();return Object(s.jsx)(g.a,{title:l,onClose:d,link:u})};N.displayName="NetworkErrorAlerts";N.propTypes={createNewThread:a.a.func.isRequired,fetchOlderThreadHistory:a.a.func.isRequired,networkError:a.a.oneOf([m.b,m.e,m.a,m.c,m.d]).isRequired,resubscribe:a.a.func.isRequired,startPubSub:a.a.func.isRequired};var _=N;class F extends i.Component{render(){const{attachmentsError:e,createNewThread:t,dismissAttachmentsError:n,fetchOlderThreadHistory:r,networkError:a,resubscribe:i,selectAttachmentFile:o,startPubSub:c,thread:d,trackInteraction:l}=this.props;return e?Object(s.jsx)(M,{attachmentsError:e,dismissAttachmentsError:n,selectAttachmentFile:o,thread:d,trackInteraction:l}):a?Object(s.jsx)(_,{createNewThread:t,fetchOlderThreadHistory:r,networkError:a,resubscribe:i,startPubSub:c}):null}}F.displayName="ChatAreaAlertContainer";F.propTypes={attachmentsError:a.a.oneOf([b.b,b.c,b.a]),createNewThread:a.a.func.isRequired,dismissAttachmentsError:a.a.func.isRequired,fetchOlderThreadHistory:a.a.func.isRequired,networkError:a.a.oneOf([m.b,m.e,m.a,m.c,m.d]),resubscribe:a.a.func.isRequired,selectAttachmentFile:a.a.func.isRequired,startPubSub:a.a.func.isRequired,thread:Object(h.a)("Thread").isRequired,trackInteraction:a.a.func.isRequired};var q=F,L=n("GkNN"),D=n("lRdY"),B=n("V2EP"),U=n("r0yA"),z=n("NpZo"),H=n("E6wg"),V=n("Xcjc"),Q=n("J4oD"),W=n("HiOC"),J=n("021p");const Y=()=>(e,t)=>{const n=t(),s=Object(H.getSessionId)(n),r=Object(z.getSelectedThreadId)(n);if(null===r||r===V.a)return;const a=Object(l.a)(n),i=Object(Q.historyDataForThread)(n,{thread:a}),o=Object(J.c)(i),c=Object(J.d)(i);e(Object(W.fetchThreadHistory)({offsetOrdinal:o,offsetTimestamp:c,threadId:r,sessionId:s}))};var G=n("5rZi"),K=n("8HpB");const X=(e,{thread:t})=>({attachmentsError:Object(L.a)(e,{thread:t}),networkError:Object(U.a)(e)}),Z={createNewThread:G.createNewThread,dismissAttachmentsError:D.a,fetchOlderThreadHistory:Y,selectAttachmentFile:B.a,trackInteraction:p.trackInteraction,startPubSub:K.startPubSub,resubscribe:u.resubscribe};var $=Object(d.connect)(X,Z)(q);const ee=e=>({thread:Object(l.a)(e)});var te=Object(d.connect)(ee)($),ne=n("Qf6G"),se=n("zs6M"),re=n("/Dz0"),ae=n("MBJP"),ie=n("647q"),oe=n("ZqFO");const ce=Object(ae.a)([ie.getLatestWidgetData],e=>Object(oe.d)(e));var de=n("lOT2"),le=n("8M+t"),ue=n("AQmo"),pe=n("JGJA");const he=Object(pe.a)("gdpr"),be=Object(ae.a)([he],Object(pe.a)("consentToProcessError")),me=e=>({consentToProcessMessage:ce(e),showGdprConsentToProcessButton:Object(de.a)(e),coloring:Object(ue.a)(e),consentToProcessError:be(e)}),ge={consentToProcess:ne.consentToProcess,closeConsentToProcess:se.a,dismissConsentToProcessError:re.b,trackInteraction:p.trackInteraction};var je=Object(d.connect)(me,ge)(le.a),fe=n("Isoj"),Oe=n("NfVS"),xe=n("+KD7"),ye=n("ET5w"),ve=n("Ub5g");const Ce=({ariaLabel:e,children:t,onClick:n,href:r,rel:a})=>{r||(r=void 0);return Object(s.jsx)(x.a,{theme:Object(ye.a)(Object(ve.b)(xe.m)),onClick:n,href:r,external:!0,"aria-label":e,rel:a,children:t})};Ce.propTypes={ariaLabel:a.a.string,children:a.a.node.isRequired,href:a.a.string,onClick:a.a.func,rel:a.a.string};Ce.defaultProps={href:"",onClick:()=>{}};Ce.displayName="BrandingLink";var Ie=Ce,Te=n("P7jJ");const we=e=>Object(s.jsxs)("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},e,{children:[Object(s.jsx)("defs",{children:Object(s.jsx)("path",{d:"M17 16c-1.38 0-2.5-1.12-2.5-2.5S15.62 11 17 11s2.5 1.12 2.5 2.5S18.38 16 17 16m.906-8.43V4.832c.716-.338 1.218-1.061 1.218-1.9v-.064c0-1.158-.95-2.105-2.11-2.105h-.064c-1.161 0-2.111.947-2.111 2.105v.064c0 .839.503 1.562 1.219 1.9V7.57c-1.067.164-2.042.603-2.846 1.249L5.676 2.97c.05-.191.085-.387.085-.594C5.762 1.067 4.698.001 3.384 0 2.069-.001 1 1.06 1 2.372.998 3.683 2.063 4.748 3.378 4.75c.428 0 .825-.121 1.172-.318l7.413 5.753c-.63.95-1 2.087-1 3.311 0 1.282.406 2.467 1.093 3.443L9.8 19.188c-.178-.053-.363-.091-.56-.091-1.08 0-1.956.874-1.956 1.952 0 1.078.876 1.951 1.956 1.951 1.081 0 1.957-.873 1.957-1.95 0-.196-.038-.381-.091-.559l2.23-2.225c1.012.772 2.273 1.235 3.645 1.235 3.324 0 6.018-2.69 6.018-6.005 0-3.002-2.21-5.482-5.094-5.926",id:"sprocket__a"})}),Object(s.jsx)("use",{xlinkHref:"#sprocket__a",fillRule:"evenodd"})]}));we.displayName="SVGSprocket";var Se=we,ke=n("YXBx"),Re=n("fzij");class Ae extends i.PureComponent{render(){const{trackingPixel:e,liveChatHref:t,onLinkClick:n}=this.props;return Object(s.jsxs)("div",{className:"m-bottom-2 align-center justify-center",children:[Object(s.jsx)(Te.a,{theme:Object(ye.a)(Object(ke.b)(xe.m)),icon:Object(s.jsx)(Se,{}),className:"m-right-1"}),Object(s.jsxs)(Re.a,{use:"help",children:[Object(s.jsx)(Oe.a,{message:"conversations-visitor-experience-components.chatArea.branding_jsx",elements:{Link:Ie},options:{ariaLabel:j.a.text("conversations-visitor-experience-components.chatArea.brandingAriaLabel"),rel:"nofollow noopener",href:t,onClick:n}}),e]})]})}}Ae.propTypes={liveChatHref:a.a.string,onLinkClick:a.a.func,trackingPixel:a.a.node};Ae.displayName="WidgetBranding";var Ee=Ae,Pe=n("jxkM"),Me=n("sYgu"),Ne=n("3BM9"),_e=n("LSdF");function Fe({viralLinkType:e,portalId:t,userId:n,environment:r,isExternalLink:a}){return Object(s.jsx)("img",{src:Object(_e.c)({viralLinkType:e,deviceId:Object(Ne.a)(),portalId:t,userId:n,environment:r,isExternalLink:a}),style:{display:"none"}})}var qe=n("nDpY"),Le=n.n(qe),De=n("OmJX");const Be=Object(ae.a)([De.a],(e={})=>{const t=e.portalId||Le.a.get();return Object(s.jsx)(Fe,{portalId:t,viralLinkType:"livechat"})}),Ue=e=>({trackingPixel:Be(e),liveChatHref:Object(Me.a)(e),onLinkClick:Pe.clickedViralLink});var ze=Object(d.connect)(Ue)(Ee),He=n("QmIQ");const Ve=1e3;class Qe extends i.PureComponent{constructor(e){super(e);this.state={renderNewThreadPrompt:!e.isThreadStarted}}componentDidUpdate(e){const{isThreadStarted:t,toggleOnAndOffInputFocus:n}=this.props,{isThreadStarted:s}=e;t||t===s||setTimeout(()=>{this.setRenderNewThreadPromptTrue();n(!1)},Ve);t&&this.state.renderNewThreadPrompt&&this.setRenderNewThreadPromptFalse()}setRenderNewThreadPromptTrue(){this.setState({renderNewThreadPrompt:!0})}setRenderNewThreadPromptFalse(){this.setState({renderNewThreadPrompt:!1})}renderMessageEditor(){const{requiresExplicitConsentToProcess:e,renderCookieConsentPrompt:t}=this.props,{renderNewThreadPrompt:n}=this.state;return e||t||n?null:Object(s.jsxs)(i.Fragment,{children:[Object(s.jsx)(te,{}),Object(s.jsx)(o.a,{})]})}renderError(){const e=Object(s.jsx)(f.a,{message:"conversations-visitor-ui.network.pubSubFailure.title"});return Object(s.jsx)(g.a,{title:e,onClose:()=>{}})}render(){const{showingGdprProcess:e,showingHsBranding:t,renderCookieConsentPrompt:n}=this.props,{renderNewThreadPrompt:r}=this.state;return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(He.a,{renderError:this.renderError,errorLoggingTitle:"ConnectedThreadHistory",children:Object(s.jsx)(c.a,{shouldRenderNewThreadPrompt:r})}),n&&Object(s.jsx)(fe.a,{}),e&&!n&&Object(s.jsx)(je,{}),this.renderMessageEditor(),t&&Object(s.jsx)(ze,{})]})}}Qe.displayName="UnifiedThreadView";Qe.propTypes={isThreadStarted:a.a.bool.isRequired,renderCookieConsentPrompt:a.a.bool.isRequired,requiresExplicitConsentToProcess:a.a.bool.isRequired,showingGdprProcess:a.a.bool.isRequired,showingHsBranding:a.a.bool.isRequired,toggleOnAndOffInputFocus:a.a.func.isRequired};t.a=Qe},XXaZ:function(e,t,n){var s=n("uQvf"),r=Object.prototype.hasOwnProperty;function a(e){var t=this.__data__;return s?void 0!==t[e]:r.call(t,e)}e.exports=a},XiSY:function(e,t,n){var s=n("3FHW"),r=n("bwj0"),a=n("kmmH"),i=n("QVIP"),o=/[\\^$.*+?()[\]{}|]/g,c=/^\[object .+?Constructor\]$/,d=Function.prototype,l=Object.prototype,u=d.toString,p=l.hasOwnProperty,h=RegExp("^"+u.call(p).replace(o,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function b(e){return!(!a(e)||r(e))&&(s(e)?h:c).test(i(e))}e.exports=b},"Xs/R":function(e,t,n){"use strict";var s=n("QgEn");n("Ktcs");const r=e=>Object(s.jsxs)("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},e,{children:[Object(s.jsx)("defs",{children:Object(s.jsx)("path",{d:"M21.158.222L2.568 11.815c-.8.498-.749 1.215.113 1.591l4.406 1.923 10.395-9.903c1.377-1.296 1.569-1.119.426.395L8.254 18.215v4.927c0 .953.5 1.141 1.113.418l4.473-5.282 5.055 2.207c.861.376 1.643-.092 1.736-1.04l1.81-18.404c.094-.949-.484-1.317-1.283-.819",id:"send__a"})}),Object(s.jsx)("use",{xlinkHref:"#send__a",fillRule:"evenodd"})]}));r.displayName="SVGSend";t.a=r},YZrx:function(e,t,n){"use strict";var s=n("xA3K"),r=n("QgEn"),a=n("VfuR"),i=n.n(a),o=n("9f1P"),c=n.n(o);const d=n("57op").h;var l=n("CR0J");const u=c.a.div.withConfig({displayName:"VizExNanoProgress__Bar",componentId:"sc-1p3dbew-0"})(["transition:width 0.2s ease-in-out;left:0;position:absolute;top:0;opacity:",";width:",";height:3px;z-index:",";background-color:",";"],({value:e})=>0===e?0:1,({value:e})=>e+"%",({zIndex:e})=>e,({theme:e})=>d(e)),p={zIndex:10,value:0},h=e=>{const{zIndex:t,value:n,theme:a}=e,i=Object(s.a)(e,["zIndex","value","theme"]);return Object(r.jsx)(u,Object.assign({},i,{"aria-valuemax":100,"aria-valuemin":0,"aria-valuenow":n,role:"progressbar",zIndex:t,value:n,theme:a}))};h.propTypes={theme:l.a,value:i.a.number,zIndex:i.a.number};h.defaultProps=p;h.displayName="VizExNanoProgress";t.a=h},Ydwr:function(e,t,n){"use strict";var s=n("mKxs"),r=n("VfuR"),a=n.n(r),i=n("9C7g"),o=n.n(i);t.a=o.a.mapOf(o.a.recordOf({data:Object(s.a)("Sender"),status:a.a.string.isRequired}),Object(s.a)("SenderLocator"))},Z6IV:function(e,t,n){"use strict";n.r(t);n.d(t,"isSupportedMessageType",(function(){return l}));var s=n("SmHr"),r=n("A5f/"),a=n("wL7V"),i=n("/rM/"),o=n("0IK8"),c=n("Mx3c"),d=n("9d9s");const l=e=>{if(e instanceof s.a||e instanceof r.a){e=Object(a.a)(e);if(Object(o.getSenderType)(e)!==c.VISITOR)return!1}if(Object(i.a)(e))return!1;const t=Object(o.getType)(e);return Object.keys(d.a).some(e=>e===t)}},ZAuv:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var s=n("2Zef"),r=n("BnUr"),a=n("QYOI"),i=n("nS6h"),o=n("+TdC"),c=n("BvOu"),d=n("cPs9"),l=n("v0wH"),u=n("CdQ/"),p=n("rf4d"),h=n("6O34"),b=n("0G/n");const m=({thread:e})=>t=>{const n=Object(r.getChannelName)(e),m=Object(r.getThreadId)(e),g=s.VISITOR_SENDER,j=Object(d.a)(g),f=Object(u.getMessagesUtk)(),O={type:b.a,value:f},x=Object(a.List)([{deliveryIdentifier:O}]),y=new o.a({id:Object(c.generateUuid)(),typingState:null,sender:{"@type":g,[j]:f},status:{messageStatus:l.b},genericChannelId:p.d,senders:Object(h.a)(x)});t(Object(i.publishMessageToConversation)({channel:n,message:y,threadId:m}))}},Zn4N:function(e,t,n){"use strict";n.d(t,"b",(function(){return s}));n.d(t,"c",(function(){return r}));n.d(t,"a",(function(){return a}));const s="SIZE_LIMIT_EXCEEDED",r="UPLOAD_ERROR",a="INVALID_FILE_TYPE"},"b9/n":function(e,t,n){"use strict";n.d(t,"b",(function(){return s}));n.d(t,"a",(function(){return r}));const s="@type",r="DATE_MESSAGE"},bOW6:function(e,t,n){"use strict";n.r(t);n.d(t,"wrapFailedMessage",(function(){return c}));var s=n("v0wH"),r=n("0IK8"),a=n("C3IS"),i=n("A5f/"),o=n("qjq5");const c=Object(o.a)(({threadId:e,channel:t,allowRetry:n=!0},o)=>{if(Object(a.b)(o)&&Object(r.getStatusForCmf)(o)===s.a){const s=Object(r.getMessageSendFailure)(o),a=!s||s.get("retryable");return Object(i.a)({message:o,threadId:e,channel:t,allowRetry:n&&a})}return o})},bwj0:function(e,t,n){var s,r=n("DOHQ"),a=(s=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||""))?"Symbol(src)_1."+s:"";function i(e){return!!a&&a in e}e.exports=i},byjC:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var s=n("MBJP"),r=n("k8Ub"),a=n("C3IS"),i=n("V+nC"),o=n("J4oD"),c=n("kWFB"),d=n("iPDb");const l=Object(s.a)(o.historyDataForThread,e=>{if(!e||!Object(c.hasMessages)(e))return!1;const t=Object(d.a)(e).filter(e=>Object(a.b)(e)&&!Object(a.c)(e)||Object(i.a)(e)).last();return Boolean(Object(r.a)(t))})},c89E:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));const s="data-cv-message-history-id"},ccWV:function(e,t,n){var s=n("LPlp"),r=Array.prototype.splice;function a(e){var t=this.__data__,n=s(t,e);if(n<0)return!1;n==t.length-1?t.pop():r.call(t,n,1);--this.size;return!0}e.exports=a},d1Q1:function(e,t,n){var s=n("5els"),r=n("p1fP"),a=n("Vsm7"),i=n("wID2"),o=n("BB3q");function c(e){var t=-1,n=null==e?0:e.length;this.clear();for(;++t<n;){var s=e[t];this.set(s[0],s[1])}}c.prototype.clear=s;c.prototype.delete=r;c.prototype.get=a;c.prototype.has=i;c.prototype.set=o;e.exports=c},dByS:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var s=n("Zulv"),r=n("xr6y"),a=n("Ktcs"),i=n("okxY");function o(e,t,n){let{isDisabled:o,trigger:c}=e,d=Object(s.o)(),l=Object(a.useRef)(!1),u=Object(a.useRef)(!1),p=()=>{(l.current||u.current)&&t.open(u.current)},h=e=>{l.current||u.current||t.close(e)};Object(a.useEffect)(()=>{let e=e=>{n&&n.current&&"Escape"===e.key&&t.close(!0)};if(t.isOpen){document.addEventListener("keydown",e,!0);return()=>{document.removeEventListener("keydown",e,!0)}}},[n,t]);let b=()=>{if("focus"!==c){"pointer"===Object(r.a)()?l.current=!0:l.current=!1;p()}},m=()=>{if("focus"!==c){u.current=!1;l.current=!1;h()}},g=()=>{u.current=!1;l.current=!1;h(!0)},j=()=>{if(Object(r.b)()){u.current=!0;p()}},f=()=>{u.current=!1;l.current=!1;h(!0)},{hoverProps:O}=Object(r.f)({isDisabled:o,onHoverStart:b,onHoverEnd:m}),{pressProps:x}=Object(r.j)({onPressStart:g}),{focusableProps:y}=Object(i.d)({isDisabled:o,onFocus:j,onBlur:f},n);return{triggerProps:Object.assign({"aria-describedby":t.isOpen?d:void 0},Object(s.i)(y,O,x)),tooltipProps:{id:d}}}},dJw2:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var s=n("x32n"),r=n("MBJP"),a=n("5SRO"),i=n("4nf7");const o=!1,c=Object(r.a)([i.a],e=>Object(s.insertDateMessagesWithHistoryConfig)(e,a.a,o))},dZ2B:function(e,t,n){"use strict";n.r(t);n.d(t,"getUserTimezone",(function(){return a}));const s=function(e){return(e>0)-(e<0)||+e},r=e=>e>=10?e:"0"+e,a=()=>{const e=(new Date).getTimezoneOffset(),t=s(e),n=Math.floor(Math.abs(e/60)),a=Math.abs(e%60),i=`${r(n)}:${r(a)}`;return t>0?"-"+i:"+"+i}},"eg+O":function(e,t,n){"use strict";n.r(t);n.d(t,"fileExceedsSizeLimit",(function(){return r}));var s=n("kSDi");const r=e=>e.size>s.b},ejMo:function(e,t,n){"use strict";var s=n("QYOI"),r=n("6GFX");class a extends(Object(s.Record)({file:null,localId:"",fileId:-1,uploadProgress:0},"FileUploadRecord")){constructor(e={}){super(Object.assign({},e,{localId:Object(r.generateIdForFile)({file:e.file||null,timestamp:Date.now()})}))}}t.a=a},eoCu:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var s=n("MJM1");const r=e=>Object(s.a)(["id"],e)||Object(s.a)(["message","id"],e)||-1},evgc:function(e,t,n){"use strict";var s=n("QgEn"),r=n("VfuR"),a=n.n(r),i=n("9f1P"),o=n.n(i),c=n("/mXs"),d=n("P7jJ"),l=n("3MJX"),u=n("ET5w"),p=n("Tbmo"),h=n("+KD7"),b=n("npjq");const m=o.a.div.withConfig({displayName:"ChatAreaAlert__Wrapper",componentId:"sc-1m45hq0-0"})(["width:100%;display:flex;justify-content:center;background-color:transparent;"]),g=o.a.div.withConfig({displayName:"ChatAreaAlert__Alert",componentId:"sc-1m45hq0-1"})(["display:flex;justify-content:flex-end;align-items:center;padding:7px 14px;min-width:85%;background-color:",";border:1px solid ",";font-weight:500;font-size:12px;"],h.o,h.p),j=o.a.div.withConfig({displayName:"ChatAreaAlert__Title",componentId:"sc-1m45hq0-2"})(["flex:0 1 100%;"]),f=o.a.div.withConfig({displayName:"ChatAreaAlert__LinkWrapper",componentId:"sc-1m45hq0-3"})(["flex:0 0 auto;"]),O=o()(c.a).withConfig({displayName:"ChatAreaAlert__StyledCloseButton",componentId:"sc-1m45hq0-4"})(["position:static;flex:0 0 36px;margin-left:8px;margin-right:-8px;"]),x=({title:e,link:t,onClose:n})=>Object(s.jsx)(m,{"data-test-id":"alert",role:"alert",children:Object(s.jsxs)(g,{children:[Object(s.jsx)(j,{children:e}),t&&Object(s.jsx)(f,{children:t}),Object(s.jsx)(O,{use:"transparent-on-background",theme:Object(p.a)(h.r,Object(u.a)()),"aria-label":b.a.text("conversations-visitor-experience-components.visitorExperienceAriaLabels.dismiss"),onClick:n,children:Object(s.jsx)(d.a,{icon:Object(s.jsx)(l.a,{})})})]})});x.propTypes={link:a.a.node,onClose:a.a.func.isRequired,title:a.a.node.isRequired};x.defaultProps={onClose:()=>{}};x.displayName="ChatAreaAlert";t.a=x},f8gn:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var s=n("MZef"),r=n("N7dr"),a=n("KXN9"),i=n("x1JE"),o=n("QYOI"),c=n("MBJP"),d=n("g4ag"),l=n("fl6v"),u=n("8FuJ"),p=n("BYz9");const h=Object(c.a)([l.getResponders],e=>Object(i.getEntries)(e).reduce((e,t,n)=>{const i=Object(a.a)(t);return Object(d.a)([Object(p.a)(n)],Object(s.a)({[r.a]:i?Object(u.a)(i):null,[r.c]:Object(a.c)(t)}),e)},Object(o.Map)()))},febS:function(e,t,n){"use strict";var s=n("QYOI"),r=n("+KD7");const a=Object(s.Record)({tileBackgroundColor:r.j,tileBorderColor:r.l},"FileAttachmentTheme");t.a=a},"g/uM":function(e,t,n){"use strict";var s=n("xA3K"),r=n("QgEn"),a=n("VfuR"),i=n.n(a);const o="javascript:void(0)",c=/^([^:]+):/,d=/[\s\x00-\x1f]/g,l=e=>{if(e&&"string"==typeof e){const t=e.match(c);if(!t||e===o)return!1;if("javascript:"===t[0].replace(d,"").toLowerCase())return!0}return!1};var u=n("9f1P");const p=n.n(u).a.img.withConfig({displayName:"VizExImage__StyledImg",componentId:"sc-1qxxcxy-0"})(["display:block;height:auto;max-width:100%;"]),h=e=>{const{src:t}=e,n=Object(s.a)(e,["src"]),a=l(t);a&&console.warn("VizExImage was given an unsafe src, defaulting to empty.");return Object(r.jsx)(p,Object.assign({},n,{src:a?void 0:t}))};h.propTypes={src:i.a.string.isRequired};h.displayName="VizExImage";t.a=h},gALC:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var s=n("MJM1");const r=e=>Object(s.a)(["widgetInputFocusStatus","widgetInputIsOnFocus"],e)},gD8A:function(e,t,n){"use strict";n.r(t);n.d(t,"updateVisitorContext",(function(){return r}));var s=n("VYoM");function r({currentUrl:e,sessionId:t,threadId:n}){return s.a.put(`livechat-public/v1/thread/visitor/${n}/currentUrl`,{query:{sessionId:t,threadId:n},data:{currentUrl:e}})}},gygH:function(e,t,n){"use strict";n.r(t);n.d(t,"handleAttachmentUploadProgress",(function(){return a}));var s=n("kSDi"),r=n("qgyf");const a=({localId:e,threadId:t,loaded:n,total:a})=>i=>{const o=n/a*s.c;i(Object(r.attachmentUploadProgress)({localId:e,threadId:t,progress:o}))}},iDVC:function(e,t,n){"use strict";var s=n("febS"),r=n("+KD7"),a=n("QYOI"),i=n("xzMr");const o=Object(a.Record)({alignItems:"flex-start",avatarWidth:"32px",backgroundColor:r.l,borderColor:r.a,borderRadius:"4px",borderWidth:"1px",messageSpacing:"8px",textColor:r.k,fileAttachmentTheme:Object(s.a)(),quickReplyTheme:Object(i.a)(),widgetAccent:r.k},"Theme");t.a=o},iao3:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var s=n("sZZm"),r=n("tek+");const a=(e,t=!1)=>{Object(s.postExternalApiEvent)({eventType:r.d,payload:{visitorMessageData:e,isEmptyInput:t}})}},iu1j:function(e,t,n){"use strict";var s=n("QgEn"),r=n("VfuR"),a=n.n(r),i=n("Ktcs"),o=n("npjq"),c=n("sl/w"),d=n("OI0Z");const l=["PNG","GIF","JPEG","JPG"],u=e=>{const t=e.name.split("."),n=t[t.length-1]||"";return-1!==l.indexOf(n.toUpperCase())};var p=n("ughT");const h=e=>{const t=Object(p.getFile)(e),n=Object(p.getUploadProgress)(e);return t&&n?n/100*t.size:0};var b=n("n6o2"),m=n("4hT6"),g=n("l6Ux"),j=n("g/uM");class f extends i.Component{constructor(e){super(e);this.state={imageDataUrl:""}}componentDidMount(){this.processImageFile(this.props.imageFile)}componentDidUpdate(e){this.props.imageFile!==e.imageFile&&this.processImageFile(this.props.imageFile)}shouldComponentUpdate(e,t){return t.imageDataUrl!==this.state.imageDataUrl}processImageFile(e){const t=new FileReader;t.addEventListener("load",()=>{this.setState({imageDataUrl:t.result})});t.readAsDataURL(e)}render(){return Object(s.jsx)(j.a,{src:this.state.imageDataUrl})}}f.displayName="ImageAttachmentPreview";f.propTypes={imageFile:a.a.instanceOf(File).isRequired};var O=f,x=n("mKxs"),y=n("YZrx"),v=n("rF4n"),C=n("Jr27");class I extends i.Component{customFilePreview(){const e=this.props.attachment,t=Object(p.getFile)(e);if(u(t))return Object(s.jsx)(O,{imageFile:t})}fileInfo(){return Object(g.isUploadCompleted)(this.props.attachment)?Object(s.jsx)(d.a,{value:Object(m.getFileSize)(this.props.attachment)}):Object(s.jsx)(c.a,{message:"conversations-visitor-ui.stagedAttachment.uploadProgress",options:{uploadedBytes:o.a.formatSize(h(this.props.attachment),{precision:2,strip_insignificant_zeroes:!0}),totalBytes:o.a.formatSize(Object(m.getFileSize)(this.props.attachment))}})}renderProgress(){return Object(g.isUploadCompleted)(this.props.attachment)?null:Object(s.jsx)(y.a,{value:Object(p.getUploadProgress)(this.props.attachment)})}render(){return Object(s.jsxs)(v.a,{processing:!Object(g.isUploadCompleted)(this.props.attachment),fileName:Object(b.getFileName)(this.props.attachment),fileInfo:this.fileInfo(),preview:this.customFilePreview(),style:{minWidth:220},children:[Object(s.jsx)(C.a,{size:"xs",onClick:this.props.onRemove}),this.renderProgress()]})}}I.displayName="FileUpload";I.propTypes={attachment:Object(x.a)("FileUploadRecord").isRequired,onRemove:a.a.func.isRequired};t.a=I},jM00:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var s=n("QYOI"),r=n("MBJP"),a=n("JGJA"),i=n("eEyY"),o=n("OhTC");const c=Object(r.a)([o.a,i.getCurrentThreadId],(e,t)=>{const n=Object(a.a)(t,e);return n?n.toList():Object(s.List)()})},jVj2:function(e,t,n){"use strict";n.r(t);n.d(t,"removeAttachment",(function(){return a}));var s=n("Ut5p"),r=n("OIId");const a=Object(s.b)(r.g,({localId:e,threadId:t})=>({localId:e,threadId:t}))},k3iI:function(e,t,n){"use strict";n.r(t);n.d(t,"updateSessionId",(function(){return a}));var s=n("Ut5p"),r=n("v+ge");const a=Object(s.b)(r.b,e=>({sessionId:e}))},kSDi:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));n.d(t,"b",(function(){return r}));n.d(t,"c",(function(){return a}));const s="filemanager/api",r=10485760,a=95},l6Ux:function(e,t,n){"use strict";n.r(t);n.d(t,"isUploadCompleted",(function(){return r}));var s=n("ughT");const r=e=>-1!==Object(s.getFileId)(e)},lJFu:function(e,t,n){"use strict";n.r(t);var s=n("UxsU"),r=n("rf4d"),a=n("Xvzl"),i=n("DdHT"),o=n("nf9S"),c=n("Hnia"),d=n("021p");const l=e=>{Object(c.threadHistoryInvariant)(e);return Object(i.a)(d.b,Object(a.a)(o.isConversationalMessage),e=>e&&e.last())(e)};var u=n("nzmY"),p=n("0IK8");n.d(t,"buildCreatedThread",(function(){return h}));const h=({channelDetails:e,messagesPageUri:t,threadHistory:n,threadId:a})=>Object(u.a)({channelDetails:e,currentUrl:t,latestMessageTimestamp:Object(p.getTimestamp)(l(n)),originalGenericChannelId:r.d,status:s.a.STARTED,threadId:a})},lMvc:function(e,t,n){var s=n("uQvf"),r="__lodash_hash_undefined__",a=Object.prototype.hasOwnProperty;function i(e){var t=this.__data__;if(s){var n=t[e];return n===r?void 0:n}return a.call(t,e)?t[e]:void 0}e.exports=i},lOT2:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var s=n("MBJP"),r=n("LgEy"),a=n("8cLO"),i=n("647q"),o=n("3gKe");const c=Object(s.a)([i.getLatestWidgetData,o.getUserHasGivenConsentToProcess],(e,t)=>Object(r.gdprConsentToProcessEnabled)(e)&&!t&&Object(a.gdprExplicitConsentRequired)(e))},lRdY:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var s=n("Ut5p"),r=n("OIId");const a=Object(s.b)(r.f,({threadId:e})=>({threadId:e}))},lTxV:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var s=n("JGJA");const r=Object(s.a)("currentUrl")},le4V:function(e,t,n){"use strict";var s=n("MBJP"),r=n("DdHT"),a=n("ZqFO"),i=n("VvTX");const o=Object(r.a)(a.f,i.getGdprConsentToCommunicateEnabled);var c=n("647q");n.d(t,"a",(function(){return d}));const d=Object(s.a)([c.getLatestWidgetData],e=>o(e))},lnDz:function(e,t,n){"use strict";n.r(t);n.d(t,"attachmentUploadComplete",(function(){return a}));var s=n("Ut5p"),r=n("OIId");const a=Object(s.b)(r.b,({localId:e,threadId:t,fileId:n,uploadedFile:s})=>({localId:e,threadId:t,fileId:n,uploadedFile:s}))},"lw+E":function(e,t,n){"use strict";var s=n("npjq"),r=n("JGJA"),a=n("Mx3c");const i="avatar",o="data",c="email",d="firstName",l="id",u="lastName",p="senderType",h="status";n.d(t,"a",(function(){return b}));n.d(t,"d",(function(){return m}));n.d(t,"e",(function(){return g}));n.d(t,"f",(function(){return j}));n.d(t,"g",(function(){return f}));n.d(t,"h",(function(){return O}));n.d(t,"b",(function(){return x}));n.d(t,"i",(function(){return y}));n.d(t,"c",(function(){return v}));const b=Object(r.a)(i),m=Object(r.a)(c),g=Object(r.a)(d),j=Object(r.a)(l),f=Object(r.a)(u),O=Object(r.a)(p),x=Object(r.a)(o),y=Object(r.a)(h),v=e=>{const t=g(e),n=f(e),r=m(e),i=O(e);return t&&n?`${t} ${n}`:t||(r||(i===a.VISITOR?s.a.text("conversations-message-history.responder.unknownVisitorAvatar"):null))}},mMAp:function(e,t,n){var s=n("LPlp");function r(e){return s(this.__data__,e)>-1}e.exports=r},mNDY:function(e,t,n){"use strict";var s=n("VfuR"),r=n.n(s),a=n("9C7g"),i=n("vIAU");const o=r.a.oneOf([i.a,i.b,i.c,i.e,i.d,i.f,i.g]).isRequired;t.a=Object(a.setOf)(o)},n6o2:function(e,t,n){"use strict";n.r(t);n.d(t,"getFileName",(function(){return a}));var s=n("JGJA"),r=n("ughT");const a=e=>{const t=Object(r.getFile)(e);return t&&Object(s.a)("name",t)||""}},nEWr:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));const s=1024},oLsC:function(e,t,n){"use strict";var s=n("QYOI");const r=Object(s.Record)({avatar:null,email:null,firstName:null,id:null,lastName:null,senderType:null},"Sender");t.a=r},p1fP:function(e,t,n){var s=n("QhUm");function r(e){var t=s(this,e).delete(e);this.size-=t?1:0;return t}e.exports=r},pDio:function(e,t,n){var s=n("XiSY"),r=n("/TWJ");function a(e,t){var n=r(e,t);return s(n)?n:void 0}e.exports=a},pKKv:function(e,t,n){"use strict";n.r(t);n.d(t,"getTestStringFromQueryParams",(function(){return a}));var s=n("F1x+");const r=e=>Object(s.getWindowLocation)().paramValue("url").match(new RegExp(`[\\?&]${e}[^&#]*`,"i")),a=()=>r("var")?r("var")[0].split("=")[1]:""},pdIa:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var s=n("sZZm"),r=n("tek+"),a=n("Zui/"),i=n("JGJA");const o=({name:e,multiSelect:t,value:n})=>{Object(s.postExternalApiEvent)({eventType:r.e,payload:{name:e,multiSelect:t,value:n}})},c=e=>{const t=Object(i.a)("quickReplies",e),n=Object(i.a)("allowMultiSelect",e),s={name:a.i,multiSelect:n,value:Array.isArray(t)&&t.length?t.map(e=>e.value):[]};o(s)}},qKTc:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));const s=["video/*","audio/*","application/json","application/vnd.ms-excel","application/vnd.ms-powerpoint","application/msword","application/pdf","application/zip","application/x-zip","application/x-zip-compressed","application/x-7z-compressed","application/gzip","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.oasis.opendocument.graphics","application/vnd.oasis.opendocument.presentation","application/vnd.oasis.opendocument.spreadsheet","application/vnd.oasis.opendocument.text","application/postscript","image/gif","image/jpeg","image/jpg","image/png","image/tiff","text/calendar","text/css","text/csv","text/plain","text/xml"]},qgyf:function(e,t,n){"use strict";n.r(t);n.d(t,"attachmentUploadProgress",(function(){return a}));var s=n("Ut5p"),r=n("OIId");const a=Object(s.b)(r.c,({localId:e,threadId:t,progress:n})=>({localId:e,threadId:t,progress:n}))},qwm9:function(e,t,n){"use strict";n.r(t);n.d(t,"createVisitorThread",(function(){return i}));var s=n("nDpY"),r=n.n(s),a=n("VYoM");function i({sessionId:e,messageId:t,hubspotUtk:n,messagesPageUri:s,visitorThreadInitialHistory:i,zoneId:o}){return a.a.post("livechat-public/v1/thread/visitor",{query:{sessionId:e,welcomeMessageId:t,hubspotUtk:n,portalId:r.a.get(),expectedResponseType:"WRAPPER_V2",zoneId:o},data:{visitorThreadInitialHistory:i},headers:{"X-HubSpot-Messages-Uri":s}})}},r0yA:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var s=n("MBJP"),r=n("JGJA"),a=n("FC+o"),i=n("Pda3"),o=n("KXN9"),c=n("Ryja"),d=n("M/2P"),l=n("ZSXR");const u=e=>e.clientData.isPubNubClientConnected,p=Object(r.a)("subscriptions"),h=Object(s.a)([l.a,c.getAsyncStagedThread,p,d.getAsyncPubSubClient,u],(e,t,n,s,r)=>{if(Object(i.isFailed)(e))return a.e;if(Object(i.isFailed)(t)){const e=Object(o.b)(t),n=e&&418===e.status;if(!e||!n)return a.a}return Object(i.isFailed)(n)?a.d:Object(i.isFailed)(s)?a.c:r?null:a.b})},rF4n:function(e,t,n){"use strict";var s=n("xA3K"),r=n("QgEn"),a=n("9f1P"),i=n.n(a),o=n("57op");const c=o.b,d=o.a,l=o.i,u=()=>"#f5f8fa",p=()=>"#eaf0f6";var h=n("VfuR"),b=n.n(h),m=n("CR0J");const g=({theme:e})=>Object(a.css)(["color:",";background-color:",";"],c(e),d(e)),j=i.a.div.withConfig({displayName:"VizExFileAttachment__AttachmentWrapper",componentId:"sc-27s3v4-0"})(["display:flex;font-size:12px;padding:12px;padding-right:32px;border-radius:3px;position:relative;max-width:100%;flex-direction:row;background-color:",";border:1px solid ",";color:",";",";"],()=>u(),()=>p(),({theme:e})=>l(e),({theme:e,processing:t})=>t&&g({theme:e})),f=i.a.div.withConfig({displayName:"VizExFileAttachment__ContentWrapper",componentId:"sc-27s3v4-1"})(["display:flex;position:relative;max-width:100%;> *:nth-child(2){padding-left:12px;}"]),O=i.a.div.withConfig({displayName:"VizExFileAttachment__PreviewWrapper",componentId:"sc-27s3v4-2"})(["overflow-y:hidden;overflow-x:hidden;align-items:center;display:flex;flex-basis:auto;justify-content:center;flex-shrink:0;font-size:32px;max-height:32px;width:32px;"]),x=i.a.div.withConfig({displayName:"VizExFileAttachment__FileInfoWrapper",componentId:"sc-27s3v4-3"})(["flex-grow:1;flex-shrink:0;flex-basis:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;@media all and (-ms-high-contrast:none){flex-basis:auto;max-width:100%;padding-right:12px;}"]),y=i.a.b.withConfig({displayName:"VizExFileAttachment__FileName",componentId:"sc-27s3v4-4"})(["font-weight:600;font-size:12px;line-height:12px;"]),v=i.a.div.withConfig({displayName:"VizExFileAttachment__FileInfo",componentId:"sc-27s3v4-5"})(["font-size:12px;line-height:12px;"]),C=e=>{const{processing:t,preview:n,fileName:a,fileInfo:i,children:o,theme:c}=e,d=Object(s.a)(e,["processing","preview","fileName","fileInfo","children","theme"]);return Object(r.jsxs)(j,Object.assign({},d,{theme:c,processing:t,children:[o,Object(r.jsxs)(f,{children:[n&&Object(r.jsx)(O,{children:n}),Object(r.jsxs)(x,{children:[Object(r.jsx)(y,{children:a}),Object(r.jsx)(v,{children:i})]})]})]}))};C.propTypes={children:b.a.node,fileInfo:b.a.node,fileName:b.a.node,preview:b.a.node,processing:b.a.bool,theme:m.a};C.displayName="VizExFileAttachment";t.a=C},sIRh:function(e,t,n){"use strict";n.r(t);n.d(t,"default",(function(){return m}));n.d(t,"publishEmailCaptureResponseMessage",(function(){return m}));var s=n("/fsP"),r=n("nS6h"),a=n("2Zef"),i=n("BvOu"),o=n("v0wH"),c=n("QYOI"),d=n("0U0A"),l=n("rf4d"),u=n("OxGf"),p=n("CdQ/"),h=n("6O34"),b=n("0G/n");const m=({channel:e,email:t,threadId:n})=>(m,g)=>{const j=a.SYSTEM_SENDER,f={type:b.a,value:Object(p.getMessagesUtk)()||""},O=Object(c.List)([{deliveryIdentifier:f}]),x=new s.a({id:Object(i.generateUuid)(),text:t,sender:{"@type":j},status:{messageStatus:o.b},channelInstanceId:Object(d.getChannelInstanceId)(g()),senders:Object(h.a)(O),genericChannelId:l.d,direction:u.a});m(Object(r.publishMessageToConversation)({channel:e,message:x,threadId:n}))}},sWFM:function(e,t,n){"use strict";n.r(t);n.d(t,"getMessageId",(function(){return a}));var s=n("MBJP"),r=n("647q");const a=Object(s.a)([r.getLatestWidgetData],e=>e.message.id)},tlSg:function(e,t,n){"use strict";n.r(t);n.d(t,"sendConsentToCommunicate",(function(){return o}));var s=n("nDpY"),r=n.n(s),a=n("VYoM");const i="livechat-public/v1/privacy/consentToCommunicate";function o({sessionId:e,hubspotUtk:t,threadId:n}){return a.a.put(i,{query:{sessionId:e,hubspotUtk:t,threadId:n,portalId:r.a.get()}})}},uIOU:function(e,t,n){var s=n("QG41"),r=n("6upE"),a=n("lMvc"),i=n("XXaZ"),o=n("KLi6");function c(e){var t=-1,n=null==e?0:e.length;this.clear();for(;++t<n;){var s=e[t];this.set(s[0],s[1])}}c.prototype.clear=s;c.prototype.delete=r;c.prototype.get=a;c.prototype.has=i;c.prototype.set=o;e.exports=c},uQvf:function(e,t,n){var s=n("pDio")(Object,"create");e.exports=s},"uk/S":function(e,t,n){"use strict";n.r(t);n.d(t,"sendConsentToProcess",(function(){return o}));var s=n("nDpY"),r=n.n(s),a=n("VYoM");const i="livechat-public/v1/privacy/consentToProcess";function o({sessionId:e,hubspotUtk:t,welcomeMessageId:n}){return a.a.put(i,{query:{sessionId:e,hubspotUtk:t,welcomeMessageId:n,portalId:r.a.get()}})}},vIAU:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));n.d(t,"b",(function(){return r}));n.d(t,"e",(function(){return a}));n.d(t,"c",(function(){return i}));n.d(t,"d",(function(){return o}));n.d(t,"f",(function(){return c}));n.d(t,"g",(function(){return d}));const s="FIRST",r="FIRST_IN_GROUP",a="LAST_IN_GROUP",i="LAST",o="LAST_COMMON_MESSAGE",c="LAST_NON_FWD_MESSAGE",d="LAST_READ_RECEIPT_MESSAGE"},vwA6:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var s=n("Ut5p"),r=n("xZ3y");const a=Object(s.b)(r.USER_INPUT_ON_FOCUS,e=>({widgetInputIsOnFocus:e}));function i(e){return t=>{t(a(e))}}},w1Zi:function(e,t,n){"use strict";var s=n("QgEn"),r=n("1HZx"),a=n("9Utk"),i=n.n(a),o=n("Syy6"),c=n.n(o),d=n("VfuR"),l=n.n(d),u=n("Ktcs"),p=n("7j4v"),h=n("2gT5"),b=n("mKxs"),m=n("kSDi"),g=n("QYOI"),j=n("8f3s"),f=n("qKTc");const O=1e3;var x=n("iao3");class y extends u.PureComponent{constructor(e){super(e);this.publishTypingMessage=c()(this.props.publishTypingMessage,p.a,{leading:!0,trailing:!1});this.onChatInputChanged=this.onChatInputChanged.bind(this);this.onPublishMessage=this.onPublishMessage.bind(this);this.onSelectAttachmentFiles=this.onSelectAttachmentFiles.bind(this);this.onRemoveAttachment=this.onRemoveAttachment.bind(this);this.inputStagingEvent=i()(x.a,O)}onChatInputChanged(e){const{currentConversation:t,disablePublish:n,shouldSendInputStagingEvent:s,showInitialMessageBubble:r,setMessageEditorStagingText:a}=this.props;a(e);n||""===e||this.publishTypingMessage({thread:t});s&&this.inputStagingEvent(e,!1);r&&this.props.closeInitialMessageBubble()}onPublishMessage({text:e,richText:t,quickReply:n}){const{messagesPageUri:s,publishMessage:r,stagedAttachments:a,removeMessageEditorStagingText:i}=this.props;this.publishTypingMessage.cancel();r({text:e,richText:t,quickReply:n,url:s,fileAttachment:Object(j.a)(a)});i()}onSelectAttachmentFiles({files:e}){if(!e||!e.length)return;const{onSelectAttachmentFile:t,currentConversation:n}=this.props;t({file:e.item(0),thread:n})}onRemoveAttachment({attachment:e}){const{currentConversation:t,onRemoveAttachment:n}=this.props;n({attachment:e,thread:t})}render(){const{coloring:e,currentConversation:t,disablePublish:n,disableTextInput:a,isOnFocus:i,mobile:o,networkOffline:c,shouldDisableInitialInputFocus:d,shouldHideAttachmentButton:l,shouldSendInputStagingEvent:u,showingHsBranding:p,stagedAttachments:b,toggleOnAndOffInputFocus:g,stagedMessage:j,showQuickReplyPlaceholder:O,canUploadAttachments:x}=this.props;return Object(s.jsx)(r.a,{coloring:e,chatInputChanged:this.onChatInputChanged,disabled:a,disablePublish:n,isOnFocus:i,maxAttachmentFileSize:m.b,mobile:o,networkOffline:c,onSelectAttachmentFiles:this.onSelectAttachmentFiles,onRemoveAttachment:this.onRemoveAttachment,publishMessage:this.onPublishMessage,shouldHideAttachmentButton:l,shouldDisableInitialInputFocus:d,showingHsBranding:p,stagedAttachments:b,stagedMessageEditorText:j,supportsAttachments:Object(h.isPersistedThread)(t),toggleOnAndOffInputFocus:g,fileTypes:f.a,showQuickReplyPlaceholder:O,shouldSendInputStagingEvent:u,inputStaging:this.inputStagingEvent,canUploadAttachments:x})}}y.displayName="MessageEditorWrapper";y.propTypes={canUploadAttachments:l.a.bool.isRequired,closeInitialMessageBubble:l.a.func.isRequired,coloring:Object(b.a)("ColoringRecord").isRequired,currentConversation:Object(b.a)("Thread"),disablePublish:l.a.bool.isRequired,disableTextInput:l.a.bool.isRequired,isOnFocus:l.a.bool.isRequired,messagesPageUri:l.a.string,mobile:l.a.bool,networkOffline:l.a.bool.isRequired,onRemoveAttachment:l.a.func.isRequired,onSelectAttachmentFile:l.a.func.isRequired,publishMessage:l.a.func.isRequired,publishTypingMessage:l.a.func.isRequired,removeMessageEditorStagingText:l.a.func.isRequired,setMessageEditorStagingText:l.a.func.isRequired,shouldDisableInitialInputFocus:l.a.bool.isRequired,shouldHideAttachmentButton:l.a.bool.isRequired,shouldSendInputStagingEvent:l.a.bool.isRequired,showInitialMessageBubble:l.a.bool.isRequired,showQuickReplyPlaceholder:l.a.bool.isRequired,showingHsBranding:l.a.bool.isRequired,stagedAttachments:l.a.instanceOf(g.List),stagedMessage:l.a.string,toggleOnAndOffInputFocus:l.a.func};t.a=y},wID2:function(e,t,n){var s=n("QhUm");function r(e){return s(this,e).has(e)}e.exports=r},wn0x:function(e,t,n){"use strict";n.r(t);n.d(t,"getMessageId",(function(){return i}));var s=n("MBJP"),r=n("JGJA"),a=n("OmJX");const i=Object(s.a)(a.a,Object(r.a)("id"))},wy0V:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var s=n("Ut5p"),r=n("cXEp");const a=Object(s.b)(r.b,({currentUrl:e,threadId:t})=>({currentUrl:e,threadId:t}))},x32n:function(e,t,n){"use strict";n.r(t);var s=n("QYOI"),r=n("BW+T"),a=n.n(r),i=n("0IK8"),o=n("b9/n");var c=Object(s.Record)({[o.b]:o.a,timestamp:null,id:null},"DateMessage");const d=(e,t)=>{const n=new Date(Object(i.getTimestamp)(e)),s=new Date(Object(i.getTimestamp)(t));return n.getFullYear()!==s.getFullYear()||n.getMonth()!==s.getMonth()||n.getDate()!==s.getDate()},l=(e,t,n)=>!(!t&&!n)&&Boolean(Object(i.getTimestamp)(e)&&(!t||d(t,e)));var u=n("eoCu");const p=a()(c,({id:e})=>e),h=(e,t=!0,n=(()=>!0))=>e.reduce((s,r,a)=>{const o=a>0?e.get(a-1):void 0;l(r,o,t)&&n(r)&&(s=s.push(p({id:Object(u.a)(r)+"-date",timestamp:Object(i.getTimestamp)(r)})));return s.push(r)},Object(s.List)());n.d(t,"insertDateMessagesWithHistoryConfig",(function(){return b}));const b=(e,t={},n=!0)=>h(e,n,e=>{const n=Object(i.getType)(e);return t[n]})},xAl4:function(e,t,n){"use strict";n.r(t);n.d(t,"uploadAttachmentClient",(function(){return r}));var s=n("0JoJ");const r=({formData:e,uploadUrl:t,onProgress:n=(()=>{})})=>s.a.post(t,{headers:{"content-type":!1},data:e,timeout:0,withXhr:e=>{e.upload.addEventListener("progress",n,!1)}})},xP7N:function(e,t){function n(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}e.exports=n},xePV:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var s=n("JGJA");const r=Object(s.a)("fileUploadsErrors")},xzMr:function(e,t,n){"use strict";var s=n("QYOI"),r=n("+KD7");const a=Object(s.Record)({width:"auto",minHeight:36,borderColor:r.h,whiteSpace:"normal",lineHeight:"1rem",color:r.h},"QuickReplyTheme");t.a=a},yCEM:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));n.d(t,"b",(function(){return r}));n.d(t,"c",(function(){return a}));const s="agent",r="default",a="visitor"},yDuE:function(e,t,n){"use strict";n.r(t);n.d(t,"getChannelInstanceIdFromCurrentThreadHistory",(function(){return a}));var s=n("MBJP"),r=n("ZSXR");const a=Object(s.a)(r.a,e=>e.data.messages.results.toList().filter(e=>!(null===e.channelInstanceId||void 0===e.channelInstanceId)).sort((e,t)=>e.timeStamp-t.timeStamp).last().channelInstanceId)},z4Bj:function(e,t,n){"use strict";function s(){let e=()=>{},t=()=>{};return{promise:new Promise((n,s)=>{e=n;t=s}),resolve:e,reject:t}}t.a=s},z96q:function(e,t,n){"use strict";n.r(t);n.d(t,"sendVisitorEmailAddress",(function(){return r}));var s=n("VYoM");function r({threadId:e,email:t,sessionId:n,hubspotUtk:r}){return s.a.post("livechat-public/v1/visitor/public",{query:{threadId:e,email:t,sessionId:n,hubspotUtk:r}})}},zB5l:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var s=n("MBJP"),r=n("KSjU"),a=n("xk3e");const i=Object(s.a)([a.getAssignedResponderInWidget],e=>Boolean(e&&Object(r.a)(e)))},zs6M:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var s=n("KrP/"),r=n("Ut5p"),a=n("Ux+X");const i=Object(r.b)(s.e);function o(){return e=>{e(Object(a.trackInteraction)("widget-interaction",{action:"close consent to process"}));e(i())}}}}]);
//# sourceMappingURL=threadview-utv.js.map